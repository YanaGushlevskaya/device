!function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.noUiSlider=t()}(function(){"use strict";var ut="13.1.5";function ct(t){t.parentElement.removeChild(t)}function s(t){return null!=t}function pt(t){t.preventDefault()}function i(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function ft(t,e,r){0<r&&(mt(t,e),setTimeout(function(){gt(t,e)},r))}function dt(t){return Math.max(Math.min(t,100),0)}function ht(t){return Array.isArray(t)?t:[t]}function e(t){var e=(t=String(t)).split(".");return 1<e.length?e[1].length:0}function mt(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function gt(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function vt(t){var e=void 0!==window.pageXOffset,r="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:r?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:r?t.documentElement.scrollTop:t.body.scrollTop}}function l(t,e){return 100/(e-t)}function u(t,e){return 100*e/(t[1]-t[0])}function c(t,e){for(var r=1;t>=e[r];)r+=1;return r}function r(t,e,r){if(r>=t.slice(-1)[0])return 100;var n=c(r,t),i=t[n-1],o=t[n],a=e[n-1],s=e[n];return a+function(t,e){return u(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}([i,o],r)/l(a,s)}function n(t,e,r,n){if(100===n)return n;var i=c(n,t),o=t[i-1],a=t[i];return r?(a-o)/2<n-o?a:o:e[i-1]?t[i-1]+function(t,e){return Math.round(t/e)*e}(n-t[i-1],e[i-1]):n}function o(t,e,r){var n;if("number"==typeof e&&(e=[e]),!Array.isArray(e))throw new Error("noUiSlider ("+ut+"): 'range' contains invalid value.");if(!i(n="min"===t?0:"max"===t?100:parseFloat(t))||!i(e[0]))throw new Error("noUiSlider ("+ut+"): 'range' value isn't numeric.");r.xPct.push(n),r.xVal.push(e[0]),n?r.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(r.xSteps[0]=e[1]),r.xHighestCompleteStep.push(0)}function a(t,e,r){if(e)if(r.xVal[t]!==r.xVal[t+1]){r.xSteps[t]=u([r.xVal[t],r.xVal[t+1]],e)/l(r.xPct[t],r.xPct[t+1]);var n=(r.xVal[t+1]-r.xVal[t])/r.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),o=r.xVal[t]+r.xNumSteps[t]*i;r.xHighestCompleteStep[t]=o}else r.xSteps[t]=r.xHighestCompleteStep[t]=r.xVal[t]}function p(t,e,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var i=[];for(n in t)t.hasOwnProperty(n)&&i.push([t[n],n]);for(i.length&&"object"==typeof i[0][0]?i.sort(function(t,e){return t[0][0]-e[0][0]}):i.sort(function(t,e){return t[0]-e[0]}),n=0;n<i.length;n++)o(i[n][1],i[n][0],this);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)a(n,this.xNumSteps[n],this)}p.prototype.getMargin=function(t){var e=this.xNumSteps[0];if(e&&t/e%1!=0)throw new Error("noUiSlider ("+ut+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&u(this.xVal,t)},p.prototype.toStepping=function(t){return t=r(this.xVal,this.xPct,t)},p.prototype.fromStepping=function(t){return function(t,e,r){if(100<=r)return t.slice(-1)[0];var n=c(r,e),i=t[n-1],o=t[n],a=e[n-1];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([i,o],(r-a)*l(a,e[n]))}(this.xVal,this.xPct,t)},p.prototype.getStep=function(t){return t=n(this.xPct,this.xSteps,this.snap,t)},p.prototype.getDefaultStep=function(t,e,r){var n=c(t,this.xPct);return(100===t||e&&t===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},p.prototype.getNearbySteps=function(t){var e=c(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},p.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(e);return Math.max.apply(null,t)},p.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var f={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function d(t){if(function(t){return"object"==typeof t&&"function"==typeof t.to&&"function"==typeof t.from}(t))return!0;throw new Error("noUiSlider ("+ut+"): 'format' requires 'to' and 'from' methods.")}function h(t,e){if(!i(e))throw new Error("noUiSlider ("+ut+"): 'step' is not numeric.");t.singleStep=e}function m(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider ("+ut+"): 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider ("+ut+"): Missing 'min' or 'max' in 'range'.");if(e.min===e.max)throw new Error("noUiSlider ("+ut+"): 'range' 'min' and 'max' cannot be equal.");t.spectrum=new p(e,t.snap,t.singleStep)}function g(t,e){if(e=ht(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider ("+ut+"): 'start' option is incorrect.");t.handles=e.length,t.start=e}function v(t,e){if("boolean"!=typeof(t.snap=e))throw new Error("noUiSlider ("+ut+"): 'snap' option must be a boolean.")}function b(t,e){if("boolean"!=typeof(t.animate=e))throw new Error("noUiSlider ("+ut+"): 'animate' option must be a boolean.")}function S(t,e){if("number"!=typeof(t.animationDuration=e))throw new Error("noUiSlider ("+ut+"): 'animationDuration' option must be a number.")}function x(t,e){var r,n=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(r=1;r<t.handles;r++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider ("+ut+"): 'connect' option doesn't match handle count.");n=e}t.connect=n}function w(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider ("+ut+"): 'orientation' option is invalid.")}}function y(t,e){if(!i(e))throw new Error("noUiSlider ("+ut+"): 'margin' option must be numeric.");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error("noUiSlider ("+ut+"): 'margin' option is only supported on linear sliders.")}function E(t,e){if(!i(e))throw new Error("noUiSlider ("+ut+"): 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit||t.handles<2)throw new Error("noUiSlider ("+ut+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function C(t,e){if(!i(e)&&!Array.isArray(e))throw new Error("noUiSlider ("+ut+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!i(e[0])&&!i(e[1]))throw new Error("noUiSlider ("+ut+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){if(Array.isArray(e)||(e=[e,e]),!(t.padding=[t.spectrum.getMargin(e[0]),t.spectrum.getMargin(e[1])])===t.padding[0]||!1===t.padding[1])throw new Error("noUiSlider ("+ut+"): 'padding' option is only supported on linear sliders.");if(t.padding[0]<0||t.padding[1]<0)throw new Error("noUiSlider ("+ut+"): 'padding' option must be a positive number(s).");if(100<t.padding[0]+t.padding[1])throw new Error("noUiSlider ("+ut+"): 'padding' option must not exceed 100% of the range.")}}function N(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider ("+ut+"): 'direction' option was not recognized.")}}function U(t,e){if("string"!=typeof e)throw new Error("noUiSlider ("+ut+"): 'behaviour' must be a string containing options.");var r=0<=e.indexOf("tap"),n=0<=e.indexOf("drag"),i=0<=e.indexOf("fixed"),o=0<=e.indexOf("snap"),a=0<=e.indexOf("hover"),s=0<=e.indexOf("unconstrained");if(i){if(2!==t.handles)throw new Error("noUiSlider ("+ut+"): 'fixed' behaviour must be used with 2 handles");y(t,t.start[1]-t.start[0])}if(s&&(t.margin||t.limit))throw new Error("noUiSlider ("+ut+"): 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:r||o,drag:n,fixed:i,snap:o,hover:a,unconstrained:s}}function k(t,e){if(!1!==e)if(!0===e){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(!0)}else{if(t.tooltips=ht(e),t.tooltips.length!==t.handles)throw new Error("noUiSlider ("+ut+"): must pass a formatter for all handles.");t.tooltips.forEach(function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider ("+ut+"): 'tooltips' must be passed a formatter or 'false'.")})}}function P(t,e){d(t.ariaFormat=e)}function A(t,e){d(t.format=e)}function V(t,e){if("boolean"!=typeof(t.keyboardSupport=e))throw new Error("noUiSlider ("+ut+"): 'keyboardSupport' option must be a boolean.")}function M(t,e){t.documentElement=e}function O(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider ("+ut+"): 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function L(t,e){if("object"!=typeof e)throw new Error("noUiSlider ("+ut+"): 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix)for(var r in t.cssClasses={},e)e.hasOwnProperty(r)&&(t.cssClasses[r]=t.cssPrefix+e[r]);else t.cssClasses=e}function bt(e){var r={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:f,format:f},n={step:{r:!1,t:h},start:{r:!0,t:g},connect:{r:!0,t:x},direction:{r:!0,t:N},snap:{r:!1,t:v},animate:{r:!1,t:b},animationDuration:{r:!1,t:S},range:{r:!0,t:m},orientation:{r:!1,t:w},margin:{r:!1,t:y},limit:{r:!1,t:E},padding:{r:!1,t:C},behaviour:{r:!0,t:U},ariaFormat:{r:!1,t:P},format:{r:!1,t:A},tooltips:{r:!1,t:k},keyboardSupport:{r:!0,t:V},documentElement:{r:!1,t:M},cssPrefix:{r:!0,t:O},cssClasses:{r:!0,t:L}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(n).forEach(function(t){if(!s(e[t])&&void 0===i[t]){if(n[t].r)throw new Error("noUiSlider ("+ut+"): '"+t+"' is required.");return!0}n[t].t(r,s(e[t])?e[t]:i[t])}),r.pips=e.pips;var t=document.createElement("div"),o=void 0!==t.style.msTransform,a=void 0!==t.style.transform;r.transformRule=a?"transform":o?"msTransform":"webkitTransform";return r.style=[["left","top"],["right","bottom"]][r.dir][r.ort],r}function z(t,f,o){var r,l,a,s,i,u,c,e,p=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},d=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),h=t,y=f.spectrum,m=[],g=[],v=[],b=0,S={},x=t.ownerDocument,w=f.documentElement||x.documentElement,E=x.body,C=-1,N=0,U=1,k=2,P="rtl"===x.dir||1===f.ort?0:100;function A(t,e){var r=x.createElement("div");return e&&mt(r,e),t.appendChild(r),r}function V(t,e){var r=A(t,f.cssClasses.origin),n=A(r,f.cssClasses.handle);return A(n,f.cssClasses.touchArea),n.setAttribute("data-handle",e),f.keyboardSupport&&(n.setAttribute("tabindex","0"),n.addEventListener("keydown",function(t){return function(t,e){if(O()||L(e))return!1;var r=["Left","Right"],n=["Down","Up"];f.dir&&!f.ort?r.reverse():f.ort&&!f.dir&&n.reverse();var i=t.key.replace("Arrow",""),o=i===n[0]||i===r[0],a=i===n[1]||i===r[1];if(!o&&!a)return!0;t.preventDefault();var s=o?0:1,l=lt(e)[s];if(null===l)return!1;!1===l&&(l=y.getDefaultStep(g[e],o,10));return l=Math.max(l,1e-7),l*=o?-1:1,at(e,m[e]+l,!0),!1}(t,e)})),n.setAttribute("role","slider"),n.setAttribute("aria-orientation",f.ort?"vertical":"horizontal"),0===e?mt(n,f.cssClasses.handleLower):e===f.handles-1&&mt(n,f.cssClasses.handleUpper),r}function M(t,e){return!!e&&A(t,f.cssClasses.connect)}function n(t,e){return!!f.tooltips[e]&&A(t.firstChild,f.cssClasses.tooltip)}function O(){return h.hasAttribute("disabled")}function L(t){return l[t].hasAttribute("disabled")}function z(){i&&(G("update.tooltips"),i.forEach(function(t){t&&ct(t)}),i=null)}function j(){z(),i=l.map(n),$("update.tooltips",function(t,e,r){if(i[e]){var n=t[e];!0!==f.tooltips[e]&&(n=f.tooltips[e].to(r[e])),i[e].innerHTML=n}})}function H(e,i,o){var a=x.createElement("div"),s=[];s[N]=f.cssClasses.valueNormal,s[U]=f.cssClasses.valueLarge,s[k]=f.cssClasses.valueSub;var l=[];l[N]=f.cssClasses.markerNormal,l[U]=f.cssClasses.markerLarge,l[k]=f.cssClasses.markerSub;var u=[f.cssClasses.valueHorizontal,f.cssClasses.valueVertical],c=[f.cssClasses.markerHorizontal,f.cssClasses.markerVertical];function p(t,e){var r=e===f.cssClasses.value,n=r?s:l;return e+" "+(r?u:c)[f.ort]+" "+n[t]}return mt(a,f.cssClasses.pips),mt(a,0===f.ort?f.cssClasses.pipsHorizontal:f.cssClasses.pipsVertical),Object.keys(e).forEach(function(t){!function(t,e,r){if((r=i?i(e,r):r)!==C){var n=A(a,!1);n.className=p(r,f.cssClasses.marker),n.style[f.style]=t+"%",N<r&&((n=A(a,!1)).className=p(r,f.cssClasses.value),n.setAttribute("data-value",e),n.style[f.style]=t+"%",n.innerHTML=o.to(e))}}(t,e[t][0],e[t][1])}),a}function F(){s&&(ct(s),s=null)}function D(t){F();var e=t.mode,r=t.density||1,n=t.filter||!1,i=function(m,g,v){var b={},t=y.xVal[0],e=y.xVal[y.xVal.length-1],S=!1,x=!1,w=0;return(v=function(t){return t.filter(function(t){return!this[t]&&(this[t]=!0)},{})}(v.slice().sort(function(t,e){return t-e})))[0]!==t&&(v.unshift(t),S=!0),v[v.length-1]!==e&&(v.push(e),x=!0),v.forEach(function(t,e){var r,n,i,o,a,s,l,u,c,p,f=t,d=v[e+1],h="steps"===g;if(h&&(r=y.xNumSteps[e]),r=r||d-f,!1!==f&&void 0!==d)for(r=Math.max(r,1e-7),n=f;n<=d;n=(n+r).toFixed(7)/1){for(u=(a=(o=y.toStepping(n))-w)/m,p=a/(c=Math.round(u)),i=1;i<=c;i+=1)b[(s=w+i*p).toFixed(5)]=[y.fromStepping(s),0];l=-1<v.indexOf(n)?U:h?k:N,!e&&S&&(l=0),n===d&&x||(b[o.toFixed(5)]=[n,l]),w=o}}),b}(r,e,function(t,e,r){if("range"===t||"steps"===t)return y.xVal;if("count"===t){if(e<2)throw new Error("noUiSlider ("+ut+"): 'values' (>= 2) required for mode 'count'.");var n=e-1,i=100/n;for(e=[];n--;)e[n]=n*i;e.push(100),t="positions"}return"positions"===t?e.map(function(t){return y.fromStepping(r?y.getStep(t):t)}):"values"===t?r?e.map(function(t){return y.fromStepping(y.getStep(y.toStepping(t)))}):e:void 0}(e,t.values||!1,t.stepped||!1)),o=t.format||{to:Math.round};return s=h.appendChild(H(i,n,o))}function T(){var t=r.getBoundingClientRect(),e="offset"+["Width","Height"][f.ort];return 0===f.ort?t.width||r[e]:t.height||r[e]}function R(e,r,n,i){function o(t){return!!(t=function(t,e,r){var n,i,o=0===t.type.indexOf("touch"),a=0===t.type.indexOf("mouse"),s=0===t.type.indexOf("pointer");0===t.type.indexOf("MSPointer")&&(s=!0);if(o){var l=function(t){return t.target===r||r.contains(t.target)};if("touchstart"===t.type){var u=Array.prototype.filter.call(t.touches,l);if(1<u.length)return!1;n=u[0].pageX,i=u[0].pageY}else{var c=Array.prototype.find.call(t.changedTouches,l);if(!c)return!1;n=c.pageX,i=c.pageY}}e=e||vt(x),(a||s)&&(n=t.clientX+e.x,i=t.clientY+e.y);return t.pageOffset=e,t.points=[n,i],t.cursor=a||s,t}(t,i.pageOffset,i.target||r))&&(!(O()&&!i.doNotReject)&&(!(function(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}(h,f.cssClasses.tap)&&!i.doNotReject)&&(!(e===p.start&&void 0!==t.buttons&&1<t.buttons)&&((!i.hover||!t.buttons)&&(d||t.preventDefault(),t.calcPoint=t.points[f.ort],void n(t,i))))))}var a=[];return e.split(" ").forEach(function(t){r.addEventListener(t,o,!!d&&{passive:!0}),a.push([t,o])}),a}function B(t){var e=100*(t-function(t,e){var r=t.getBoundingClientRect(),n=t.ownerDocument,i=n.documentElement,o=vt(n);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(o.x=0),e?r.top+o.y-i.clientTop:r.left+o.x-i.clientLeft}(r,f.ort))/T();return e=dt(e),f.dir?100-e:e}function q(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&Y(t,e)}function X(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return Y(t,e);var r=(f.dir?-1:1)*(t.calcPoint-e.startCalcPoint);Z(0<r,100*r/e.baseSize,e.locations,e.handleNumbers)}function Y(t,e){e.handle&&(gt(e.handle,f.cssClasses.active),b-=1),e.listeners.forEach(function(t){w.removeEventListener(t[0],t[1])}),0===b&&(gt(h,f.cssClasses.drag),et(),t.cursor&&(E.style.cursor="",E.removeEventListener("selectstart",pt))),e.handleNumbers.forEach(function(t){J("change",t),J("set",t),J("end",t)})}function _(t,e){if(e.handleNumbers.some(L))return!1;var r;1===e.handleNumbers.length&&(r=l[e.handleNumbers[0]].children[0],b+=1,mt(r,f.cssClasses.active));t.stopPropagation();var n=[],i=R(p.move,w,X,{target:t.target,handle:r,listeners:n,startCalcPoint:t.calcPoint,baseSize:T(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:g.slice()}),o=R(p.end,w,Y,{target:t.target,handle:r,listeners:n,doNotReject:!0,handleNumbers:e.handleNumbers}),a=R("mouseout",w,q,{target:t.target,handle:r,listeners:n,doNotReject:!0,handleNumbers:e.handleNumbers});n.push.apply(n,i.concat(o,a)),t.cursor&&(E.style.cursor=getComputedStyle(t.target).cursor,1<l.length&&mt(h,f.cssClasses.drag),E.addEventListener("selectstart",pt,!1)),e.handleNumbers.forEach(function(t){J("start",t)})}function I(t){t.stopPropagation();var e=B(t.calcPoint),r=function(n){var i=100,o=!1;return l.forEach(function(t,e){if(!L(e)){var r=Math.abs(g[e]-n);(r<i||100===r&&100===i)&&(o=e,i=r)}}),o}(e);if(!1===r)return!1;f.events.snap||ft(h,f.cssClasses.tap,f.animationDuration),rt(r,e,!0,!0),et(),J("slide",r,!0),J("update",r,!0),J("change",r,!0),J("set",r,!0),f.events.snap&&_(t,{handleNumbers:[r]})}function W(t){var e=B(t.calcPoint),r=y.getStep(e),n=y.fromStepping(r);Object.keys(S).forEach(function(t){"hover"===t.split(".")[0]&&S[t].forEach(function(t){t.call(u,n)})})}function $(t,e){S[t]=S[t]||[],S[t].push(e),"update"===t.split(".")[0]&&l.forEach(function(t,e){J("update",e)})}function G(t){var n=t&&t.split(".")[0],i=n&&t.substring(n.length);Object.keys(S).forEach(function(t){var e=t.split(".")[0],r=t.substring(e.length);n&&n!==e||i&&i!==r||delete S[t]})}function J(r,n,i){Object.keys(S).forEach(function(t){var e=t.split(".")[0];r===e&&S[t].forEach(function(t){t.call(u,m.map(f.format.to),n,m.slice(),i||!1,g.slice())})})}function K(t,e,r,n,i,o){return 1<l.length&&!f.events.unconstrained&&(n&&0<e&&(r=Math.max(r,t[e-1]+f.margin)),i&&e<l.length-1&&(r=Math.min(r,t[e+1]-f.margin))),1<l.length&&f.limit&&(n&&0<e&&(r=Math.min(r,t[e-1]+f.limit)),i&&e<l.length-1&&(r=Math.max(r,t[e+1]-f.limit))),f.padding&&(0===e&&(r=Math.max(r,f.padding[0])),e===l.length-1&&(r=Math.min(r,100-f.padding[1]))),!((r=dt(r=y.getStep(r)))===t[e]&&!o)&&r}function Q(t,e){var r=f.ort;return(r?e:t)+", "+(r?t:e)}function Z(t,n,r,e){var i=r.slice(),o=[!t,t],a=[t,!t];e=e.slice(),t&&e.reverse(),1<e.length?e.forEach(function(t,e){var r=K(i,t,i[t]+n,o[e],a[e],!1);!1===r?n=0:(n=r-i[t],i[t]=r)}):o=a=[!0];var s=!1;e.forEach(function(t,e){s=rt(t,r[t]+n,o[e],a[e])||s}),s&&e.forEach(function(t){J("update",t),J("slide",t)})}function tt(t,e){return f.dir?100-t-e:t}function et(){v.forEach(function(t){var e=50<g[t]?-1:1,r=3+(l.length+e*t);l[t].style.zIndex=r})}function rt(t,e,r,n){return!1!==(e=K(g,t,e,r,n,!1))&&(function(t,e){g[t]=e,m[t]=y.fromStepping(e);var r="translate("+Q(tt(e,0)-P+"%","0")+")";l[t].style[f.transformRule]=r,nt(t),nt(t+1)}(t,e),!0)}function nt(t){if(a[t]){var e=0,r=100;0!==t&&(e=g[t-1]),t!==a.length-1&&(r=g[t]);var n=r-e,i="translate("+Q(tt(e,n)+"%","0")+")",o="scale("+Q(n/100,"1")+")";a[t].style[f.transformRule]=i+" "+o}}function it(t,e){return null===t||!1===t||void 0===t?g[e]:("number"==typeof t&&(t=String(t)),t=f.format.from(t),!1===(t=y.toStepping(t))||isNaN(t)?g[e]:t)}function ot(t,e){var r=ht(t),n=void 0===g[0];e=void 0===e||!!e,f.animate&&!n&&ft(h,f.cssClasses.tap,f.animationDuration),v.forEach(function(t){rt(t,it(r[t],t),!0,!1)}),v.forEach(function(t){rt(t,g[t],!0,!0)}),et(),v.forEach(function(t){J("update",t),null!==r[t]&&e&&J("set",t)})}function at(t,e,r){if(!(0<=(t=Number(t))&&t<v.length))throw new Error("noUiSlider ("+ut+"): invalid handle number, got: "+t);rt(t,it(e,t),!0,!0),J("update",t),r&&J("set",t)}function st(){var t=m.map(f.format.to);return 1===t.length?t[0]:t}function lt(t){var e=g[t],r=y.getNearbySteps(e),n=m[t],i=r.thisStep.step,o=null;if(f.snap)return[n-r.stepBefore.startValue||null,r.stepAfter.startValue-n||null];!1!==i&&n+i>r.stepAfter.startValue&&(i=r.stepAfter.startValue-n),o=n>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&n-r.stepBefore.highestStep,100===e?i=null:0===e&&(o=null);var a=y.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(a))),null!==o&&!1!==o&&(o=Number(o.toFixed(a))),[o,i]}return mt(e=h,f.cssClasses.target),0===f.dir?mt(e,f.cssClasses.ltr):mt(e,f.cssClasses.rtl),0===f.ort?mt(e,f.cssClasses.horizontal):mt(e,f.cssClasses.vertical),r=A(e,f.cssClasses.base),function(t,e){var r=A(e,f.cssClasses.connects);l=[],(a=[]).push(M(r,t[0]));for(var n=0;n<f.handles;n++)l.push(V(e,n)),v[n]=n,a.push(M(r,t[n+1]))}(f.connect,r),(c=f.events).fixed||l.forEach(function(t,e){R(p.start,t.children[0],_,{handleNumbers:[e]})}),c.tap&&R(p.start,r,I,{}),c.hover&&R(p.move,r,W,{hover:!0}),c.drag&&a.forEach(function(t,e){if(!1!==t&&0!==e&&e!==a.length-1){var r=l[e-1],n=l[e],i=[t];mt(t,f.cssClasses.draggable),c.fixed&&(i.push(r.children[0]),i.push(n.children[0])),i.forEach(function(t){R(p.start,t,_,{handles:[r,n],handleNumbers:[e-1,e]})})}}),ot(f.start),f.pips&&D(f.pips),f.tooltips&&j(),$("update",function(t,e,a,r,s){v.forEach(function(t){var e=l[t],r=K(g,t,0,!0,!0,!0),n=K(g,t,100,!0,!0,!0),i=s[t],o=f.ariaFormat.to(a[t]);r=y.fromStepping(r).toFixed(1),n=y.fromStepping(n).toFixed(1),i=y.fromStepping(i).toFixed(1),e.children[0].setAttribute("aria-valuemin",r),e.children[0].setAttribute("aria-valuemax",n),e.children[0].setAttribute("aria-valuenow",i),e.children[0].setAttribute("aria-valuetext",o)})}),u={destroy:function(){for(var t in f.cssClasses)f.cssClasses.hasOwnProperty(t)&&gt(h,f.cssClasses[t]);for(;h.firstChild;)h.removeChild(h.firstChild);delete h.noUiSlider},steps:function(){return v.map(lt)},on:$,off:G,get:st,set:ot,setHandle:at,reset:function(t){ot(f.start,t)},__moveHandles:function(t,e,r){Z(t,e,g,r)},options:o,updateOptions:function(e,t){var r=st(),n=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];n.forEach(function(t){void 0!==e[t]&&(o[t]=e[t])});var i=bt(o);n.forEach(function(t){void 0!==e[t]&&(f[t]=i[t])}),y=i.spectrum,f.margin=i.margin,f.limit=i.limit,f.padding=i.padding,f.pips?D(f.pips):F(),f.tooltips?j():z(),g=[],ot(e.start||r,t)},target:h,removePips:F,removeTooltips:z,pips:D}}return{__spectrum:p,version:ut,create:function(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider ("+ut+"): create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider ("+ut+"): Slider was already initialized.");var r=z(t,bt(e),e);return t.noUiSlider=r}}});var tooltipSlider=document.getElementById("slider-tooltips");noUiSlider.create(tooltipSlider,{start:[0,5e3],step:100,connect:!0,tooltips:[!0,!0],range:{min:0,max:1e4},format:{to:function(t){return t},from:function(t){return t.replace(",-"," ")}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJleHBvcnRzIiwibW9kdWxlIiwid2luZG93Iiwibm9VaVNsaWRlciIsIlZFUlNJT04iLCJyZW1vdmVFbGVtZW50IiwiZWwiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJpc1NldCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJlIiwiaXNOdW1lcmljIiwiYSIsImlzTmFOIiwiaXNGaW5pdGUiLCJhZGRDbGFzc0ZvciIsImVsZW1lbnQiLCJjbGFzc05hbWUiLCJkdXJhdGlvbiIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInJlbW92ZUNsYXNzIiwibGltaXQiLCJNYXRoIiwibWF4IiwibWluIiwiYXNBcnJheSIsIkFycmF5IiwiaXNBcnJheSIsImNvdW50RGVjaW1hbHMiLCJudW1TdHIiLCJwaWVjZXMiLCJTdHJpbmciLCJzcGxpdCIsImxlbmd0aCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInJlcGxhY2UiLCJSZWdFeHAiLCJqb2luIiwiZ2V0UGFnZU9mZnNldCIsImRvYyIsInN1cHBvcnRQYWdlT2Zmc2V0IiwidW5kZWZpbmVkIiwicGFnZVhPZmZzZXQiLCJpc0NTUzFDb21wYXQiLCJjb21wYXRNb2RlIiwieCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbExlZnQiLCJib2R5IiwieSIsInBhZ2VZT2Zmc2V0Iiwic2Nyb2xsVG9wIiwic3ViUmFuZ2VSYXRpbyIsInBhIiwicGIiLCJmcm9tUGVyY2VudGFnZSIsInJhbmdlIiwiZ2V0SiIsImFyciIsImoiLCJ0b1N0ZXBwaW5nIiwieFZhbCIsInhQY3QiLCJzbGljZSIsInZhIiwidmIiLCJhYnMiLCJ0b1BlcmNlbnRhZ2UiLCJnZXRTdGVwIiwieFN0ZXBzIiwic25hcCIsImIiLCJ0byIsInJvdW5kIiwiY2xvc2VzdCIsImhhbmRsZUVudHJ5UG9pbnQiLCJpbmRleCIsInRoYXQiLCJwZXJjZW50YWdlIiwiRXJyb3IiLCJwYXJzZUZsb2F0IiwicHVzaCIsInhIaWdoZXN0Q29tcGxldGVTdGVwIiwiaGFuZGxlU3RlcFBvaW50IiwiaSIsIm4iLCJ0b3RhbFN0ZXBzIiwieE51bVN0ZXBzIiwiaGlnaGVzdFN0ZXAiLCJjZWlsIiwiTnVtYmVyIiwidG9GaXhlZCIsInN0ZXAiLCJTcGVjdHJ1bSIsImVudHJ5Iiwic2luZ2xlU3RlcCIsInRoaXMiLCJvcmRlcmVkIiwiaGFzT3duUHJvcGVydHkiLCJzb3J0IiwicHJvdG90eXBlIiwiZ2V0TWFyZ2luIiwiZnJvbVN0ZXBwaW5nIiwiaXNQZXJjZW50YWdlIiwiZ2V0RGVmYXVsdFN0ZXAiLCJpc0Rvd24iLCJzaXplIiwiZ2V0TmVhcmJ5U3RlcHMiLCJzdGVwQmVmb3JlIiwic3RhcnRWYWx1ZSIsInRoaXNTdGVwIiwic3RlcEFmdGVyIiwiY291bnRTdGVwRGVjaW1hbHMiLCJzdGVwRGVjaW1hbHMiLCJtYXAiLCJhcHBseSIsImNvbnZlcnQiLCJkZWZhdWx0Rm9ybWF0dGVyIiwiZnJvbSIsInZhbGlkYXRlRm9ybWF0IiwiaXNWYWxpZEZvcm1hdHRlciIsInRlc3RTdGVwIiwicGFyc2VkIiwidGVzdFJhbmdlIiwic3BlY3RydW0iLCJ0ZXN0U3RhcnQiLCJoYW5kbGVzIiwic3RhcnQiLCJ0ZXN0U25hcCIsInRlc3RBbmltYXRlIiwiYW5pbWF0ZSIsInRlc3RBbmltYXRpb25EdXJhdGlvbiIsImFuaW1hdGlvbkR1cmF0aW9uIiwidGVzdENvbm5lY3QiLCJjb25uZWN0IiwidGVzdE9yaWVudGF0aW9uIiwib3J0IiwidGVzdE1hcmdpbiIsIm1hcmdpbiIsInRlc3RMaW1pdCIsInRlc3RQYWRkaW5nIiwicGFkZGluZyIsInRlc3REaXJlY3Rpb24iLCJkaXIiLCJ0ZXN0QmVoYXZpb3VyIiwidGFwIiwiaW5kZXhPZiIsImRyYWciLCJmaXhlZCIsImhvdmVyIiwidW5jb25zdHJhaW5lZCIsImV2ZW50cyIsInRlc3RUb29sdGlwcyIsInRvb2x0aXBzIiwiZm9yRWFjaCIsImZvcm1hdHRlciIsInRlc3RBcmlhRm9ybWF0IiwiYXJpYUZvcm1hdCIsInRlc3RGb3JtYXQiLCJmb3JtYXQiLCJ0ZXN0S2V5Ym9hcmRTdXBwb3J0Iiwia2V5Ym9hcmRTdXBwb3J0IiwidGVzdERvY3VtZW50RWxlbWVudCIsInRlc3RDc3NQcmVmaXgiLCJjc3NQcmVmaXgiLCJ0ZXN0Q3NzQ2xhc3NlcyIsImtleSIsImNzc0NsYXNzZXMiLCJ0ZXN0T3B0aW9ucyIsIm9wdGlvbnMiLCJ0ZXN0cyIsInIiLCJ0IiwiZGlyZWN0aW9uIiwib3JpZW50YXRpb24iLCJiZWhhdmlvdXIiLCJkZWZhdWx0cyIsInRhcmdldCIsImJhc2UiLCJvcmlnaW4iLCJoYW5kbGUiLCJoYW5kbGVMb3dlciIsImhhbmRsZVVwcGVyIiwidG91Y2hBcmVhIiwiaG9yaXpvbnRhbCIsInZlcnRpY2FsIiwiYmFja2dyb3VuZCIsImNvbm5lY3RzIiwibHRyIiwicnRsIiwiZHJhZ2dhYmxlIiwiYWN0aXZlIiwidG9vbHRpcCIsInBpcHMiLCJwaXBzSG9yaXpvbnRhbCIsInBpcHNWZXJ0aWNhbCIsIm1hcmtlciIsIm1hcmtlckhvcml6b250YWwiLCJtYXJrZXJWZXJ0aWNhbCIsIm1hcmtlck5vcm1hbCIsIm1hcmtlckxhcmdlIiwibWFya2VyU3ViIiwidmFsdWVIb3Jpem9udGFsIiwidmFsdWVWZXJ0aWNhbCIsInZhbHVlTm9ybWFsIiwidmFsdWVMYXJnZSIsInZhbHVlU3ViIiwiT2JqZWN0Iiwia2V5cyIsIm5hbWUiLCJkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwibXNQcmVmaXgiLCJzdHlsZSIsIm1zVHJhbnNmb3JtIiwibm9QcmVmaXgiLCJ0cmFuc2Zvcm0iLCJ0cmFuc2Zvcm1SdWxlIiwic2NvcGUiLCJvcmlnaW5hbE9wdGlvbnMiLCJzY29wZV9CYXNlIiwic2NvcGVfSGFuZGxlcyIsInNjb3BlX0Nvbm5lY3RzIiwic2NvcGVfUGlwcyIsInNjb3BlX1Rvb2x0aXBzIiwic2NvcGVfU2VsZiIsImFkZFRhcmdldCIsImFjdGlvbnMiLCJuYXZpZ2F0b3IiLCJwb2ludGVyRW5hYmxlZCIsIm1vdmUiLCJlbmQiLCJtc1BvaW50ZXJFbmFibGVkIiwic3VwcG9ydHNQYXNzaXZlIiwiQ1NTIiwic3VwcG9ydHMiLCJvcHRzIiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0U3VwcG9ydHNQYXNzaXZlIiwic2NvcGVfVGFyZ2V0Iiwic2NvcGVfU3BlY3RydW0iLCJzY29wZV9WYWx1ZXMiLCJzY29wZV9Mb2NhdGlvbnMiLCJzY29wZV9IYW5kbGVOdW1iZXJzIiwic2NvcGVfQWN0aXZlSGFuZGxlc0NvdW50Iiwic2NvcGVfRXZlbnRzIiwic2NvcGVfRG9jdW1lbnQiLCJvd25lckRvY3VtZW50Iiwic2NvcGVfRG9jdW1lbnRFbGVtZW50Iiwic2NvcGVfQm9keSIsIlBJUFNfTk9ORSIsIlBJUFNfTk9fVkFMVUUiLCJQSVBTX0xBUkdFX1ZBTFVFIiwiUElQU19TTUFMTF9WQUxVRSIsInNjb3BlX0Rpck9mZnNldCIsImFkZE5vZGVUbyIsImRpdiIsImFwcGVuZENoaWxkIiwiYWRkT3JpZ2luIiwiaGFuZGxlTnVtYmVyIiwic2V0QXR0cmlidXRlIiwiZXZlbnQiLCJpc1NsaWRlckRpc2FibGVkIiwiaXNIYW5kbGVEaXNhYmxlZCIsImhvcml6b250YWxLZXlzIiwidmVydGljYWxLZXlzIiwicmV2ZXJzZSIsImlzVXAiLCJnZXROZXh0U3RlcHNGb3JIYW5kbGUiLCJ2YWx1ZVNldEhhbmRsZSIsImV2ZW50S2V5ZG93biIsImFkZENvbm5lY3QiLCJhZGRUb29sdGlwIiwiZmlyc3RDaGlsZCIsImhhc0F0dHJpYnV0ZSIsInJlbW92ZVRvb2x0aXBzIiwicmVtb3ZlRXZlbnQiLCJiaW5kRXZlbnQiLCJ2YWx1ZXMiLCJ1bmVuY29kZWQiLCJmb3JtYXR0ZWRWYWx1ZSIsImlubmVySFRNTCIsImFkZE1hcmtpbmciLCJzcHJlYWQiLCJmaWx0ZXJGdW5jIiwidmFsdWVTaXplQ2xhc3NlcyIsIm1hcmtlclNpemVDbGFzc2VzIiwidmFsdWVPcmllbnRhdGlvbkNsYXNzZXMiLCJtYXJrZXJPcmllbnRhdGlvbkNsYXNzZXMiLCJnZXRDbGFzc2VzIiwidHlwZSIsInNvdXJjZSIsInNpemVDbGFzc2VzIiwib2Zmc2V0Iiwibm9kZSIsImFkZFNwcmVhZCIsInJlbW92ZVBpcHMiLCJncmlkIiwibW9kZSIsImRlbnNpdHkiLCJmaWx0ZXIiLCJncm91cCIsImluZGV4ZXMiLCJmaXJzdEluUmFuZ2UiLCJsYXN0SW5SYW5nZSIsImlnbm9yZUZpcnN0IiwiaWdub3JlTGFzdCIsInByZXZQY3QiLCJhcnJheSIsInVuaXF1ZSIsInVuc2hpZnQiLCJjdXJyZW50IiwicSIsIm5ld1BjdCIsInBjdERpZmZlcmVuY2UiLCJwY3RQb3MiLCJzdGVwcyIsInJlYWxTdGVwcyIsInN0ZXBTaXplIiwibG93IiwiaGlnaCIsImlzU3RlcHMiLCJnZW5lcmF0ZVNwcmVhZCIsInN0ZXBwZWQiLCJpbnRlcnZhbCIsImdldEdyb3VwIiwiYmFzZVNpemUiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYWx0Iiwid2lkdGgiLCJoZWlnaHQiLCJhdHRhY2hFdmVudCIsImNhbGxiYWNrIiwiZGF0YSIsIm1ldGhvZCIsInBhZ2VPZmZzZXQiLCJldmVudFRhcmdldCIsInRvdWNoIiwibW91c2UiLCJwb2ludGVyIiwiaXNUb3VjaE9uVGFyZ2V0IiwiY2hlY2tUb3VjaCIsImNvbnRhaW5zIiwidGFyZ2V0VG91Y2hlcyIsImNhbGwiLCJ0b3VjaGVzIiwicGFnZVgiLCJwYWdlWSIsInRhcmdldFRvdWNoIiwiZmluZCIsImNoYW5nZWRUb3VjaGVzIiwiY2xpZW50WCIsImNsaWVudFkiLCJwb2ludHMiLCJjdXJzb3IiLCJmaXhFdmVudCIsImRvTm90UmVqZWN0IiwidGVzdCIsImhhc0NsYXNzIiwiYnV0dG9ucyIsImNhbGNQb2ludCIsIm1ldGhvZHMiLCJldmVudE5hbWUiLCJwYXNzaXZlIiwiY2FsY1BvaW50VG9QZXJjZW50YWdlIiwicHJvcG9zYWwiLCJlbGVtIiwiZG9jRWxlbSIsInVzZXJBZ2VudCIsInRvcCIsImNsaWVudFRvcCIsImxlZnQiLCJjbGllbnRMZWZ0IiwiZG9jdW1lbnRMZWF2ZSIsIm5vZGVOYW1lIiwicmVsYXRlZFRhcmdldCIsImV2ZW50RW5kIiwiZXZlbnRNb3ZlIiwiYXBwVmVyc2lvbiIsImJ1dHRvbnNQcm9wZXJ0eSIsIm1vdmVtZW50Iiwic3RhcnRDYWxjUG9pbnQiLCJtb3ZlSGFuZGxlcyIsImxvY2F0aW9ucyIsImhhbmRsZU51bWJlcnMiLCJsaXN0ZW5lcnMiLCJjIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldFppbmRleCIsImZpcmVFdmVudCIsImV2ZW50U3RhcnQiLCJzb21lIiwiY2hpbGRyZW4iLCJzdG9wUHJvcGFnYXRpb24iLCJtb3ZlRXZlbnQiLCJlbmRFdmVudCIsIm91dEV2ZW50IiwiY29uY2F0IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImV2ZW50VGFwIiwicG9zIiwiZ2V0Q2xvc2VzdEhhbmRsZSIsInNldEhhbmRsZSIsImV2ZW50SG92ZXIiLCJ0YXJnZXRFdmVudCIsIm5hbWVzcGFjZWRFdmVudCIsIm5hbWVzcGFjZSIsInN1YnN0cmluZyIsImJpbmQiLCJ0RXZlbnQiLCJ0TmFtZXNwYWNlIiwiZXZlbnRUeXBlIiwiY2hlY2tIYW5kbGVQb3NpdGlvbiIsInJlZmVyZW5jZSIsImxvb2tCYWNrd2FyZCIsImxvb2tGb3J3YXJkIiwiZ2V0VmFsdWUiLCJpblJ1bGVPcmRlciIsInYiLCJvIiwidXB3YXJkIiwicHJvcG9zYWxzIiwiZiIsInN0YXRlIiwidHJhbnNmb3JtRGlyZWN0aW9uIiwiekluZGV4IiwicnVsZSIsInVwZGF0ZUNvbm5lY3QiLCJ1cGRhdGVIYW5kbGVQb3NpdGlvbiIsImwiLCJoIiwiY29ubmVjdFdpZHRoIiwidHJhbnNsYXRlUnVsZSIsInNjYWxlUnVsZSIsInJlc29sdmVUb1ZhbHVlIiwidmFsdWVTZXQiLCJpbnB1dCIsImZpcmVTZXRFdmVudCIsImlzSW5pdCIsInZhbHVlR2V0IiwibG9jYXRpb24iLCJuZWFyYnlTdGVwcyIsImluY3JlbWVudCIsImRlY3JlbWVudCIsImNvbm5lY3RPcHRpb25zIiwiY29ubmVjdEJhc2UiLCJhZGRFbGVtZW50cyIsImhhbmRsZUJlZm9yZSIsImhhbmRsZUFmdGVyIiwiZXZlbnRIb2xkZXJzIiwiZXZlbnRIb2xkZXIiLCJwb3NpdGlvbnMiLCJub3ciLCJ0ZXh0IiwiZGVzdHJveSIsIm9uIiwib2ZmIiwic2V0IiwicmVzZXQiLCJfX21vdmVIYW5kbGVzIiwidXBkYXRlT3B0aW9ucyIsIm9wdGlvbnNUb1VwZGF0ZSIsInVwZGF0ZUFibGUiLCJuZXdPcHRpb25zIiwiX19zcGVjdHJ1bSIsInZlcnNpb24iLCJjcmVhdGUiLCJhcGkiLCJ0b29sdGlwU2xpZGVyIiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJDQUNBLFNBQVVBLEdBQ2dCLG1CQUFYQyxRQUF5QkEsT0FBT0MsSUFFdkNELE9BQU8sR0FBSUQsR0FDZSxpQkFBWkcsUUFFZEMsT0FBT0QsUUFBVUgsSUFHakJLLE9BQU9DLFdBQWFOLElBVDVCLENBV0csV0FDQyxhQUVBLElBQUlPLEdBQVUsU0FRZCxTQUFTQyxHQUFjQyxHQUNuQkEsRUFBR0MsY0FBY0MsWUFBWUYsR0FHakMsU0FBU0csRUFBTUMsR0FDWCxPQUFPQSxNQUFBQSxFQUlYLFNBQVNDLEdBQWVDLEdBQ3BCQSxFQUFFRCxpQkFtQ04sU0FBU0UsRUFBVUMsR0FDZixNQUFvQixpQkFBTkEsSUFBbUJDLE1BQU1ELElBQU1FLFNBQVNGLEdBSTFELFNBQVNHLEdBQVlDLEVBQVNDLEVBQVdDLEdBQ3RCLEVBQVhBLElBQ0FDLEdBQVNILEVBQVNDLEdBQ2xCRyxXQUFXLFdBQ1BDLEdBQVlMLEVBQVNDLElBQ3RCQyxJQUtYLFNBQVNJLEdBQU1WLEdBQ1gsT0FBT1csS0FBS0MsSUFBSUQsS0FBS0UsSUFBSWIsRUFBRyxLQUFNLEdBS3RDLFNBQVNjLEdBQVFkLEdBQ2IsT0FBT2UsTUFBTUMsUUFBUWhCLEdBQUtBLEVBQUksQ0FBQ0EsR0FJbkMsU0FBU2lCLEVBQWNDLEdBRW5CLElBQUlDLEdB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V3pVLE9BQzVCK0IsRUFBUXRKLE1BQVFnYyxFQUFXaGMsTUFDM0JzSixFQUFRNUIsUUFBVXNVLEVBQVd0VSxRQUd6QjRCLEVBQVF3QixLQUNSQSxFQUFLeEIsRUFBUXdCLE1BRWIwRyxJQUlBbEksRUFBUWhCLFNBQ1JBLElBRUE2SCxJQUlKakMsRUFBa0IsR0FDbEJrTSxHQUFTMEIsRUFBZ0JsVixPQUFTdVMsRUFBR21CLElBOENyQ3hRLE9BQVFpRSxFQUNSeUQsV0FBWUEsRUFDWnJCLGVBQWdCQSxFQUNoQnJGLEtBQU1BLEdBMkJkLE1BQU8sQ0FFSG1SLFdBQVl2WCxFQUNad1gsUUFBU3RkLEdBQ1R1ZCxPQXhCSixTQUFvQnJTLEVBQVEyQyxHQUN4QixJQUFLM0MsSUFBV0EsRUFBT3lNLFNBQ25CLE1BQU0sSUFBSTNTLE1BQU0sZUFBaUJoRixHQUFVLDZDQUErQ2tMLEdBSTlGLEdBQUlBLEVBQU9uTCxXQUNQLE1BQU0sSUFBSWlGLE1BQU0sZUFBaUJoRixHQUFVLHNDQUkvQyxJQUNJd2QsRUFBTTVQLEVBQU0xQyxFQURGVCxHQUFZb0QsR0FDT0EsR0FJakMsT0FGQTNDLEVBQU9uTCxXQUFheWQsTUFjNUIsSUFBSUMsY0FBZ0JyUSxTQUFTc1EsZUFBZSxtQkFFNUMzZCxXQUFXd2QsT0FBT0UsY0FBZSxDQUMvQnpWLE1BQU8sQ0FBQyxFQUFHLEtBQ1huQyxLQUFNLElBQ04wQyxTQUFTLEVBQ1RtQixTQUFVLEVBQUMsR0FBTSxHQUNqQmpHLE1BQU8sQ0FDTGxDLElBQUssRUFDTEQsSUFBSyxLQUVQMEksT0FBUSxDQUNOdkYsR0FBSSxTQUFTbkUsR0FDWCxPQUFPQSxHQUVUaUgsS0FBTSxTQUFTakgsR0FDYixPQUFPQSxFQUFNOEIsUUFBUSxLQUFNIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIG5vdWlzbGlkZXIgLSAxMy4xLjUgLSA0LzI0LzIwMTkgKi9cclxuKGZ1bmN0aW9uKGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgIC8vIE5vZGUvQ29tbW9uSlNcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXHJcbiAgICAgICAgd2luZG93Lm5vVWlTbGlkZXIgPSBmYWN0b3J5KCk7XHJcbiAgICB9XHJcbn0pKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIFZFUlNJT04gPSBcIjEzLjEuNVwiO1xyXG5cclxuICAgIC8vcmVnaW9uIEhlbHBlciBNZXRob2RzXHJcblxyXG4gICAgZnVuY3Rpb24gaXNWYWxpZEZvcm1hdHRlcihlbnRyeSkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGVudHJ5LnRvID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGVudHJ5LmZyb20gPT09IFwiZnVuY3Rpb25cIjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KGVsKSB7XHJcbiAgICAgICAgZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNTZXQodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCaW5kYWJsZSB2ZXJzaW9uXHJcbiAgICBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlbW92ZXMgZHVwbGljYXRlcyBmcm9tIGFuIGFycmF5LlxyXG4gICAgZnVuY3Rpb24gdW5pcXVlKGFycmF5KSB7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5LmZpbHRlcihmdW5jdGlvbihhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhdGhpc1thXSA/ICh0aGlzW2FdID0gdHJ1ZSkgOiBmYWxzZTtcclxuICAgICAgICB9LCB7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUm91bmQgYSB2YWx1ZSB0byB0aGUgY2xvc2VzdCAndG8nLlxyXG4gICAgZnVuY3Rpb24gY2xvc2VzdCh2YWx1ZSwgdG8pIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAvIHRvKSAqIHRvO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEN1cnJlbnQgcG9zaXRpb24gb2YgYW4gZWxlbWVudCByZWxhdGl2ZSB0byB0aGUgZG9jdW1lbnQuXHJcbiAgICBmdW5jdGlvbiBvZmZzZXQoZWxlbSwgb3JpZW50YXRpb24pIHtcclxuICAgICAgICB2YXIgcmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdmFyIGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudDtcclxuICAgICAgICB2YXIgZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIHBhZ2VPZmZzZXQgPSBnZXRQYWdlT2Zmc2V0KGRvYyk7XHJcblxyXG4gICAgICAgIC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBjb250YWlucyBsZWZ0IHNjcm9sbCBpbiBDaHJvbWUgb24gQW5kcm9pZC5cclxuICAgICAgICAvLyBJIGhhdmVuJ3QgZm91bmQgYSBmZWF0dXJlIGRldGVjdGlvbiB0aGF0IHByb3ZlcyB0aGlzLiBXb3JzdCBjYXNlXHJcbiAgICAgICAgLy8gc2NlbmFyaW8gb24gbWlzLW1hdGNoOiB0aGUgJ3RhcCcgZmVhdHVyZSBvbiBob3Jpem9udGFsIHNsaWRlcnMgYnJlYWtzLlxyXG4gICAgICAgIGlmICgvd2Via2l0LipDaHJvbWUuKk1vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgcGFnZU9mZnNldC54ID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvcmllbnRhdGlvblxyXG4gICAgICAgICAgICA/IHJlY3QudG9wICsgcGFnZU9mZnNldC55IC0gZG9jRWxlbS5jbGllbnRUb3BcclxuICAgICAgICAgICAgOiByZWN0LmxlZnQgKyBwYWdlT2Zmc2V0LnggLSBkb2NFbGVtLmNsaWVudExlZnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2tzIHdoZXRoZXIgYSB2YWx1ZSBpcyBudW1lcmljYWwuXHJcbiAgICBmdW5jdGlvbiBpc051bWVyaWMoYSkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgYSA9PT0gXCJudW1iZXJcIiAmJiAhaXNOYU4oYSkgJiYgaXNGaW5pdGUoYSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0cyBhIGNsYXNzIGFuZCByZW1vdmVzIGl0IGFmdGVyIFtkdXJhdGlvbl0gbXMuXHJcbiAgICBmdW5jdGlvbiBhZGRDbGFzc0ZvcihlbGVtZW50LCBjbGFzc05hbWUsIGR1cmF0aW9uKSB7XHJcbiAgICAgICAgaWYgKGR1cmF0aW9uID4gMCkge1xyXG4gICAgICAgICAgICBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgfSwgZHVyYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBMaW1pdHMgYSB2YWx1ZSB0byAwIC0gMTAwXHJcbiAgICBmdW5jdGlvbiBsaW1pdChhKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKGEsIDEwMCksIDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFdyYXBzIGEgdmFyaWFibGUgYXMgYW4gYXJyYXksIGlmIGl0IGlzbid0IG9uZSB5ZXQuXHJcbiAgICAvLyBOb3RlIHRoYXQgYW4gaW5wdXQgYXJyYXkgaXMgcmV0dXJuZWQgYnkgcmVmZXJlbmNlIVxyXG4gICAgZnVuY3Rpb24gYXNBcnJheShhKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYSkgPyBhIDogW2FdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvdW50cyBkZWNpbWFsc1xyXG4gICAgZnVuY3Rpb24gY291bnREZWNpbWFscyhudW1TdHIpIHtcclxuICAgICAgICBudW1TdHIgPSBTdHJpbmcobnVtU3RyKTtcclxuICAgICAgICB2YXIgcGllY2VzID0gbnVtU3RyLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICByZXR1cm4gcGllY2VzLmxlbmd0aCA+IDEgPyBwaWVjZXNbMV0ubGVuZ3RoIDogMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBodHRwOi8veW91bWlnaHRub3RuZWVkanF1ZXJ5LmNvbS8jYWRkX2NsYXNzXHJcbiAgICBmdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lICs9IFwiIFwiICsgY2xhc3NOYW1lO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBodHRwOi8veW91bWlnaHRub3RuZWVkanF1ZXJ5LmNvbS8jcmVtb3ZlX2NsYXNzXHJcbiAgICBmdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UoXHJcbiAgICAgICAgICAgICAgICBuZXcgUmVnRXhwKFwiKF58XFxcXGIpXCIgKyBjbGFzc05hbWUuc3BsaXQoXCIgXCIpLmpvaW4oXCJ8XCIpICsgXCIoXFxcXGJ8JClcIiwgXCJnaVwiKSxcclxuICAgICAgICAgICAgICAgIFwiIFwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGh0dHBzOi8vcGxhaW5qcy5jb20vamF2YXNjcmlwdC9hdHRyaWJ1dGVzL2FkZGluZy1yZW1vdmluZy1hbmQtdGVzdGluZy1mb3ItY2xhc3Nlcy05L1xyXG4gICAgZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3RcclxuICAgICAgICAgICAgPyBlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKVxyXG4gICAgICAgICAgICA6IG5ldyBSZWdFeHAoXCJcXFxcYlwiICsgY2xhc3NOYW1lICsgXCJcXFxcYlwiKS50ZXN0KGVsLmNsYXNzTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvdy9zY3JvbGxZI05vdGVzXHJcbiAgICBmdW5jdGlvbiBnZXRQYWdlT2Zmc2V0KGRvYykge1xyXG4gICAgICAgIHZhciBzdXBwb3J0UGFnZU9mZnNldCA9IHdpbmRvdy5wYWdlWE9mZnNldCAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHZhciBpc0NTUzFDb21wYXQgPSAoZG9jLmNvbXBhdE1vZGUgfHwgXCJcIikgPT09IFwiQ1NTMUNvbXBhdFwiO1xyXG4gICAgICAgIHZhciB4ID0gc3VwcG9ydFBhZ2VPZmZzZXRcclxuICAgICAgICAgICAgPyB3aW5kb3cucGFnZVhPZmZzZXRcclxuICAgICAgICAgICAgOiBpc0NTUzFDb21wYXRcclxuICAgICAgICAgICAgICAgID8gZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0XHJcbiAgICAgICAgICAgICAgICA6IGRvYy5ib2R5LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgdmFyIHkgPSBzdXBwb3J0UGFnZU9mZnNldFxyXG4gICAgICAgICAgICA/IHdpbmRvdy5wYWdlWU9mZnNldFxyXG4gICAgICAgICAgICA6IGlzQ1NTMUNvbXBhdFxyXG4gICAgICAgICAgICAgICAgPyBkb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcFxyXG4gICAgICAgICAgICAgICAgOiBkb2MuYm9keS5zY3JvbGxUb3A7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IHgsXHJcbiAgICAgICAgICAgIHk6IHlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHdlIHByb3ZpZGUgYSBmdW5jdGlvbiB0byBjb21wdXRlIGNvbnN0YW50cyBpbnN0ZWFkXHJcbiAgICAvLyBvZiBhY2Nlc3Npbmcgd2luZG93LiogYXMgc29vbiBhcyB0aGUgbW9kdWxlIG5lZWRzIGl0XHJcbiAgICAvLyBzbyB0aGF0IHdlIGRvIG5vdCBjb21wdXRlIGFueXRoaW5nIGlmIG5vdCBuZWVkZWRcclxuICAgIGZ1bmN0aW9uIGdldEFjdGlvbnMoKSB7XHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBldmVudHMgdG8gYmluZC4gSUUxMSBpbXBsZW1lbnRzIHBvaW50ZXJFdmVudHMgd2l0aG91dFxyXG4gICAgICAgIC8vIGEgcHJlZml4LCB3aGljaCBicmVha3MgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBJRTEwIGltcGxlbWVudGF0aW9uLlxyXG4gICAgICAgIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkXHJcbiAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgICBzdGFydDogXCJwb2ludGVyZG93blwiLFxyXG4gICAgICAgICAgICAgICAgICBtb3ZlOiBcInBvaW50ZXJtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICAgIGVuZDogXCJwb2ludGVydXBcIlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgOiB3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWRcclxuICAgICAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IFwiTVNQb2ludGVyRG93blwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbW92ZTogXCJNU1BvaW50ZXJNb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBlbmQ6IFwiTVNQb2ludGVyVXBcIlxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBcIm1vdXNlZG93biB0b3VjaHN0YXJ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBtb3ZlOiBcIm1vdXNlbW92ZSB0b3VjaG1vdmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgIGVuZDogXCJtb3VzZXVwIHRvdWNoZW5kXCJcclxuICAgICAgICAgICAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9FdmVudExpc3RlbmVyT3B0aW9ucy9ibG9iL2doLXBhZ2VzL2V4cGxhaW5lci5tZFxyXG4gICAgLy8gSXNzdWUgIzc4NVxyXG4gICAgZnVuY3Rpb24gZ2V0U3VwcG9ydHNQYXNzaXZlKCkge1xyXG4gICAgICAgIHZhciBzdXBwb3J0c1Bhc3NpdmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgKi9cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgb3B0cyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgXCJwYXNzaXZlXCIsIHtcclxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIiwgbnVsbCwgb3B0cyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge31cclxuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlICovXHJcblxyXG4gICAgICAgIHJldHVybiBzdXBwb3J0c1Bhc3NpdmU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0U3VwcG9ydHNUb3VjaEFjdGlvbk5vbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5DU1MgJiYgQ1NTLnN1cHBvcnRzICYmIENTUy5zdXBwb3J0cyhcInRvdWNoLWFjdGlvblwiLCBcIm5vbmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy9lbmRyZWdpb25cclxuXHJcbiAgICAvL3JlZ2lvbiBSYW5nZSBDYWxjdWxhdGlvblxyXG5cclxuICAgIC8vIERldGVybWluZSB0aGUgc2l6ZSBvZiBhIHN1Yi1yYW5nZSBpbiByZWxhdGlvbiB0byBhIGZ1bGwgcmFuZ2UuXHJcbiAgICBmdW5jdGlvbiBzdWJSYW5nZVJhdGlvKHBhLCBwYikge1xyXG4gICAgICAgIHJldHVybiAxMDAgLyAocGIgLSBwYSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gKHBlcmNlbnRhZ2UpIEhvdyBtYW55IHBlcmNlbnQgaXMgdGhpcyB2YWx1ZSBvZiB0aGlzIHJhbmdlP1xyXG4gICAgZnVuY3Rpb24gZnJvbVBlcmNlbnRhZ2UocmFuZ2UsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuICh2YWx1ZSAqIDEwMCkgLyAocmFuZ2VbMV0gLSByYW5nZVswXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gKHBlcmNlbnRhZ2UpIFdoZXJlIGlzIHRoaXMgdmFsdWUgb24gdGhpcyByYW5nZT9cclxuICAgIGZ1bmN0aW9uIHRvUGVyY2VudGFnZShyYW5nZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gZnJvbVBlcmNlbnRhZ2UocmFuZ2UsIHJhbmdlWzBdIDwgMCA/IHZhbHVlICsgTWF0aC5hYnMocmFuZ2VbMF0pIDogdmFsdWUgLSByYW5nZVswXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gKHZhbHVlKSBIb3cgbXVjaCBpcyB0aGlzIHBlcmNlbnRhZ2Ugb24gdGhpcyByYW5nZT9cclxuICAgIGZ1bmN0aW9uIGlzUGVyY2VudGFnZShyYW5nZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gKHZhbHVlICogKHJhbmdlWzFdIC0gcmFuZ2VbMF0pKSAvIDEwMCArIHJhbmdlWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEoodmFsdWUsIGFycikge1xyXG4gICAgICAgIHZhciBqID0gMTtcclxuXHJcbiAgICAgICAgd2hpbGUgKHZhbHVlID49IGFycltqXSkge1xyXG4gICAgICAgICAgICBqICs9IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gajtcclxuICAgIH1cclxuXHJcbiAgICAvLyAocGVyY2VudGFnZSkgSW5wdXQgYSB2YWx1ZSwgZmluZCB3aGVyZSwgb24gYSBzY2FsZSBvZiAwLTEwMCwgaXQgYXBwbGllcy5cclxuICAgIGZ1bmN0aW9uIHRvU3RlcHBpbmcoeFZhbCwgeFBjdCwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgPj0geFZhbC5zbGljZSgtMSlbMF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBqID0gZ2V0Sih2YWx1ZSwgeFZhbCk7XHJcbiAgICAgICAgdmFyIHZhID0geFZhbFtqIC0gMV07XHJcbiAgICAgICAgdmFyIHZiID0geFZhbFtqXTtcclxuICAgICAgICB2YXIgcGEgPSB4UGN0W2ogLSAxXTtcclxuICAgICAgICB2YXIgcGIgPSB4UGN0W2pdO1xyXG5cclxuICAgICAgICByZXR1cm4gcGEgKyB0b1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sIHZhbHVlKSAvIHN1YlJhbmdlUmF0aW8ocGEsIHBiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAodmFsdWUpIElucHV0IGEgcGVyY2VudGFnZSwgZmluZCB3aGVyZSBpdCBpcyBvbiB0aGUgc3BlY2lmaWVkIHJhbmdlLlxyXG4gICAgZnVuY3Rpb24gZnJvbVN0ZXBwaW5nKHhWYWwsIHhQY3QsIHZhbHVlKSB7XHJcbiAgICAgICAgLy8gVGhlcmUgaXMgbm8gcmFuZ2UgZ3JvdXAgdGhhdCBmaXRzIDEwMFxyXG4gICAgICAgIGlmICh2YWx1ZSA+PSAxMDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHhWYWwuc2xpY2UoLTEpWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGogPSBnZXRKKHZhbHVlLCB4UGN0KTtcclxuICAgICAgICB2YXIgdmEgPSB4VmFsW2ogLSAxXTtcclxuICAgICAgICB2YXIgdmIgPSB4VmFsW2pdO1xyXG4gICAgICAgIHZhciBwYSA9IHhQY3RbaiAtIDFdO1xyXG4gICAgICAgIHZhciBwYiA9IHhQY3Rbal07XHJcblxyXG4gICAgICAgIHJldHVybiBpc1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sICh2YWx1ZSAtIHBhKSAqIHN1YlJhbmdlUmF0aW8ocGEsIHBiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gKHBlcmNlbnRhZ2UpIEdldCB0aGUgc3RlcCB0aGF0IGFwcGxpZXMgYXQgYSBjZXJ0YWluIHZhbHVlLlxyXG4gICAgZnVuY3Rpb24gZ2V0U3RlcCh4UGN0LCB4U3RlcHMsIHNuYXAsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSAxMDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGogPSBnZXRKKHZhbHVlLCB4UGN0KTtcclxuICAgICAgICB2YXIgYSA9IHhQY3RbaiAtIDFdO1xyXG4gICAgICAgIHZhciBiID0geFBjdFtqXTtcclxuXHJcbiAgICAgICAgLy8gSWYgJ3NuYXAnIGlzIHNldCwgc3RlcHMgYXJlIHVzZWQgYXMgZml4ZWQgcG9pbnRzIG9uIHRoZSBzbGlkZXIuXHJcbiAgICAgICAgaWYgKHNuYXApIHtcclxuICAgICAgICAgICAgLy8gRmluZCB0aGUgY2xvc2VzdCBwb3NpdGlvbiwgYSBvciBiLlxyXG4gICAgICAgICAgICBpZiAodmFsdWUgLSBhID4gKGIgLSBhKSAvIDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgheFN0ZXBzW2ogLSAxXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4geFBjdFtqIC0gMV0gKyBjbG9zZXN0KHZhbHVlIC0geFBjdFtqIC0gMV0sIHhTdGVwc1tqIC0gMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZUVudHJ5UG9pbnQoaW5kZXgsIHZhbHVlLCB0aGF0KSB7XHJcbiAgICAgICAgdmFyIHBlcmNlbnRhZ2U7XHJcblxyXG4gICAgICAgIC8vIFdyYXAgbnVtZXJpY2FsIGlucHV0IGluIGFuIGFycmF5LlxyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSBbdmFsdWVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVqZWN0IGFueSBpbnZhbGlkIGlucHV0LCBieSB0ZXN0aW5nIHdoZXRoZXIgdmFsdWUgaXMgYW4gYXJyYXkuXHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdyYW5nZScgY29udGFpbnMgaW52YWxpZCB2YWx1ZS5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDb3ZlcnQgbWluL21heCBzeW50YXggdG8gMCBhbmQgMTAwLlxyXG4gICAgICAgIGlmIChpbmRleCA9PT0gXCJtaW5cIikge1xyXG4gICAgICAgICAgICBwZXJjZW50YWdlID0gMDtcclxuICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBcIm1heFwiKSB7XHJcbiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAxMDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGVyY2VudGFnZSA9IHBhcnNlRmxvYXQoaW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNvcnJlY3QgaW5wdXQuXHJcbiAgICAgICAgaWYgKCFpc051bWVyaWMocGVyY2VudGFnZSkgfHwgIWlzTnVtZXJpYyh2YWx1ZVswXSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncmFuZ2UnIHZhbHVlIGlzbid0IG51bWVyaWMuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3RvcmUgdmFsdWVzLlxyXG4gICAgICAgIHRoYXQueFBjdC5wdXNoKHBlcmNlbnRhZ2UpO1xyXG4gICAgICAgIHRoYXQueFZhbC5wdXNoKHZhbHVlWzBdKTtcclxuXHJcbiAgICAgICAgLy8gTmFOIHdpbGwgZXZhbHVhdGUgdG8gZmFsc2UgdG9vLCBidXQgdG8ga2VlcFxyXG4gICAgICAgIC8vIGxvZ2dpbmcgY2xlYXIsIHNldCBzdGVwIGV4cGxpY2l0bHkuIE1ha2Ugc3VyZVxyXG4gICAgICAgIC8vIG5vdCB0byBvdmVycmlkZSB0aGUgJ3N0ZXAnIHNldHRpbmcgd2l0aCBmYWxzZS5cclxuICAgICAgICBpZiAoIXBlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZVsxXSkpIHtcclxuICAgICAgICAgICAgICAgIHRoYXQueFN0ZXBzWzBdID0gdmFsdWVbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGF0LnhTdGVwcy5wdXNoKGlzTmFOKHZhbHVlWzFdKSA/IGZhbHNlIDogdmFsdWVbMV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhhdC54SGlnaGVzdENvbXBsZXRlU3RlcC5wdXNoKDApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZVN0ZXBQb2ludChpLCBuLCB0aGF0KSB7XHJcbiAgICAgICAgLy8gSWdub3JlICdmYWxzZScgc3RlcHBpbmcuXHJcbiAgICAgICAgaWYgKCFuKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0ZXAgb3ZlciB6ZXJvLWxlbmd0aCByYW5nZXMgKCM5NDgpO1xyXG4gICAgICAgIGlmICh0aGF0LnhWYWxbaV0gPT09IHRoYXQueFZhbFtpICsgMV0pIHtcclxuICAgICAgICAgICAgdGhhdC54U3RlcHNbaV0gPSB0aGF0LnhIaWdoZXN0Q29tcGxldGVTdGVwW2ldID0gdGhhdC54VmFsW2ldO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmFjdG9yIHRvIHJhbmdlIHJhdGlvXHJcbiAgICAgICAgdGhhdC54U3RlcHNbaV0gPVxyXG4gICAgICAgICAgICBmcm9tUGVyY2VudGFnZShbdGhhdC54VmFsW2ldLCB0aGF0LnhWYWxbaSArIDFdXSwgbikgLyBzdWJSYW5nZVJhdGlvKHRoYXQueFBjdFtpXSwgdGhhdC54UGN0W2kgKyAxXSk7XHJcblxyXG4gICAgICAgIHZhciB0b3RhbFN0ZXBzID0gKHRoYXQueFZhbFtpICsgMV0gLSB0aGF0LnhWYWxbaV0pIC8gdGhhdC54TnVtU3RlcHNbaV07XHJcbiAgICAgICAgdmFyIGhpZ2hlc3RTdGVwID0gTWF0aC5jZWlsKE51bWJlcih0b3RhbFN0ZXBzLnRvRml4ZWQoMykpIC0gMSk7XHJcbiAgICAgICAgdmFyIHN0ZXAgPSB0aGF0LnhWYWxbaV0gKyB0aGF0LnhOdW1TdGVwc1tpXSAqIGhpZ2hlc3RTdGVwO1xyXG5cclxuICAgICAgICB0aGF0LnhIaWdoZXN0Q29tcGxldGVTdGVwW2ldID0gc3RlcDtcclxuICAgIH1cclxuXHJcbiAgICAvL2VuZHJlZ2lvblxyXG5cclxuICAgIC8vcmVnaW9uIFNwZWN0cnVtXHJcblxyXG4gICAgZnVuY3Rpb24gU3BlY3RydW0oZW50cnksIHNuYXAsIHNpbmdsZVN0ZXApIHtcclxuICAgICAgICB0aGlzLnhQY3QgPSBbXTtcclxuICAgICAgICB0aGlzLnhWYWwgPSBbXTtcclxuICAgICAgICB0aGlzLnhTdGVwcyA9IFtzaW5nbGVTdGVwIHx8IGZhbHNlXTtcclxuICAgICAgICB0aGlzLnhOdW1TdGVwcyA9IFtmYWxzZV07XHJcbiAgICAgICAgdGhpcy54SGlnaGVzdENvbXBsZXRlU3RlcCA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnNuYXAgPSBzbmFwO1xyXG5cclxuICAgICAgICB2YXIgaW5kZXg7XHJcbiAgICAgICAgdmFyIG9yZGVyZWQgPSBbXTsgLy8gWzAsICdtaW4nXSwgWzEsICc1MCUnXSwgWzIsICdtYXgnXVxyXG5cclxuICAgICAgICAvLyBNYXAgdGhlIG9iamVjdCBrZXlzIHRvIGFuIGFycmF5LlxyXG4gICAgICAgIGZvciAoaW5kZXggaW4gZW50cnkpIHtcclxuICAgICAgICAgICAgaWYgKGVudHJ5Lmhhc093blByb3BlcnR5KGluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgb3JkZXJlZC5wdXNoKFtlbnRyeVtpbmRleF0sIGluZGV4XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNvcnQgYWxsIGVudHJpZXMgYnkgdmFsdWUgKG51bWVyaWMgc29ydCkuXHJcbiAgICAgICAgaWYgKG9yZGVyZWQubGVuZ3RoICYmIHR5cGVvZiBvcmRlcmVkWzBdWzBdID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgIG9yZGVyZWQuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYVswXVswXSAtIGJbMF1bMF07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9yZGVyZWQuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYVswXSAtIGJbMF07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29udmVydCBhbGwgZW50cmllcyB0byBzdWJyYW5nZXMuXHJcbiAgICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgb3JkZXJlZC5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgaGFuZGxlRW50cnlQb2ludChvcmRlcmVkW2luZGV4XVsxXSwgb3JkZXJlZFtpbmRleF1bMF0sIHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3RvcmUgdGhlIGFjdHVhbCBzdGVwIHZhbHVlcy5cclxuICAgICAgICAvLyB4U3RlcHMgaXMgc29ydGVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHhQY3QgYW5kIHhWYWwuXHJcbiAgICAgICAgdGhpcy54TnVtU3RlcHMgPSB0aGlzLnhTdGVwcy5zbGljZSgwKTtcclxuXHJcbiAgICAgICAgLy8gQ29udmVydCBhbGwgbnVtZXJpYyBzdGVwcyB0byB0aGUgcGVyY2VudGFnZSBvZiB0aGUgc3VicmFuZ2UgdGhleSByZXByZXNlbnQuXHJcbiAgICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgdGhpcy54TnVtU3RlcHMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZVN0ZXBQb2ludChpbmRleCwgdGhpcy54TnVtU3RlcHNbaW5kZXhdLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgU3BlY3RydW0ucHJvdG90eXBlLmdldE1hcmdpbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHN0ZXAgPSB0aGlzLnhOdW1TdGVwc1swXTtcclxuXHJcbiAgICAgICAgaWYgKHN0ZXAgJiYgKHZhbHVlIC8gc3RlcCkgJSAxICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2xpbWl0JywgJ21hcmdpbicgYW5kICdwYWRkaW5nJyBtdXN0IGJlIGRpdmlzaWJsZSBieSBzdGVwLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnhQY3QubGVuZ3RoID09PSAyID8gZnJvbVBlcmNlbnRhZ2UodGhpcy54VmFsLCB2YWx1ZSkgOiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgU3BlY3RydW0ucHJvdG90eXBlLnRvU3RlcHBpbmcgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHZhbHVlID0gdG9TdGVwcGluZyh0aGlzLnhWYWwsIHRoaXMueFBjdCwgdmFsdWUpO1xyXG5cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIFNwZWN0cnVtLnByb3RvdHlwZS5mcm9tU3RlcHBpbmcgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBmcm9tU3RlcHBpbmcodGhpcy54VmFsLCB0aGlzLnhQY3QsIHZhbHVlKTtcclxuICAgIH07XHJcblxyXG4gICAgU3BlY3RydW0ucHJvdG90eXBlLmdldFN0ZXAgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHZhbHVlID0gZ2V0U3RlcCh0aGlzLnhQY3QsIHRoaXMueFN0ZXBzLCB0aGlzLnNuYXAsIHZhbHVlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBTcGVjdHJ1bS5wcm90b3R5cGUuZ2V0RGVmYXVsdFN0ZXAgPSBmdW5jdGlvbih2YWx1ZSwgaXNEb3duLCBzaXplKSB7XHJcbiAgICAgICAgdmFyIGogPSBnZXRKKHZhbHVlLCB0aGlzLnhQY3QpO1xyXG5cclxuICAgICAgICAvLyBXaGVuIGF0IHRoZSB0b3Agb3Igc3RlcHBpbmcgZG93biwgbG9vayBhdCB0aGUgcHJldmlvdXMgc3ViLXJhbmdlXHJcbiAgICAgICAgaWYgKHZhbHVlID09PSAxMDAgfHwgKGlzRG93biAmJiB2YWx1ZSA9PT0gdGhpcy54UGN0W2ogLSAxXSkpIHtcclxuICAgICAgICAgICAgaiA9IE1hdGgubWF4KGogLSAxLCAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAodGhpcy54VmFsW2pdIC0gdGhpcy54VmFsW2ogLSAxXSkgLyBzaXplO1xyXG4gICAgfTtcclxuXHJcbiAgICBTcGVjdHJ1bS5wcm90b3R5cGUuZ2V0TmVhcmJ5U3RlcHMgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHZhciBqID0gZ2V0Sih2YWx1ZSwgdGhpcy54UGN0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3RlcEJlZm9yZToge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRWYWx1ZTogdGhpcy54VmFsW2ogLSAyXSxcclxuICAgICAgICAgICAgICAgIHN0ZXA6IHRoaXMueE51bVN0ZXBzW2ogLSAyXSxcclxuICAgICAgICAgICAgICAgIGhpZ2hlc3RTdGVwOiB0aGlzLnhIaWdoZXN0Q29tcGxldGVTdGVwW2ogLSAyXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aGlzU3RlcDoge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRWYWx1ZTogdGhpcy54VmFsW2ogLSAxXSxcclxuICAgICAgICAgICAgICAgIHN0ZXA6IHRoaXMueE51bVN0ZXBzW2ogLSAxXSxcclxuICAgICAgICAgICAgICAgIGhpZ2hlc3RTdGVwOiB0aGlzLnhIaWdoZXN0Q29tcGxldGVTdGVwW2ogLSAxXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdGVwQWZ0ZXI6IHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWU6IHRoaXMueFZhbFtqXSxcclxuICAgICAgICAgICAgICAgIHN0ZXA6IHRoaXMueE51bVN0ZXBzW2pdLFxyXG4gICAgICAgICAgICAgICAgaGlnaGVzdFN0ZXA6IHRoaXMueEhpZ2hlc3RDb21wbGV0ZVN0ZXBbal1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIFNwZWN0cnVtLnByb3RvdHlwZS5jb3VudFN0ZXBEZWNpbWFscyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzdGVwRGVjaW1hbHMgPSB0aGlzLnhOdW1TdGVwcy5tYXAoY291bnREZWNpbWFscyk7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsIHN0ZXBEZWNpbWFscyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIE91dHNpZGUgdGVzdGluZ1xyXG4gICAgU3BlY3RydW0ucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFN0ZXAodGhpcy50b1N0ZXBwaW5nKHZhbHVlKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vZW5kcmVnaW9uXHJcblxyXG4gICAgLy9yZWdpb24gT3B0aW9uc1xyXG5cclxuICAgIC8qXHRFdmVyeSBpbnB1dCBvcHRpb24gaXMgdGVzdGVkIGFuZCBwYXJzZWQuIFRoaXMnbGwgcHJldmVudFxyXG4gICAgICAgIGVuZGxlc3MgdmFsaWRhdGlvbiBpbiBpbnRlcm5hbCBtZXRob2RzLiBUaGVzZSB0ZXN0cyBhcmVcclxuICAgICAgICBzdHJ1Y3R1cmVkIHdpdGggYW4gaXRlbSBmb3IgZXZlcnkgb3B0aW9uIGF2YWlsYWJsZS4gQW5cclxuICAgICAgICBvcHRpb24gY2FuIGJlIG1hcmtlZCBhcyByZXF1aXJlZCBieSBzZXR0aW5nIHRoZSAncicgZmxhZy5cclxuICAgICAgICBUaGUgdGVzdGluZyBmdW5jdGlvbiBpcyBwcm92aWRlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcclxuICAgICAgICAgICAgLSBUaGUgcHJvdmlkZWQgdmFsdWUgZm9yIHRoZSBvcHRpb247XHJcbiAgICAgICAgICAgIC0gQSByZWZlcmVuY2UgdG8gdGhlIG9wdGlvbnMgb2JqZWN0O1xyXG4gICAgICAgICAgICAtIFRoZSBuYW1lIGZvciB0aGUgb3B0aW9uO1xyXG5cclxuICAgICAgICBUaGUgdGVzdGluZyBmdW5jdGlvbiByZXR1cm5zIGZhbHNlIHdoZW4gYW4gZXJyb3IgaXMgZGV0ZWN0ZWQsXHJcbiAgICAgICAgb3IgdHJ1ZSB3aGVuIGV2ZXJ5dGhpbmcgaXMgT0suIEl0IGNhbiBhbHNvIG1vZGlmeSB0aGUgb3B0aW9uXHJcbiAgICAgICAgb2JqZWN0LCB0byBtYWtlIHN1cmUgYWxsIHZhbHVlcyBjYW4gYmUgY29ycmVjdGx5IGxvb3BlZCBlbHNld2hlcmUuICovXHJcblxyXG4gICAgdmFyIGRlZmF1bHRGb3JtYXR0ZXIgPSB7XHJcbiAgICAgICAgdG86IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLnRvRml4ZWQoMik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBmcm9tOiBOdW1iZXJcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gdmFsaWRhdGVGb3JtYXQoZW50cnkpIHtcclxuICAgICAgICAvLyBBbnkgb2JqZWN0IHdpdGggYSB0byBhbmQgZnJvbSBtZXRob2QgaXMgc3VwcG9ydGVkLlxyXG4gICAgICAgIGlmIChpc1ZhbGlkRm9ybWF0dGVyKGVudHJ5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Zvcm1hdCcgcmVxdWlyZXMgJ3RvJyBhbmQgJ2Zyb20nIG1ldGhvZHMuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRlc3RTdGVwKHBhcnNlZCwgZW50cnkpIHtcclxuICAgICAgICBpZiAoIWlzTnVtZXJpYyhlbnRyeSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnc3RlcCcgaXMgbm90IG51bWVyaWMuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVGhlIHN0ZXAgb3B0aW9uIGNhbiBzdGlsbCBiZSB1c2VkIHRvIHNldCBzdGVwcGluZ1xyXG4gICAgICAgIC8vIGZvciBsaW5lYXIgc2xpZGVycy4gT3ZlcndyaXR0ZW4gaWYgc2V0IGluICdyYW5nZScuXHJcbiAgICAgICAgcGFyc2VkLnNpbmdsZVN0ZXAgPSBlbnRyeTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0UmFuZ2UocGFyc2VkLCBlbnRyeSkge1xyXG4gICAgICAgIC8vIEZpbHRlciBpbmNvcnJlY3QgaW5wdXQuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KGVudHJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdyYW5nZScgaXMgbm90IGFuIG9iamVjdC5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDYXRjaCBtaXNzaW5nIHN0YXJ0IG9yIGVuZC5cclxuICAgICAgICBpZiAoZW50cnkubWluID09PSB1bmRlZmluZWQgfHwgZW50cnkubWF4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiBNaXNzaW5nICdtaW4nIG9yICdtYXgnIGluICdyYW5nZScuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2F0Y2ggZXF1YWwgc3RhcnQgb3IgZW5kLlxyXG4gICAgICAgIGlmIChlbnRyeS5taW4gPT09IGVudHJ5Lm1heCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdyYW5nZScgJ21pbicgYW5kICdtYXgnIGNhbm5vdCBiZSBlcXVhbC5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwYXJzZWQuc3BlY3RydW0gPSBuZXcgU3BlY3RydW0oZW50cnksIHBhcnNlZC5zbmFwLCBwYXJzZWQuc2luZ2xlU3RlcCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdGVzdFN0YXJ0KHBhcnNlZCwgZW50cnkpIHtcclxuICAgICAgICBlbnRyeSA9IGFzQXJyYXkoZW50cnkpO1xyXG5cclxuICAgICAgICAvLyBWYWxpZGF0ZSBpbnB1dC4gVmFsdWVzIGFyZW4ndCB0ZXN0ZWQsIGFzIHRoZSBwdWJsaWMgLnZhbCBtZXRob2RcclxuICAgICAgICAvLyB3aWxsIGFsd2F5cyBwcm92aWRlIGEgdmFsaWQgbG9jYXRpb24uXHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGVudHJ5KSB8fCAhZW50cnkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3N0YXJ0JyBvcHRpb24gaXMgaW5jb3JyZWN0LlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0b3JlIHRoZSBudW1iZXIgb2YgaGFuZGxlcy5cclxuICAgICAgICBwYXJzZWQuaGFuZGxlcyA9IGVudHJ5Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgLy8gV2hlbiB0aGUgc2xpZGVyIGlzIGluaXRpYWxpemVkLCB0aGUgLnZhbCBtZXRob2Qgd2lsbFxyXG4gICAgICAgIC8vIGJlIGNhbGxlZCB3aXRoIHRoZSBzdGFydCBvcHRpb25zLlxyXG4gICAgICAgIHBhcnNlZC5zdGFydCA9IGVudHJ5O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRlc3RTbmFwKHBhcnNlZCwgZW50cnkpIHtcclxuICAgICAgICAvLyBFbmZvcmNlIDEwMCUgc3RlcHBpbmcgd2l0aGluIHN1YnJhbmdlcy5cclxuICAgICAgICBwYXJzZWQuc25hcCA9IGVudHJ5O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGVudHJ5ICE9PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdzbmFwJyBvcHRpb24gbXVzdCBiZSBhIGJvb2xlYW4uXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0QW5pbWF0ZShwYXJzZWQsIGVudHJ5KSB7XHJcbiAgICAgICAgLy8gRW5mb3JjZSAxMDAlIHN0ZXBwaW5nIHdpdGhpbiBzdWJyYW5nZXMuXHJcbiAgICAgICAgcGFyc2VkLmFuaW1hdGUgPSBlbnRyeTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSAhPT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnYW5pbWF0ZScgb3B0aW9uIG11c3QgYmUgYSBib29sZWFuLlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdGVzdEFuaW1hdGlvbkR1cmF0aW9uKHBhcnNlZCwgZW50cnkpIHtcclxuICAgICAgICBwYXJzZWQuYW5pbWF0aW9uRHVyYXRpb24gPSBlbnRyeTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSAhPT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdhbmltYXRpb25EdXJhdGlvbicgb3B0aW9uIG11c3QgYmUgYSBudW1iZXIuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0Q29ubmVjdChwYXJzZWQsIGVudHJ5KSB7XHJcbiAgICAgICAgdmFyIGNvbm5lY3QgPSBbZmFsc2VdO1xyXG4gICAgICAgIHZhciBpO1xyXG5cclxuICAgICAgICAvLyBNYXAgbGVnYWN5IG9wdGlvbnNcclxuICAgICAgICBpZiAoZW50cnkgPT09IFwibG93ZXJcIikge1xyXG4gICAgICAgICAgICBlbnRyeSA9IFt0cnVlLCBmYWxzZV07XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeSA9PT0gXCJ1cHBlclwiKSB7XHJcbiAgICAgICAgICAgIGVudHJ5ID0gW2ZhbHNlLCB0cnVlXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBib29sZWFuIG9wdGlvbnNcclxuICAgICAgICBpZiAoZW50cnkgPT09IHRydWUgfHwgZW50cnkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBwYXJzZWQuaGFuZGxlczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0LnB1c2goZW50cnkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25uZWN0LnB1c2goZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVqZWN0IGludmFsaWQgaW5wdXRcclxuICAgICAgICBlbHNlIGlmICghQXJyYXkuaXNBcnJheShlbnRyeSkgfHwgIWVudHJ5Lmxlbmd0aCB8fCBlbnRyeS5sZW5ndGggIT09IHBhcnNlZC5oYW5kbGVzICsgMSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdjb25uZWN0JyBvcHRpb24gZG9lc24ndCBtYXRjaCBoYW5kbGUgY291bnQuXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbm5lY3QgPSBlbnRyeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhcnNlZC5jb25uZWN0ID0gY29ubmVjdDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0T3JpZW50YXRpb24ocGFyc2VkLCBlbnRyeSkge1xyXG4gICAgICAgIC8vIFNldCBvcmllbnRhdGlvbiB0byBhbiBhIG51bWVyaWNhbCB2YWx1ZSBmb3IgZWFzeVxyXG4gICAgICAgIC8vIGFycmF5IHNlbGVjdGlvbi5cclxuICAgICAgICBzd2l0Y2ggKGVudHJ5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJob3Jpem9udGFsXCI6XHJcbiAgICAgICAgICAgICAgICBwYXJzZWQub3J0ID0gMDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwidmVydGljYWxcIjpcclxuICAgICAgICAgICAgICAgIHBhcnNlZC5vcnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdvcmllbnRhdGlvbicgb3B0aW9uIGlzIGludmFsaWQuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0TWFyZ2luKHBhcnNlZCwgZW50cnkpIHtcclxuICAgICAgICBpZiAoIWlzTnVtZXJpYyhlbnRyeSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbWFyZ2luJyBvcHRpb24gbXVzdCBiZSBudW1lcmljLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElzc3VlICM1ODJcclxuICAgICAgICBpZiAoZW50cnkgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGFyc2VkLm1hcmdpbiA9IHBhcnNlZC5zcGVjdHJ1bS5nZXRNYXJnaW4oZW50cnkpO1xyXG5cclxuICAgICAgICBpZiAoIXBhcnNlZC5tYXJnaW4pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbWFyZ2luJyBvcHRpb24gaXMgb25seSBzdXBwb3J0ZWQgb24gbGluZWFyIHNsaWRlcnMuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0TGltaXQocGFyc2VkLCBlbnRyeSkge1xyXG4gICAgICAgIGlmICghaXNOdW1lcmljKGVudHJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdsaW1pdCcgb3B0aW9uIG11c3QgYmUgbnVtZXJpYy5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwYXJzZWQubGltaXQgPSBwYXJzZWQuc3BlY3RydW0uZ2V0TWFyZ2luKGVudHJ5KTtcclxuXHJcbiAgICAgICAgaWYgKCFwYXJzZWQubGltaXQgfHwgcGFyc2VkLmhhbmRsZXMgPCAyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIFwibm9VaVNsaWRlciAoXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFZFUlNJT04gK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiKTogJ2xpbWl0JyBvcHRpb24gaXMgb25seSBzdXBwb3J0ZWQgb24gbGluZWFyIHNsaWRlcnMgd2l0aCAyIG9yIG1vcmUgaGFuZGxlcy5cIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0UGFkZGluZyhwYXJzZWQsIGVudHJ5KSB7XHJcbiAgICAgICAgaWYgKCFpc051bWVyaWMoZW50cnkpICYmICFBcnJheS5pc0FycmF5KGVudHJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3BhZGRpbmcnIG9wdGlvbiBtdXN0IGJlIG51bWVyaWMgb3IgYXJyYXkgb2YgZXhhY3RseSAyIG51bWJlcnMuXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5KSAmJiAhKGVudHJ5Lmxlbmd0aCA9PT0gMiB8fCBpc051bWVyaWMoZW50cnlbMF0pIHx8IGlzTnVtZXJpYyhlbnRyeVsxXSkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncGFkZGluZycgb3B0aW9uIG11c3QgYmUgbnVtZXJpYyBvciBhcnJheSBvZiBleGFjdGx5IDIgbnVtYmVycy5cIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGVudHJ5ID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShlbnRyeSkpIHtcclxuICAgICAgICAgICAgZW50cnkgPSBbZW50cnksIGVudHJ5XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICdnZXRNYXJnaW4nIHJldHVybnMgZmFsc2UgZm9yIGludmFsaWQgdmFsdWVzLlxyXG4gICAgICAgIHBhcnNlZC5wYWRkaW5nID0gW3BhcnNlZC5zcGVjdHJ1bS5nZXRNYXJnaW4oZW50cnlbMF0pLCBwYXJzZWQuc3BlY3RydW0uZ2V0TWFyZ2luKGVudHJ5WzFdKV07XHJcblxyXG4gICAgICAgIGlmIChwYXJzZWQucGFkZGluZ1swXSA9PT0gZmFsc2UgfHwgcGFyc2VkLnBhZGRpbmdbMV0gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3BhZGRpbmcnIG9wdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBvbiBsaW5lYXIgc2xpZGVycy5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGFyc2VkLnBhZGRpbmdbMF0gPCAwIHx8IHBhcnNlZC5wYWRkaW5nWzFdIDwgMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdwYWRkaW5nJyBvcHRpb24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcihzKS5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGFyc2VkLnBhZGRpbmdbMF0gKyBwYXJzZWQucGFkZGluZ1sxXSA+IDEwMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdwYWRkaW5nJyBvcHRpb24gbXVzdCBub3QgZXhjZWVkIDEwMCUgb2YgdGhlIHJhbmdlLlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdGVzdERpcmVjdGlvbihwYXJzZWQsIGVudHJ5KSB7XHJcbiAgICAgICAgLy8gU2V0IGRpcmVjdGlvbiBhcyBhIG51bWVyaWNhbCB2YWx1ZSBmb3IgZWFzeSBwYXJzaW5nLlxyXG4gICAgICAgIC8vIEludmVydCBjb25uZWN0aW9uIGZvciBSVEwgc2xpZGVycywgc28gdGhhdCB0aGUgcHJvcGVyXHJcbiAgICAgICAgLy8gaGFuZGxlcyBnZXQgdGhlIGNvbm5lY3QvYmFja2dyb3VuZCBjbGFzc2VzLlxyXG4gICAgICAgIHN3aXRjaCAoZW50cnkpIHtcclxuICAgICAgICAgICAgY2FzZSBcImx0clwiOlxyXG4gICAgICAgICAgICAgICAgcGFyc2VkLmRpciA9IDA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJ0bFwiOlxyXG4gICAgICAgICAgICAgICAgcGFyc2VkLmRpciA9IDE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2RpcmVjdGlvbicgb3B0aW9uIHdhcyBub3QgcmVjb2duaXplZC5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRlc3RCZWhhdmlvdXIocGFyc2VkLCBlbnRyeSkge1xyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgaW5wdXQgaXMgYSBzdHJpbmcuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSAhPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdiZWhhdmlvdXInIG11c3QgYmUgYSBzdHJpbmcgY29udGFpbmluZyBvcHRpb25zLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBzdHJpbmcgY29udGFpbnMgYW55IGtleXdvcmRzLlxyXG4gICAgICAgIC8vIE5vbmUgYXJlIHJlcXVpcmVkLlxyXG4gICAgICAgIHZhciB0YXAgPSBlbnRyeS5pbmRleE9mKFwidGFwXCIpID49IDA7XHJcbiAgICAgICAgdmFyIGRyYWcgPSBlbnRyeS5pbmRleE9mKFwiZHJhZ1wiKSA+PSAwO1xyXG4gICAgICAgIHZhciBmaXhlZCA9IGVudHJ5LmluZGV4T2YoXCJmaXhlZFwiKSA+PSAwO1xyXG4gICAgICAgIHZhciBzbmFwID0gZW50cnkuaW5kZXhPZihcInNuYXBcIikgPj0gMDtcclxuICAgICAgICB2YXIgaG92ZXIgPSBlbnRyeS5pbmRleE9mKFwiaG92ZXJcIikgPj0gMDtcclxuICAgICAgICB2YXIgdW5jb25zdHJhaW5lZCA9IGVudHJ5LmluZGV4T2YoXCJ1bmNvbnN0cmFpbmVkXCIpID49IDA7XHJcblxyXG4gICAgICAgIGlmIChmaXhlZCkge1xyXG4gICAgICAgICAgICBpZiAocGFyc2VkLmhhbmRsZXMgIT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2ZpeGVkJyBiZWhhdmlvdXIgbXVzdCBiZSB1c2VkIHdpdGggMiBoYW5kbGVzXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVc2UgbWFyZ2luIHRvIGVuZm9yY2UgZml4ZWQgc3RhdGVcclxuICAgICAgICAgICAgdGVzdE1hcmdpbihwYXJzZWQsIHBhcnNlZC5zdGFydFsxXSAtIHBhcnNlZC5zdGFydFswXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodW5jb25zdHJhaW5lZCAmJiAocGFyc2VkLm1hcmdpbiB8fCBwYXJzZWQubGltaXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAndW5jb25zdHJhaW5lZCcgYmVoYXZpb3VyIGNhbm5vdCBiZSB1c2VkIHdpdGggbWFyZ2luIG9yIGxpbWl0XCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhcnNlZC5ldmVudHMgPSB7XHJcbiAgICAgICAgICAgIHRhcDogdGFwIHx8IHNuYXAsXHJcbiAgICAgICAgICAgIGRyYWc6IGRyYWcsXHJcbiAgICAgICAgICAgIGZpeGVkOiBmaXhlZCxcclxuICAgICAgICAgICAgc25hcDogc25hcCxcclxuICAgICAgICAgICAgaG92ZXI6IGhvdmVyLFxyXG4gICAgICAgICAgICB1bmNvbnN0cmFpbmVkOiB1bmNvbnN0cmFpbmVkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0VG9vbHRpcHMocGFyc2VkLCBlbnRyeSkge1xyXG4gICAgICAgIGlmIChlbnRyeSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGVudHJ5ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHBhcnNlZC50b29sdGlwcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJzZWQuaGFuZGxlczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWQudG9vbHRpcHMucHVzaCh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcnNlZC50b29sdGlwcyA9IGFzQXJyYXkoZW50cnkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhcnNlZC50b29sdGlwcy5sZW5ndGggIT09IHBhcnNlZC5oYW5kbGVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6IG11c3QgcGFzcyBhIGZvcm1hdHRlciBmb3IgYWxsIGhhbmRsZXMuXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwYXJzZWQudG9vbHRpcHMuZm9yRWFjaChmdW5jdGlvbihmb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgZm9ybWF0dGVyICE9PSBcImJvb2xlYW5cIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZm9ybWF0dGVyICE9PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmb3JtYXR0ZXIudG8gIT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3Rvb2x0aXBzJyBtdXN0IGJlIHBhc3NlZCBhIGZvcm1hdHRlciBvciAnZmFsc2UnLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRlc3RBcmlhRm9ybWF0KHBhcnNlZCwgZW50cnkpIHtcclxuICAgICAgICBwYXJzZWQuYXJpYUZvcm1hdCA9IGVudHJ5O1xyXG4gICAgICAgIHZhbGlkYXRlRm9ybWF0KGVudHJ5KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0Rm9ybWF0KHBhcnNlZCwgZW50cnkpIHtcclxuICAgICAgICBwYXJzZWQuZm9ybWF0ID0gZW50cnk7XHJcbiAgICAgICAgdmFsaWRhdGVGb3JtYXQoZW50cnkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRlc3RLZXlib2FyZFN1cHBvcnQocGFyc2VkLCBlbnRyeSkge1xyXG4gICAgICAgIHBhcnNlZC5rZXlib2FyZFN1cHBvcnQgPSBlbnRyeTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSAhPT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAna2V5Ym9hcmRTdXBwb3J0JyBvcHRpb24gbXVzdCBiZSBhIGJvb2xlYW4uXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0RG9jdW1lbnRFbGVtZW50KHBhcnNlZCwgZW50cnkpIHtcclxuICAgICAgICAvLyBUaGlzIGlzIGFuIGFkdmFuY2VkIG9wdGlvbi4gUGFzc2VkIHZhbHVlcyBhcmUgdXNlZCB3aXRob3V0IHZhbGlkYXRpb24uXHJcbiAgICAgICAgcGFyc2VkLmRvY3VtZW50RWxlbWVudCA9IGVudHJ5O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRlc3RDc3NQcmVmaXgocGFyc2VkLCBlbnRyeSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgZW50cnkgIT09IFwic3RyaW5nXCIgJiYgZW50cnkgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Nzc1ByZWZpeCcgbXVzdCBiZSBhIHN0cmluZyBvciBgZmFsc2VgLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhcnNlZC5jc3NQcmVmaXggPSBlbnRyeTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0Q3NzQ2xhc3NlcyhwYXJzZWQsIGVudHJ5KSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdjc3NDbGFzc2VzJyBtdXN0IGJlIGFuIG9iamVjdC5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHBhcnNlZC5jc3NQcmVmaXggPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgcGFyc2VkLmNzc0NsYXNzZXMgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBlbnRyeSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlbnRyeS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcGFyc2VkLmNzc0NsYXNzZXNba2V5XSA9IHBhcnNlZC5jc3NQcmVmaXggKyBlbnRyeVtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGFyc2VkLmNzc0NsYXNzZXMgPSBlbnRyeTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGVzdCBhbGwgZGV2ZWxvcGVyIHNldHRpbmdzIGFuZCBwYXJzZSB0byBhc3N1bXB0aW9uLXNhZmUgdmFsdWVzLlxyXG4gICAgZnVuY3Rpb24gdGVzdE9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgICAgIC8vIFRvIHByb3ZlIGEgZml4IGZvciAjNTM3LCBmcmVlemUgb3B0aW9ucyBoZXJlLlxyXG4gICAgICAgIC8vIElmIHRoZSBvYmplY3QgaXMgbW9kaWZpZWQsIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxyXG4gICAgICAgIC8vIE9iamVjdC5mcmVlemUob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHZhciBwYXJzZWQgPSB7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMCxcclxuICAgICAgICAgICAgbGltaXQ6IDAsXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDAsXHJcbiAgICAgICAgICAgIGFuaW1hdGU6IHRydWUsXHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiAzMDAsXHJcbiAgICAgICAgICAgIGFyaWFGb3JtYXQ6IGRlZmF1bHRGb3JtYXR0ZXIsXHJcbiAgICAgICAgICAgIGZvcm1hdDogZGVmYXVsdEZvcm1hdHRlclxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFRlc3RzIGFyZSBleGVjdXRlZCBpbiB0aGUgb3JkZXIgdGhleSBhcmUgcHJlc2VudGVkIGhlcmUuXHJcbiAgICAgICAgdmFyIHRlc3RzID0ge1xyXG4gICAgICAgICAgICBzdGVwOiB7IHI6IGZhbHNlLCB0OiB0ZXN0U3RlcCB9LFxyXG4gICAgICAgICAgICBzdGFydDogeyByOiB0cnVlLCB0OiB0ZXN0U3RhcnQgfSxcclxuICAgICAgICAgICAgY29ubmVjdDogeyByOiB0cnVlLCB0OiB0ZXN0Q29ubmVjdCB9LFxyXG4gICAgICAgICAgICBkaXJlY3Rpb246IHsgcjogdHJ1ZSwgdDogdGVzdERpcmVjdGlvbiB9LFxyXG4gICAgICAgICAgICBzbmFwOiB7IHI6IGZhbHNlLCB0OiB0ZXN0U25hcCB9LFxyXG4gICAgICAgICAgICBhbmltYXRlOiB7IHI6IGZhbHNlLCB0OiB0ZXN0QW5pbWF0ZSB9LFxyXG4gICAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogeyByOiBmYWxzZSwgdDogdGVzdEFuaW1hdGlvbkR1cmF0aW9uIH0sXHJcbiAgICAgICAgICAgIHJhbmdlOiB7IHI6IHRydWUsIHQ6IHRlc3RSYW5nZSB9LFxyXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogeyByOiBmYWxzZSwgdDogdGVzdE9yaWVudGF0aW9uIH0sXHJcbiAgICAgICAgICAgIG1hcmdpbjogeyByOiBmYWxzZSwgdDogdGVzdE1hcmdpbiB9LFxyXG4gICAgICAgICAgICBsaW1pdDogeyByOiBmYWxzZSwgdDogdGVzdExpbWl0IH0sXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IHsgcjogZmFsc2UsIHQ6IHRlc3RQYWRkaW5nIH0sXHJcbiAgICAgICAgICAgIGJlaGF2aW91cjogeyByOiB0cnVlLCB0OiB0ZXN0QmVoYXZpb3VyIH0sXHJcbiAgICAgICAgICAgIGFyaWFGb3JtYXQ6IHsgcjogZmFsc2UsIHQ6IHRlc3RBcmlhRm9ybWF0IH0sXHJcbiAgICAgICAgICAgIGZvcm1hdDogeyByOiBmYWxzZSwgdDogdGVzdEZvcm1hdCB9LFxyXG4gICAgICAgICAgICB0b29sdGlwczogeyByOiBmYWxzZSwgdDogdGVzdFRvb2x0aXBzIH0sXHJcbiAgICAgICAgICAgIGtleWJvYXJkU3VwcG9ydDogeyByOiB0cnVlLCB0OiB0ZXN0S2V5Ym9hcmRTdXBwb3J0IH0sXHJcbiAgICAgICAgICAgIGRvY3VtZW50RWxlbWVudDogeyByOiBmYWxzZSwgdDogdGVzdERvY3VtZW50RWxlbWVudCB9LFxyXG4gICAgICAgICAgICBjc3NQcmVmaXg6IHsgcjogdHJ1ZSwgdDogdGVzdENzc1ByZWZpeCB9LFxyXG4gICAgICAgICAgICBjc3NDbGFzc2VzOiB7IHI6IHRydWUsIHQ6IHRlc3RDc3NDbGFzc2VzIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIGNvbm5lY3Q6IGZhbHNlLFxyXG4gICAgICAgICAgICBkaXJlY3Rpb246IFwibHRyXCIsXHJcbiAgICAgICAgICAgIGJlaGF2aW91cjogXCJ0YXBcIixcclxuICAgICAgICAgICAgb3JpZW50YXRpb246IFwiaG9yaXpvbnRhbFwiLFxyXG4gICAgICAgICAgICBrZXlib2FyZFN1cHBvcnQ6IHRydWUsXHJcbiAgICAgICAgICAgIGNzc1ByZWZpeDogXCJub1VpLVwiLFxyXG4gICAgICAgICAgICBjc3NDbGFzc2VzOiB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IFwidGFyZ2V0XCIsXHJcbiAgICAgICAgICAgICAgICBiYXNlOiBcImJhc2VcIixcclxuICAgICAgICAgICAgICAgIG9yaWdpbjogXCJvcmlnaW5cIixcclxuICAgICAgICAgICAgICAgIGhhbmRsZTogXCJoYW5kbGVcIixcclxuICAgICAgICAgICAgICAgIGhhbmRsZUxvd2VyOiBcImhhbmRsZS1sb3dlclwiLFxyXG4gICAgICAgICAgICAgICAgaGFuZGxlVXBwZXI6IFwiaGFuZGxlLXVwcGVyXCIsXHJcbiAgICAgICAgICAgICAgICB0b3VjaEFyZWE6IFwidG91Y2gtYXJlYVwiLFxyXG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbDogXCJob3Jpem9udGFsXCIsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogXCJ2ZXJ0aWNhbFwiLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCJiYWNrZ3JvdW5kXCIsXHJcbiAgICAgICAgICAgICAgICBjb25uZWN0OiBcImNvbm5lY3RcIixcclxuICAgICAgICAgICAgICAgIGNvbm5lY3RzOiBcImNvbm5lY3RzXCIsXHJcbiAgICAgICAgICAgICAgICBsdHI6IFwibHRyXCIsXHJcbiAgICAgICAgICAgICAgICBydGw6IFwicnRsXCIsXHJcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IFwiZHJhZ2dhYmxlXCIsXHJcbiAgICAgICAgICAgICAgICBkcmFnOiBcInN0YXRlLWRyYWdcIixcclxuICAgICAgICAgICAgICAgIHRhcDogXCJzdGF0ZS10YXBcIixcclxuICAgICAgICAgICAgICAgIGFjdGl2ZTogXCJhY3RpdmVcIixcclxuICAgICAgICAgICAgICAgIHRvb2x0aXA6IFwidG9vbHRpcFwiLFxyXG4gICAgICAgICAgICAgICAgcGlwczogXCJwaXBzXCIsXHJcbiAgICAgICAgICAgICAgICBwaXBzSG9yaXpvbnRhbDogXCJwaXBzLWhvcml6b250YWxcIixcclxuICAgICAgICAgICAgICAgIHBpcHNWZXJ0aWNhbDogXCJwaXBzLXZlcnRpY2FsXCIsXHJcbiAgICAgICAgICAgICAgICBtYXJrZXI6IFwibWFya2VyXCIsXHJcbiAgICAgICAgICAgICAgICBtYXJrZXJIb3Jpem9udGFsOiBcIm1hcmtlci1ob3Jpem9udGFsXCIsXHJcbiAgICAgICAgICAgICAgICBtYXJrZXJWZXJ0aWNhbDogXCJtYXJrZXItdmVydGljYWxcIixcclxuICAgICAgICAgICAgICAgIG1hcmtlck5vcm1hbDogXCJtYXJrZXItbm9ybWFsXCIsXHJcbiAgICAgICAgICAgICAgICBtYXJrZXJMYXJnZTogXCJtYXJrZXItbGFyZ2VcIixcclxuICAgICAgICAgICAgICAgIG1hcmtlclN1YjogXCJtYXJrZXItc3ViXCIsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCJ2YWx1ZVwiLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVIb3Jpem9udGFsOiBcInZhbHVlLWhvcml6b250YWxcIixcclxuICAgICAgICAgICAgICAgIHZhbHVlVmVydGljYWw6IFwidmFsdWUtdmVydGljYWxcIixcclxuICAgICAgICAgICAgICAgIHZhbHVlTm9ybWFsOiBcInZhbHVlLW5vcm1hbFwiLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVMYXJnZTogXCJ2YWx1ZS1sYXJnZVwiLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVTdWI6IFwidmFsdWUtc3ViXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEFyaWFGb3JtYXQgZGVmYXVsdHMgdG8gcmVndWxhciBmb3JtYXQsIGlmIGFueS5cclxuICAgICAgICBpZiAob3B0aW9ucy5mb3JtYXQgJiYgIW9wdGlvbnMuYXJpYUZvcm1hdCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmFyaWFGb3JtYXQgPSBvcHRpb25zLmZvcm1hdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJ1biBhbGwgb3B0aW9ucyB0aHJvdWdoIGEgdGVzdGluZyBtZWNoYW5pc20gdG8gZW5zdXJlIGNvcnJlY3RcclxuICAgICAgICAvLyBpbnB1dC4gSXQgc2hvdWxkIGJlIG5vdGVkIHRoYXQgb3B0aW9ucyBtaWdodCBnZXQgbW9kaWZpZWQgdG9cclxuICAgICAgICAvLyBiZSBoYW5kbGVkIHByb3Blcmx5LiBFLmcuIHdyYXBwaW5nIGludGVnZXJzIGluIGFycmF5cy5cclxuICAgICAgICBPYmplY3Qua2V5cyh0ZXN0cykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBvcHRpb24gaXNuJ3Qgc2V0LCBidXQgaXQgaXMgcmVxdWlyZWQsIHRocm93IGFuIGVycm9yLlxyXG4gICAgICAgICAgICBpZiAoIWlzU2V0KG9wdGlvbnNbbmFtZV0pICYmIGRlZmF1bHRzW25hbWVdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXN0c1tuYW1lXS5yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnXCIgKyBuYW1lICsgXCInIGlzIHJlcXVpcmVkLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGVzdHNbbmFtZV0udChwYXJzZWQsICFpc1NldChvcHRpb25zW25hbWVdKSA/IGRlZmF1bHRzW25hbWVdIDogb3B0aW9uc1tuYW1lXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEZvcndhcmQgcGlwcyBvcHRpb25zXHJcbiAgICAgICAgcGFyc2VkLnBpcHMgPSBvcHRpb25zLnBpcHM7XHJcblxyXG4gICAgICAgIC8vIEFsbCByZWNlbnQgYnJvd3NlcnMgYWNjZXB0IHVucHJlZml4ZWQgdHJhbnNmb3JtLlxyXG4gICAgICAgIC8vIFdlIG5lZWQgLW1zLSBmb3IgSUU5IGFuZCAtd2Via2l0LSBmb3Igb2xkZXIgQW5kcm9pZDtcclxuICAgICAgICAvLyBBc3N1bWUgdXNlIG9mIC13ZWJraXQtIGlmIHVucHJlZml4ZWQgYW5kIC1tcy0gYXJlIG5vdCBzdXBwb3J0ZWQuXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9jYW5pdXNlLmNvbS8jZmVhdD10cmFuc2Zvcm1zMmRcclxuICAgICAgICB2YXIgZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdmFyIG1zUHJlZml4ID0gZC5zdHlsZS5tc1RyYW5zZm9ybSAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHZhciBub1ByZWZpeCA9IGQuc3R5bGUudHJhbnNmb3JtICE9PSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIHBhcnNlZC50cmFuc2Zvcm1SdWxlID0gbm9QcmVmaXggPyBcInRyYW5zZm9ybVwiIDogbXNQcmVmaXggPyBcIm1zVHJhbnNmb3JtXCIgOiBcIndlYmtpdFRyYW5zZm9ybVwiO1xyXG5cclxuICAgICAgICAvLyBQaXBzIGRvbid0IG1vdmUsIHNvIHdlIGNhbiBwbGFjZSB0aGVtIHVzaW5nIGxlZnQvdG9wLlxyXG4gICAgICAgIHZhciBzdHlsZXMgPSBbW1wibGVmdFwiLCBcInRvcFwiXSwgW1wicmlnaHRcIiwgXCJib3R0b21cIl1dO1xyXG5cclxuICAgICAgICBwYXJzZWQuc3R5bGUgPSBzdHlsZXNbcGFyc2VkLmRpcl1bcGFyc2VkLm9ydF07XHJcblxyXG4gICAgICAgIHJldHVybiBwYXJzZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy9lbmRyZWdpb25cclxuXHJcbiAgICBmdW5jdGlvbiBzY29wZSh0YXJnZXQsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucykge1xyXG4gICAgICAgIHZhciBhY3Rpb25zID0gZ2V0QWN0aW9ucygpO1xyXG4gICAgICAgIHZhciBzdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSA9IGdldFN1cHBvcnRzVG91Y2hBY3Rpb25Ob25lKCk7XHJcbiAgICAgICAgdmFyIHN1cHBvcnRzUGFzc2l2ZSA9IHN1cHBvcnRzVG91Y2hBY3Rpb25Ob25lICYmIGdldFN1cHBvcnRzUGFzc2l2ZSgpO1xyXG5cclxuICAgICAgICAvLyBBbGwgdmFyaWFibGVzIGxvY2FsIHRvICdzY29wZScgYXJlIHByZWZpeGVkIHdpdGggJ3Njb3BlXydcclxuXHJcbiAgICAgICAgLy8gU2xpZGVyIERPTSBOb2Rlc1xyXG4gICAgICAgIHZhciBzY29wZV9UYXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgdmFyIHNjb3BlX0Jhc2U7XHJcbiAgICAgICAgdmFyIHNjb3BlX0hhbmRsZXM7XHJcbiAgICAgICAgdmFyIHNjb3BlX0Nvbm5lY3RzO1xyXG4gICAgICAgIHZhciBzY29wZV9QaXBzO1xyXG4gICAgICAgIHZhciBzY29wZV9Ub29sdGlwcztcclxuXHJcbiAgICAgICAgLy8gU2xpZGVyIHN0YXRlIHZhbHVlc1xyXG4gICAgICAgIHZhciBzY29wZV9TcGVjdHJ1bSA9IG9wdGlvbnMuc3BlY3RydW07XHJcbiAgICAgICAgdmFyIHNjb3BlX1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgIHZhciBzY29wZV9Mb2NhdGlvbnMgPSBbXTtcclxuICAgICAgICB2YXIgc2NvcGVfSGFuZGxlTnVtYmVycyA9IFtdO1xyXG4gICAgICAgIHZhciBzY29wZV9BY3RpdmVIYW5kbGVzQ291bnQgPSAwO1xyXG4gICAgICAgIHZhciBzY29wZV9FdmVudHMgPSB7fTtcclxuXHJcbiAgICAgICAgLy8gRXhwb3NlZCBBUElcclxuICAgICAgICB2YXIgc2NvcGVfU2VsZjtcclxuXHJcbiAgICAgICAgLy8gRG9jdW1lbnQgTm9kZXNcclxuICAgICAgICB2YXIgc2NvcGVfRG9jdW1lbnQgPSB0YXJnZXQub3duZXJEb2N1bWVudDtcclxuICAgICAgICB2YXIgc2NvcGVfRG9jdW1lbnRFbGVtZW50ID0gb3B0aW9ucy5kb2N1bWVudEVsZW1lbnQgfHwgc2NvcGVfRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgICAgIHZhciBzY29wZV9Cb2R5ID0gc2NvcGVfRG9jdW1lbnQuYm9keTtcclxuXHJcbiAgICAgICAgLy8gUGlwcyBjb25zdGFudHNcclxuICAgICAgICB2YXIgUElQU19OT05FID0gLTE7XHJcbiAgICAgICAgdmFyIFBJUFNfTk9fVkFMVUUgPSAwO1xyXG4gICAgICAgIHZhciBQSVBTX0xBUkdFX1ZBTFVFID0gMTtcclxuICAgICAgICB2YXIgUElQU19TTUFMTF9WQUxVRSA9IDI7XHJcblxyXG4gICAgICAgIC8vIEZvciBob3Jpem9udGFsIHNsaWRlcnMgaW4gc3RhbmRhcmQgbHRyIGRvY3VtZW50cyxcclxuICAgICAgICAvLyBtYWtlIC5ub1VpLW9yaWdpbiBvdmVyZmxvdyB0byB0aGUgbGVmdCBzbyB0aGUgZG9jdW1lbnQgZG9lc24ndCBzY3JvbGwuXHJcbiAgICAgICAgdmFyIHNjb3BlX0Rpck9mZnNldCA9IHNjb3BlX0RvY3VtZW50LmRpciA9PT0gXCJydGxcIiB8fCBvcHRpb25zLm9ydCA9PT0gMSA/IDAgOiAxMDA7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZXMgYSBub2RlLCBhZGRzIGl0IHRvIHRhcmdldCwgcmV0dXJucyB0aGUgbmV3IG5vZGUuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkTm9kZVRvKGFkZFRhcmdldCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBkaXYgPSBzY29wZV9Eb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoZGl2LCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhZGRUYXJnZXQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkaXY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBcHBlbmQgYSBvcmlnaW4gdG8gdGhlIGJhc2VcclxuICAgICAgICBmdW5jdGlvbiBhZGRPcmlnaW4oYmFzZSwgaGFuZGxlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmlnaW4gPSBhZGROb2RlVG8oYmFzZSwgb3B0aW9ucy5jc3NDbGFzc2VzLm9yaWdpbik7XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBhZGROb2RlVG8ob3JpZ2luLCBvcHRpb25zLmNzc0NsYXNzZXMuaGFuZGxlKTtcclxuXHJcbiAgICAgICAgICAgIGFkZE5vZGVUbyhoYW5kbGUsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50b3VjaEFyZWEpO1xyXG5cclxuICAgICAgICAgICAgaGFuZGxlLnNldEF0dHJpYnV0ZShcImRhdGEtaGFuZGxlXCIsIGhhbmRsZU51bWJlcik7XHJcblxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5rZXlib2FyZFN1cHBvcnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvR2xvYmFsX2F0dHJpYnV0ZXMvdGFiaW5kZXhcclxuICAgICAgICAgICAgICAgIC8vIDAgPSBmb2N1c2FibGUgYW5kIHJlYWNoYWJsZVxyXG4gICAgICAgICAgICAgICAgaGFuZGxlLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcclxuICAgICAgICAgICAgICAgIGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudEtleWRvd24oZXZlbnQsIGhhbmRsZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaGFuZGxlLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJzbGlkZXJcIik7XHJcbiAgICAgICAgICAgIGhhbmRsZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLW9yaWVudGF0aW9uXCIsIG9wdGlvbnMub3J0ID8gXCJ2ZXJ0aWNhbFwiIDogXCJob3Jpem9udGFsXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGhhbmRsZU51bWJlciA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoaGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuaGFuZGxlTG93ZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZU51bWJlciA9PT0gb3B0aW9ucy5oYW5kbGVzIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoaGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuaGFuZGxlVXBwZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSW5zZXJ0IG5vZGVzIGZvciBjb25uZWN0IGVsZW1lbnRzXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkQ29ubmVjdChiYXNlLCBhZGQpIHtcclxuICAgICAgICAgICAgaWYgKCFhZGQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFkZE5vZGVUbyhiYXNlLCBvcHRpb25zLmNzc0NsYXNzZXMuY29ubmVjdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBZGQgaGFuZGxlcyB0byB0aGUgc2xpZGVyIGJhc2UuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkRWxlbWVudHMoY29ubmVjdE9wdGlvbnMsIGJhc2UpIHtcclxuICAgICAgICAgICAgdmFyIGNvbm5lY3RCYXNlID0gYWRkTm9kZVRvKGJhc2UsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5jb25uZWN0cyk7XHJcblxyXG4gICAgICAgICAgICBzY29wZV9IYW5kbGVzID0gW107XHJcbiAgICAgICAgICAgIHNjb3BlX0Nvbm5lY3RzID0gW107XHJcblxyXG4gICAgICAgICAgICBzY29wZV9Db25uZWN0cy5wdXNoKGFkZENvbm5lY3QoY29ubmVjdEJhc2UsIGNvbm5lY3RPcHRpb25zWzBdKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBbOjo6Ok89PT09Tz09PT1PPT09PV1cclxuICAgICAgICAgICAgLy8gY29ubmVjdE9wdGlvbnMgPSBbMCwgMSwgMSwgMV1cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5oYW5kbGVzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIEtlZXAgYSBsaXN0IG9mIGFsbCBhZGRlZCBoYW5kbGVzLlxyXG4gICAgICAgICAgICAgICAgc2NvcGVfSGFuZGxlcy5wdXNoKGFkZE9yaWdpbihiYXNlLCBpKSk7XHJcbiAgICAgICAgICAgICAgICBzY29wZV9IYW5kbGVOdW1iZXJzW2ldID0gaTtcclxuICAgICAgICAgICAgICAgIHNjb3BlX0Nvbm5lY3RzLnB1c2goYWRkQ29ubmVjdChjb25uZWN0QmFzZSwgY29ubmVjdE9wdGlvbnNbaSArIDFdKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgYSBzaW5nbGUgc2xpZGVyLlxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZFNsaWRlcihhZGRUYXJnZXQpIHtcclxuICAgICAgICAgICAgLy8gQXBwbHkgY2xhc3NlcyBhbmQgZGF0YSB0byB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICBhZGRDbGFzcyhhZGRUYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50YXJnZXQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlyID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhhZGRUYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5sdHIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoYWRkVGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMucnRsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMub3J0ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhhZGRUYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5ob3Jpem9udGFsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFkZENsYXNzKGFkZFRhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnZlcnRpY2FsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFkZE5vZGVUbyhhZGRUYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5iYXNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZFRvb2x0aXAoaGFuZGxlLCBoYW5kbGVOdW1iZXIpIHtcclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLnRvb2x0aXBzW2hhbmRsZU51bWJlcl0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFkZE5vZGVUbyhoYW5kbGUuZmlyc3RDaGlsZCwgb3B0aW9ucy5jc3NDbGFzc2VzLnRvb2x0aXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNTbGlkZXJEaXNhYmxlZCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNjb3BlX1RhcmdldC5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERpc2FibGUgdGhlIHNsaWRlciBkcmFnZ2luZyBpZiBhbnkgaGFuZGxlIGlzIGRpc2FibGVkXHJcbiAgICAgICAgZnVuY3Rpb24gaXNIYW5kbGVEaXNhYmxlZChoYW5kbGVOdW1iZXIpIHtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZU9yaWdpbiA9IHNjb3BlX0hhbmRsZXNbaGFuZGxlTnVtYmVyXTtcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZU9yaWdpbi5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVRvb2x0aXBzKCkge1xyXG4gICAgICAgICAgICBpZiAoc2NvcGVfVG9vbHRpcHMpIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50KFwidXBkYXRlLnRvb2x0aXBzXCIpO1xyXG4gICAgICAgICAgICAgICAgc2NvcGVfVG9vbHRpcHMuZm9yRWFjaChmdW5jdGlvbih0b29sdGlwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb2x0aXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudCh0b29sdGlwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHNjb3BlX1Rvb2x0aXBzID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVGhlIHRvb2x0aXBzIG9wdGlvbiBpcyBhIHNob3J0aGFuZCBmb3IgdXNpbmcgdGhlICd1cGRhdGUnIGV2ZW50LlxyXG4gICAgICAgIGZ1bmN0aW9uIHRvb2x0aXBzKCkge1xyXG4gICAgICAgICAgICByZW1vdmVUb29sdGlwcygpO1xyXG5cclxuICAgICAgICAgICAgLy8gVG9vbHRpcHMgYXJlIGFkZGVkIHdpdGggb3B0aW9ucy50b29sdGlwcyBpbiBvcmlnaW5hbCBvcmRlci5cclxuICAgICAgICAgICAgc2NvcGVfVG9vbHRpcHMgPSBzY29wZV9IYW5kbGVzLm1hcChhZGRUb29sdGlwKTtcclxuXHJcbiAgICAgICAgICAgIGJpbmRFdmVudChcInVwZGF0ZS50b29sdGlwc1wiLCBmdW5jdGlvbih2YWx1ZXMsIGhhbmRsZU51bWJlciwgdW5lbmNvZGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNjb3BlX1Rvb2x0aXBzW2hhbmRsZU51bWJlcl0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gdmFsdWVzW2hhbmRsZU51bWJlcl07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudG9vbHRpcHNbaGFuZGxlTnVtYmVyXSAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gb3B0aW9ucy50b29sdGlwc1toYW5kbGVOdW1iZXJdLnRvKHVuZW5jb2RlZFtoYW5kbGVOdW1iZXJdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzY29wZV9Ub29sdGlwc1toYW5kbGVOdW1iZXJdLmlubmVySFRNTCA9IGZvcm1hdHRlZFZhbHVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFyaWEoKSB7XHJcbiAgICAgICAgICAgIGJpbmRFdmVudChcInVwZGF0ZVwiLCBmdW5jdGlvbih2YWx1ZXMsIGhhbmRsZU51bWJlciwgdW5lbmNvZGVkLCB0YXAsIHBvc2l0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIEFyaWEgVmFsdWVzIGZvciBhbGwgaGFuZGxlcywgYXMgYSBjaGFuZ2UgaW4gb25lIGNoYW5nZXMgbWluIGFuZCBtYXggdmFsdWVzIGZvciB0aGUgbmV4dC5cclxuICAgICAgICAgICAgICAgIHNjb3BlX0hhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGUgPSBzY29wZV9IYW5kbGVzW2luZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbiA9IGNoZWNrSGFuZGxlUG9zaXRpb24oc2NvcGVfTG9jYXRpb25zLCBpbmRleCwgMCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heCA9IGNoZWNrSGFuZGxlUG9zaXRpb24oc2NvcGVfTG9jYXRpb25zLCBpbmRleCwgMTAwLCB0cnVlLCB0cnVlLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IHBvc2l0aW9uc1tpbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdHRlZCB2YWx1ZSBmb3IgZGlzcGxheVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gb3B0aW9ucy5hcmlhRm9ybWF0LnRvKHVuZW5jb2RlZFtpbmRleF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBNYXAgdG8gc2xpZGVyIHJhbmdlIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IHNjb3BlX1NwZWN0cnVtLmZyb21TdGVwcGluZyhtaW4pLnRvRml4ZWQoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gc2NvcGVfU3BlY3RydW0uZnJvbVN0ZXBwaW5nKG1heCkudG9GaXhlZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBub3cgPSBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcobm93KS50b0ZpeGVkKDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGUuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKFwiYXJpYS12YWx1ZW1pblwiLCBtaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXZhbHVlbWF4XCIsIG1heCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZShcImFyaWEtdmFsdWVub3dcIiwgbm93KTtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGUuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKFwiYXJpYS12YWx1ZXRleHRcIiwgdGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRHcm91cChtb2RlLCB2YWx1ZXMsIHN0ZXBwZWQpIHtcclxuICAgICAgICAgICAgLy8gVXNlIHRoZSByYW5nZS5cclxuICAgICAgICAgICAgaWYgKG1vZGUgPT09IFwicmFuZ2VcIiB8fCBtb2RlID09PSBcInN0ZXBzXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzY29wZV9TcGVjdHJ1bS54VmFsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gXCJjb3VudFwiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVzIDwgMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3ZhbHVlcycgKD49IDIpIHJlcXVpcmVkIGZvciBtb2RlICdjb3VudCcuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIERpdmlkZSAwIC0gMTAwIGluICdjb3VudCcgcGFydHMuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSB2YWx1ZXMgLSAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNwcmVhZCA9IDEwMCAvIGludGVydmFsO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhbHVlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIExpc3QgdGhlc2UgcGFydHMgYW5kIGhhdmUgdGhlbSBoYW5kbGVkIGFzICdwb3NpdGlvbnMnLlxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGludGVydmFsLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbaW50ZXJ2YWxdID0gaW50ZXJ2YWwgKiBzcHJlYWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goMTAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtb2RlID0gXCJwb3NpdGlvbnNcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1vZGUgPT09IFwicG9zaXRpb25zXCIpIHtcclxuICAgICAgICAgICAgICAgIC8vIE1hcCBhbGwgcGVyY2VudGFnZXMgdG8gb24tcmFuZ2UgdmFsdWVzLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5tYXAoZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGVfU3BlY3RydW0uZnJvbVN0ZXBwaW5nKHN0ZXBwZWQgPyBzY29wZV9TcGVjdHJ1bS5nZXRTdGVwKHZhbHVlKSA6IHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gXCJ2YWx1ZXNcIikge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHZhbHVlIG11c3QgYmUgc3RlcHBlZCwgaXQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgcGVyY2VudGFnZSBmaXJzdC5cclxuICAgICAgICAgICAgICAgIGlmIChzdGVwcGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5tYXAoZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCB0byBwZXJjZW50YWdlLCBhcHBseSBzdGVwLCByZXR1cm4gdG8gdmFsdWUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcoc2NvcGVfU3BlY3RydW0uZ2V0U3RlcChzY29wZV9TcGVjdHJ1bS50b1N0ZXBwaW5nKHZhbHVlKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgd2UgY2FuIHNpbXBseSB1c2UgdGhlIHZhbHVlcy5cclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlU3ByZWFkKGRlbnNpdHksIG1vZGUsIGdyb3VwKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNhZmVJbmNyZW1lbnQodmFsdWUsIGluY3JlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXZvaWQgZmxvYXRpbmcgcG9pbnQgdmFyaWFuY2UgYnkgZHJvcHBpbmcgdGhlIHNtYWxsZXN0IGRlY2ltYWwgcGxhY2VzLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh2YWx1ZSArIGluY3JlbWVudCkudG9GaXhlZCg3KSAvIDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0ge307XHJcbiAgICAgICAgICAgIHZhciBmaXJzdEluUmFuZ2UgPSBzY29wZV9TcGVjdHJ1bS54VmFsWzBdO1xyXG4gICAgICAgICAgICB2YXIgbGFzdEluUmFuZ2UgPSBzY29wZV9TcGVjdHJ1bS54VmFsW3Njb3BlX1NwZWN0cnVtLnhWYWwubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIHZhciBpZ25vcmVGaXJzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgaWdub3JlTGFzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgcHJldlBjdCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBjb3B5IG9mIHRoZSBncm91cCwgc29ydCBpdCBhbmQgZmlsdGVyIGF3YXkgYWxsIGR1cGxpY2F0ZXMuXHJcbiAgICAgICAgICAgIGdyb3VwID0gdW5pcXVlKFxyXG4gICAgICAgICAgICAgICAgZ3JvdXAuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSByYW5nZSBzdGFydHMgd2l0aCB0aGUgZmlyc3QgZWxlbWVudC5cclxuICAgICAgICAgICAgaWYgKGdyb3VwWzBdICE9PSBmaXJzdEluUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwLnVuc2hpZnQoZmlyc3RJblJhbmdlKTtcclxuICAgICAgICAgICAgICAgIGlnbm9yZUZpcnN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTGlrZXdpc2UgZm9yIHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgaWYgKGdyb3VwW2dyb3VwLmxlbmd0aCAtIDFdICE9PSBsYXN0SW5SYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAucHVzaChsYXN0SW5SYW5nZSk7XHJcbiAgICAgICAgICAgICAgICBpZ25vcmVMYXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ3JvdXAuZm9yRWFjaChmdW5jdGlvbihjdXJyZW50LCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IHN0ZXAgYW5kIHRoZSBsb3dlciArIHVwcGVyIHBvc2l0aW9ucy5cclxuICAgICAgICAgICAgICAgIHZhciBzdGVwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcTtcclxuICAgICAgICAgICAgICAgIHZhciBsb3cgPSBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgdmFyIGhpZ2ggPSBncm91cFtpbmRleCArIDFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1BjdDtcclxuICAgICAgICAgICAgICAgIHZhciBwY3REaWZmZXJlbmNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBjdFBvcztcclxuICAgICAgICAgICAgICAgIHZhciB0eXBlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ZXBzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlYWxTdGVwcztcclxuICAgICAgICAgICAgICAgIHZhciBzdGVwU2l6ZTtcclxuICAgICAgICAgICAgICAgIHZhciBpc1N0ZXBzID0gbW9kZSA9PT0gXCJzdGVwc1wiO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFdoZW4gdXNpbmcgJ3N0ZXBzJyBtb2RlLCB1c2UgdGhlIHByb3ZpZGVkIHN0ZXBzLlxyXG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSdsbCBzdGVwIG9uIHRvIHRoZSBuZXh0IHN1YnJhbmdlLlxyXG4gICAgICAgICAgICAgICAgaWYgKGlzU3RlcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGVwID0gc2NvcGVfU3BlY3RydW0ueE51bVN0ZXBzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IHRvIGEgJ2Z1bGwnIHN0ZXAuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0ZXApIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGVwID0gaGlnaCAtIGxvdztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBMb3cgY2FuIGJlIDAsIHNvIHRlc3QgZm9yIGZhbHNlLiBJZiBoaWdoIGlzIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBhdCB0aGUgbGFzdCBzdWJyYW5nZS4gSW5kZXggMCBpcyBhbHJlYWR5IGhhbmRsZWQuXHJcbiAgICAgICAgICAgICAgICBpZiAobG93ID09PSBmYWxzZSB8fCBoaWdoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHN0ZXAgaXNuJ3QgMCwgd2hpY2ggd291bGQgY2F1c2UgYW4gaW5maW5pdGUgbG9vcCAoIzY1NClcclxuICAgICAgICAgICAgICAgIHN0ZXAgPSBNYXRoLm1heChzdGVwLCAwLjAwMDAwMDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEZpbmQgYWxsIHN0ZXBzIGluIHRoZSBzdWJyYW5nZS5cclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IGxvdzsgaSA8PSBoaWdoOyBpID0gc2FmZUluY3JlbWVudChpLCBzdGVwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgcGVyY2VudGFnZSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgc3RlcCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHNpemUgZm9yIHRoZSBzdWJyYW5nZS5cclxuICAgICAgICAgICAgICAgICAgICBuZXdQY3QgPSBzY29wZV9TcGVjdHJ1bS50b1N0ZXBwaW5nKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBjdERpZmZlcmVuY2UgPSBuZXdQY3QgLSBwcmV2UGN0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdGVwcyA9IHBjdERpZmZlcmVuY2UgLyBkZW5zaXR5O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxTdGVwcyA9IE1hdGgucm91bmQoc3RlcHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHJhdGlvIHJlcHJlc2VudHMgdGhlIGFtb3VudCBvZiBwZXJjZW50YWdlLXNwYWNlIGEgcG9pbnQgaW5kaWNhdGVzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBhIGRlbnNpdHkgMSB0aGUgcG9pbnRzL3BlcmNlbnRhZ2UgPSAxLiBGb3IgZGVuc2l0eSAyLCB0aGF0IHBlcmNlbnRhZ2UgbmVlZHMgdG8gYmUgcmUtZGl2aWRlZC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBSb3VuZCB0aGUgcGVyY2VudGFnZSBvZmZzZXQgdG8gYW4gZXZlbiBudW1iZXIsIHRoZW4gZGl2aWRlIGJ5IHR3b1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIHNwcmVhZCB0aGUgb2Zmc2V0IG9uIGJvdGggc2lkZXMgb2YgdGhlIHJhbmdlLlxyXG4gICAgICAgICAgICAgICAgICAgIHN0ZXBTaXplID0gcGN0RGlmZmVyZW5jZSAvIHJlYWxTdGVwcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGl2aWRlIGFsbCBwb2ludHMgZXZlbmx5LCBhZGRpbmcgdGhlIGNvcnJlY3QgbnVtYmVyIHRvIHRoaXMgc3VicmFuZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUnVuIHVwIHRvIDw9IHNvIHRoYXQgMTAwJSBnZXRzIGEgcG9pbnQsIGV2ZW50IGlmIGlnbm9yZUxhc3QgaXMgc2V0LlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAocSA9IDE7IHEgPD0gcmVhbFN0ZXBzOyBxICs9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJhdGlvIGJldHdlZW4gdGhlIHJvdW5kZWQgdmFsdWUgYW5kIHRoZSBhY3R1YWwgc2l6ZSBtaWdodCBiZSB+MSUgb2ZmLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3JyZWN0IHRoZSBwZXJjZW50YWdlIG9mZnNldCBieSB0aGUgbnVtYmVyIG9mIHBvaW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwZXIgc3VicmFuZ2UuIGRlbnNpdHkgPSAxIHdpbGwgcmVzdWx0IGluIDEwMCBwb2ludHMgb24gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZ1bGwgcmFuZ2UsIDIgZm9yIDUwLCA0IGZvciAyNSwgZXRjLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwY3RQb3MgPSBwcmV2UGN0ICsgcSAqIHN0ZXBTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleGVzW3BjdFBvcy50b0ZpeGVkKDUpXSA9IFtzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcocGN0UG9zKSwgMF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIHBvaW50IHR5cGUuXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IGdyb3VwLmluZGV4T2YoaSkgPiAtMSA/IFBJUFNfTEFSR0VfVkFMVUUgOiBpc1N0ZXBzID8gUElQU19TTUFMTF9WQUxVRSA6IFBJUFNfTk9fVkFMVUU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEVuZm9yY2UgdGhlICdpZ25vcmVGaXJzdCcgb3B0aW9uIGJ5IG92ZXJ3cml0aW5nIHRoZSB0eXBlIGZvciAwLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5kZXggJiYgaWdub3JlRmlyc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShpID09PSBoaWdoICYmIGlnbm9yZUxhc3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlICd0eXBlJyBvZiB0aGlzIHBvaW50LiAwID0gcGxhaW4sIDEgPSByZWFsIHZhbHVlLCAyID0gc3RlcCB2YWx1ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhlc1tuZXdQY3QudG9GaXhlZCg1KV0gPSBbaSwgdHlwZV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHBlcmNlbnRhZ2UgY291bnQuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldlBjdCA9IG5ld1BjdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXhlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1hcmtpbmcoc3ByZWFkLCBmaWx0ZXJGdW5jLCBmb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzY29wZV9Eb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlU2l6ZUNsYXNzZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFsdWVTaXplQ2xhc3Nlc1tQSVBTX05PX1ZBTFVFXSA9IG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZU5vcm1hbDtcclxuICAgICAgICAgICAgdmFsdWVTaXplQ2xhc3Nlc1tQSVBTX0xBUkdFX1ZBTFVFXSA9IG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZUxhcmdlO1xyXG4gICAgICAgICAgICB2YWx1ZVNpemVDbGFzc2VzW1BJUFNfU01BTExfVkFMVUVdID0gb3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlU3ViO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1hcmtlclNpemVDbGFzc2VzID0gW107XHJcbiAgICAgICAgICAgIG1hcmtlclNpemVDbGFzc2VzW1BJUFNfTk9fVkFMVUVdID0gb3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlck5vcm1hbDtcclxuICAgICAgICAgICAgbWFya2VyU2l6ZUNsYXNzZXNbUElQU19MQVJHRV9WQUxVRV0gPSBvcHRpb25zLmNzc0NsYXNzZXMubWFya2VyTGFyZ2U7XHJcbiAgICAgICAgICAgIG1hcmtlclNpemVDbGFzc2VzW1BJUFNfU01BTExfVkFMVUVdID0gb3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlclN1YjtcclxuXHJcbiAgICAgICAgICAgIHZhciB2YWx1ZU9yaWVudGF0aW9uQ2xhc3NlcyA9IFtvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVIb3Jpem9udGFsLCBvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVWZXJ0aWNhbF07XHJcbiAgICAgICAgICAgIHZhciBtYXJrZXJPcmllbnRhdGlvbkNsYXNzZXMgPSBbb3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlckhvcml6b250YWwsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJWZXJ0aWNhbF07XHJcblxyXG4gICAgICAgICAgICBhZGRDbGFzcyhlbGVtZW50LCBvcHRpb25zLmNzc0NsYXNzZXMucGlwcyk7XHJcbiAgICAgICAgICAgIGFkZENsYXNzKGVsZW1lbnQsIG9wdGlvbnMub3J0ID09PSAwID8gb3B0aW9ucy5jc3NDbGFzc2VzLnBpcHNIb3Jpem9udGFsIDogb3B0aW9ucy5jc3NDbGFzc2VzLnBpcHNWZXJ0aWNhbCk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRDbGFzc2VzKHR5cGUsIHNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBzb3VyY2UgPT09IG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBvcmllbnRhdGlvbkNsYXNzZXMgPSBhID8gdmFsdWVPcmllbnRhdGlvbkNsYXNzZXMgOiBtYXJrZXJPcmllbnRhdGlvbkNsYXNzZXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZUNsYXNzZXMgPSBhID8gdmFsdWVTaXplQ2xhc3NlcyA6IG1hcmtlclNpemVDbGFzc2VzO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzb3VyY2UgKyBcIiBcIiArIG9yaWVudGF0aW9uQ2xhc3Nlc1tvcHRpb25zLm9ydF0gKyBcIiBcIiArIHNpemVDbGFzc2VzW3R5cGVdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRTcHJlYWQob2Zmc2V0LCB2YWx1ZSwgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgdGhlIGZpbHRlciBmdW5jdGlvbiwgaWYgaXQgaXMgc2V0LlxyXG4gICAgICAgICAgICAgICAgdHlwZSA9IGZpbHRlckZ1bmMgPyBmaWx0ZXJGdW5jKHZhbHVlLCB0eXBlKSA6IHR5cGU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFBJUFNfTk9ORSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgYSBtYXJrZXIgZm9yIGV2ZXJ5IHBvaW50XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGFkZE5vZGVUbyhlbGVtZW50LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTmFtZSA9IGdldENsYXNzZXModHlwZSwgb3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlcik7XHJcbiAgICAgICAgICAgICAgICBub2RlLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gb2Zmc2V0ICsgXCIlXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVmFsdWVzIGFyZSBvbmx5IGFwcGVuZGVkIGZvciBwb2ludHMgbWFya2VkICcxJyBvciAnMicuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA+IFBJUFNfTk9fVkFMVUUpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gYWRkTm9kZVRvKGVsZW1lbnQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTmFtZSA9IGdldENsYXNzZXModHlwZSwgb3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShcImRhdGEtdmFsdWVcIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc3R5bGVbb3B0aW9ucy5zdHlsZV0gPSBvZmZzZXQgKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLmlubmVySFRNTCA9IGZvcm1hdHRlci50byh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFwcGVuZCBhbGwgcG9pbnRzLlxyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzcHJlYWQpLmZvckVhY2goZnVuY3Rpb24ob2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICBhZGRTcHJlYWQob2Zmc2V0LCBzcHJlYWRbb2Zmc2V0XVswXSwgc3ByZWFkW29mZnNldF1bMV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlUGlwcygpIHtcclxuICAgICAgICAgICAgaWYgKHNjb3BlX1BpcHMpIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnQoc2NvcGVfUGlwcyk7XHJcbiAgICAgICAgICAgICAgICBzY29wZV9QaXBzID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcGlwcyhncmlkKSB7XHJcbiAgICAgICAgICAgIC8vIEZpeCAjNjY5XHJcbiAgICAgICAgICAgIHJlbW92ZVBpcHMoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtb2RlID0gZ3JpZC5tb2RlO1xyXG4gICAgICAgICAgICB2YXIgZGVuc2l0eSA9IGdyaWQuZGVuc2l0eSB8fCAxO1xyXG4gICAgICAgICAgICB2YXIgZmlsdGVyID0gZ3JpZC5maWx0ZXIgfHwgZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBncmlkLnZhbHVlcyB8fCBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIHN0ZXBwZWQgPSBncmlkLnN0ZXBwZWQgfHwgZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBncm91cCA9IGdldEdyb3VwKG1vZGUsIHZhbHVlcywgc3RlcHBlZCk7XHJcbiAgICAgICAgICAgIHZhciBzcHJlYWQgPSBnZW5lcmF0ZVNwcmVhZChkZW5zaXR5LCBtb2RlLCBncm91cCk7XHJcbiAgICAgICAgICAgIHZhciBmb3JtYXQgPSBncmlkLmZvcm1hdCB8fCB7XHJcbiAgICAgICAgICAgICAgICB0bzogTWF0aC5yb3VuZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgc2NvcGVfUGlwcyA9IHNjb3BlX1RhcmdldC5hcHBlbmRDaGlsZChhZGRNYXJraW5nKHNwcmVhZCwgZmlsdGVyLCBmb3JtYXQpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzY29wZV9QaXBzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2hvcnRoYW5kIGZvciBiYXNlIGRpbWVuc2lvbnMuXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZVNpemUoKSB7XHJcbiAgICAgICAgICAgIHZhciByZWN0ID0gc2NvcGVfQmFzZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgdmFyIGFsdCA9IFwib2Zmc2V0XCIgKyBbXCJXaWR0aFwiLCBcIkhlaWdodFwiXVtvcHRpb25zLm9ydF07XHJcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLm9ydCA9PT0gMCA/IHJlY3Qud2lkdGggfHwgc2NvcGVfQmFzZVthbHRdIDogcmVjdC5oZWlnaHQgfHwgc2NvcGVfQmFzZVthbHRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSGFuZGxlciBmb3IgYXR0YWNoaW5nIGV2ZW50cyB0cm91Z2ggYSBwcm94eS5cclxuICAgICAgICBmdW5jdGlvbiBhdHRhY2hFdmVudChldmVudHMsIGVsZW1lbnQsIGNhbGxiYWNrLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gJ2ZpbHRlcicgZXZlbnRzIHRvIHRoZSBzbGlkZXIuXHJcbiAgICAgICAgICAgIC8vIGVsZW1lbnQgaXMgYSBub2RlLCBub3QgYSBub2RlTGlzdFxyXG5cclxuICAgICAgICAgICAgdmFyIG1ldGhvZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGUgPSBmaXhFdmVudChlLCBkYXRhLnBhZ2VPZmZzZXQsIGRhdGEudGFyZ2V0IHx8IGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGZpeEV2ZW50IHJldHVybnMgZmFsc2UgaWYgdGhpcyBldmVudCBoYXMgYSBkaWZmZXJlbnQgdGFyZ2V0XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIGhhbmRsaW5nIChtdWx0aS0pIHRvdWNoIGV2ZW50cztcclxuICAgICAgICAgICAgICAgIGlmICghZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBkb05vdFJlamVjdCBpcyBwYXNzZWQgYnkgYWxsIGVuZCBldmVudHMgdG8gbWFrZSBzdXJlIHJlbGVhc2VkIHRvdWNoZXNcclxuICAgICAgICAgICAgICAgIC8vIGFyZSBub3QgcmVqZWN0ZWQsIGxlYXZpbmcgdGhlIHNsaWRlciBcInN0dWNrXCIgdG8gdGhlIGN1cnNvcjtcclxuICAgICAgICAgICAgICAgIGlmIChpc1NsaWRlckRpc2FibGVkKCkgJiYgIWRhdGEuZG9Ob3RSZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU3RvcCBpZiBhbiBhY3RpdmUgJ3RhcCcgdHJhbnNpdGlvbiBpcyB0YWtpbmcgcGxhY2UuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ2xhc3Moc2NvcGVfVGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMudGFwKSAmJiAhZGF0YS5kb05vdFJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgcmlnaHQgb3IgbWlkZGxlIGNsaWNrcyBvbiBzdGFydCAjNDU0XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRzID09PSBhY3Rpb25zLnN0YXJ0ICYmIGUuYnV0dG9ucyAhPT0gdW5kZWZpbmVkICYmIGUuYnV0dG9ucyA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWdub3JlIHJpZ2h0IG9yIG1pZGRsZSBjbGlja3Mgb24gc3RhcnQgIzQ1NFxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuaG92ZXIgJiYgZS5idXR0b25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vICdzdXBwb3J0c1Bhc3NpdmUnIGlzIG9ubHkgdHJ1ZSBpZiBhIGJyb3dzZXIgYWxzbyBzdXBwb3J0cyB0b3VjaC1hY3Rpb246IG5vbmUgaW4gQ1NTLlxyXG4gICAgICAgICAgICAgICAgLy8gaU9TIHNhZmFyaSBkb2VzIG5vdCwgc28gaXQgZG9lc24ndCBnZXQgdG8gYmVuZWZpdCBmcm9tIHBhc3NpdmUgc2Nyb2xsaW5nLiBpT1MgZG9lcyBzdXBwb3J0XHJcbiAgICAgICAgICAgICAgICAvLyB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbiwgYnV0IHRoYXQgYWxsb3dzIHBhbm5pbmcsIHdoaWNoIGJyZWFrc1xyXG4gICAgICAgICAgICAgICAgLy8gc2xpZGVycyBhZnRlciB6b29taW5nL29uIG5vbi1yZXNwb25zaXZlIHBhZ2VzLlxyXG4gICAgICAgICAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTMzMTEyXHJcbiAgICAgICAgICAgICAgICBpZiAoIXN1cHBvcnRzUGFzc2l2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlLmNhbGNQb2ludCA9IGUucG9pbnRzW29wdGlvbnMub3J0XTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDYWxsIHRoZSBldmVudCBoYW5kbGVyIHdpdGggdGhlIGV2ZW50IFsgYW5kIGFkZGl0aW9uYWwgZGF0YSBdLlxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZSwgZGF0YSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgbWV0aG9kcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gQmluZCBhIGNsb3N1cmUgb24gdGhlIHRhcmdldCBmb3IgZXZlcnkgZXZlbnQgdHlwZS5cclxuICAgICAgICAgICAgZXZlbnRzLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbWV0aG9kLCBzdXBwb3J0c1Bhc3NpdmUgPyB7IHBhc3NpdmU6IHRydWUgfSA6IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIG1ldGhvZHMucHVzaChbZXZlbnROYW1lLCBtZXRob2RdKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFByb3ZpZGUgYSBjbGVhbiBldmVudCB3aXRoIHN0YW5kYXJkaXplZCBvZmZzZXQgdmFsdWVzLlxyXG4gICAgICAgIGZ1bmN0aW9uIGZpeEV2ZW50KGUsIHBhZ2VPZmZzZXQsIGV2ZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIC8vIEZpbHRlciB0aGUgZXZlbnQgdG8gcmVnaXN0ZXIgdGhlIHR5cGUsIHdoaWNoIGNhbiBiZVxyXG4gICAgICAgICAgICAvLyB0b3VjaCwgbW91c2Ugb3IgcG9pbnRlci4gT2Zmc2V0IGNoYW5nZXMgbmVlZCB0byBiZVxyXG4gICAgICAgICAgICAvLyBtYWRlIG9uIGFuIGV2ZW50IHNwZWNpZmljIGJhc2lzLlxyXG4gICAgICAgICAgICB2YXIgdG91Y2ggPSBlLnR5cGUuaW5kZXhPZihcInRvdWNoXCIpID09PSAwO1xyXG4gICAgICAgICAgICB2YXIgbW91c2UgPSBlLnR5cGUuaW5kZXhPZihcIm1vdXNlXCIpID09PSAwO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnRlciA9IGUudHlwZS5pbmRleE9mKFwicG9pbnRlclwiKSA9PT0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciB4O1xyXG4gICAgICAgICAgICB2YXIgeTtcclxuXHJcbiAgICAgICAgICAgIC8vIElFMTAgaW1wbGVtZW50ZWQgcG9pbnRlciBldmVudHMgd2l0aCBhIHByZWZpeDtcclxuICAgICAgICAgICAgaWYgKGUudHlwZS5pbmRleE9mKFwiTVNQb2ludGVyXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVGhlIG9ubHkgdGhpbmcgb25lIGhhbmRsZSBzaG91bGQgYmUgY29uY2VybmVkIGFib3V0IGlzIHRoZSB0b3VjaGVzIHRoYXQgb3JpZ2luYXRlZCBvbiB0b3Agb2YgaXQuXHJcbiAgICAgICAgICAgIGlmICh0b3VjaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJucyB0cnVlIGlmIGEgdG91Y2ggb3JpZ2luYXRlZCBvbiB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICAgICAgdmFyIGlzVG91Y2hPblRhcmdldCA9IGZ1bmN0aW9uKGNoZWNrVG91Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tUb3VjaC50YXJnZXQgPT09IGV2ZW50VGFyZ2V0IHx8IGV2ZW50VGFyZ2V0LmNvbnRhaW5zKGNoZWNrVG91Y2gudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSW4gdGhlIGNhc2Ugb2YgdG91Y2hzdGFydCBldmVudHMsIHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoZXJlIGlzIHN0aWxsIG5vIG1vcmUgdGhhbiBvbmVcclxuICAgICAgICAgICAgICAgIC8vIHRvdWNoIG9uIHRoZSB0YXJnZXQgc28gd2UgbG9vayBhbW9uZ3N0IGFsbCB0b3VjaGVzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gXCJ0b3VjaHN0YXJ0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VG91Y2hlcyA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChlLnRvdWNoZXMsIGlzVG91Y2hPblRhcmdldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBzdXBwb3J0IG1vcmUgdGhhbiBvbmUgdG91Y2ggcGVyIGhhbmRsZS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSB0YXJnZXRUb3VjaGVzWzBdLnBhZ2VYO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgPSB0YXJnZXRUb3VjaGVzWzBdLnBhZ2VZO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbiB0aGUgb3RoZXIgY2FzZXMsIGZpbmQgb24gY2hhbmdlZFRvdWNoZXMgaXMgZW5vdWdoLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRUb3VjaCA9IEFycmF5LnByb3RvdHlwZS5maW5kLmNhbGwoZS5jaGFuZ2VkVG91Y2hlcywgaXNUb3VjaE9uVGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FuY2VsIGlmIHRoZSB0YXJnZXQgdG91Y2ggaGFzIG5vdCBtb3ZlZC5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFRvdWNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSB0YXJnZXRUb3VjaC5wYWdlWDtcclxuICAgICAgICAgICAgICAgICAgICB5ID0gdGFyZ2V0VG91Y2gucGFnZVk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBhZ2VPZmZzZXQgPSBwYWdlT2Zmc2V0IHx8IGdldFBhZ2VPZmZzZXQoc2NvcGVfRG9jdW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vdXNlIHx8IHBvaW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHggPSBlLmNsaWVudFggKyBwYWdlT2Zmc2V0Lng7XHJcbiAgICAgICAgICAgICAgICB5ID0gZS5jbGllbnRZICsgcGFnZU9mZnNldC55O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlLnBhZ2VPZmZzZXQgPSBwYWdlT2Zmc2V0O1xyXG4gICAgICAgICAgICBlLnBvaW50cyA9IFt4LCB5XTtcclxuICAgICAgICAgICAgZS5jdXJzb3IgPSBtb3VzZSB8fCBwb2ludGVyOyAvLyBGaXggIzQzNVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUcmFuc2xhdGUgYSBjb29yZGluYXRlIGluIHRoZSBkb2N1bWVudCB0byBhIHBlcmNlbnRhZ2Ugb24gdGhlIHNsaWRlclxyXG4gICAgICAgIGZ1bmN0aW9uIGNhbGNQb2ludFRvUGVyY2VudGFnZShjYWxjUG9pbnQpIHtcclxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gY2FsY1BvaW50IC0gb2Zmc2V0KHNjb3BlX0Jhc2UsIG9wdGlvbnMub3J0KTtcclxuICAgICAgICAgICAgdmFyIHByb3Bvc2FsID0gKGxvY2F0aW9uICogMTAwKSAvIGJhc2VTaXplKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBDbGFtcCBwcm9wb3NhbCBiZXR3ZWVuIDAlIGFuZCAxMDAlXHJcbiAgICAgICAgICAgIC8vIE91dC1vZi1ib3VuZCBjb29yZGluYXRlcyBtYXkgb2NjdXIgd2hlbiAubm9VaS1iYXNlIHBzZXVkby1lbGVtZW50c1xyXG4gICAgICAgICAgICAvLyBhcmUgdXNlZCAoZS5nLiBjb250YWluZWQgaGFuZGxlcyBmZWF0dXJlKVxyXG4gICAgICAgICAgICBwcm9wb3NhbCA9IGxpbWl0KHByb3Bvc2FsKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmRpciA/IDEwMCAtIHByb3Bvc2FsIDogcHJvcG9zYWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaW5kIGhhbmRsZSBjbG9zZXN0IHRvIGEgY2VydGFpbiBwZXJjZW50YWdlIG9uIHRoZSBzbGlkZXJcclxuICAgICAgICBmdW5jdGlvbiBnZXRDbG9zZXN0SGFuZGxlKHByb3Bvc2FsKSB7XHJcbiAgICAgICAgICAgIHZhciBjbG9zZXN0ID0gMTAwO1xyXG4gICAgICAgICAgICB2YXIgaGFuZGxlTnVtYmVyID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBzY29wZV9IYW5kbGVzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlLCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGlzYWJsZWQgaGFuZGxlcyBhcmUgaWdub3JlZFxyXG4gICAgICAgICAgICAgICAgaWYgKGlzSGFuZGxlRGlzYWJsZWQoaW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwb3MgPSBNYXRoLmFicyhzY29wZV9Mb2NhdGlvbnNbaW5kZXhdIC0gcHJvcG9zYWwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwb3MgPCBjbG9zZXN0IHx8IChwb3MgPT09IDEwMCAmJiBjbG9zZXN0ID09PSAxMDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlTnVtYmVyID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdCA9IHBvcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlTnVtYmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmlyZSAnZW5kJyB3aGVuIGEgbW91c2Ugb3IgcGVuIGxlYXZlcyB0aGUgZG9jdW1lbnQuXHJcbiAgICAgICAgZnVuY3Rpb24gZG9jdW1lbnRMZWF2ZShldmVudCwgZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJtb3VzZW91dFwiICYmIGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gXCJIVE1MXCIgJiYgZXZlbnQucmVsYXRlZFRhcmdldCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnRFbmQoZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBIYW5kbGUgbW92ZW1lbnQgb24gZG9jdW1lbnQgZm9yIGhhbmRsZSBhbmQgcmFuZ2UgZHJhZy5cclxuICAgICAgICBmdW5jdGlvbiBldmVudE1vdmUoZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gRml4ICM0OThcclxuICAgICAgICAgICAgLy8gQ2hlY2sgdmFsdWUgb2YgLmJ1dHRvbnMgaW4gJ3N0YXJ0JyB0byB3b3JrIGFyb3VuZCBhIGJ1ZyBpbiBJRTEwIG1vYmlsZSAoZGF0YS5idXR0b25zUHJvcGVydHkpLlxyXG4gICAgICAgICAgICAvLyBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzkyNzAwNS9tb2JpbGUtaWUxMC13aW5kb3dzLXBob25lLWJ1dHRvbnMtcHJvcGVydHktb2YtcG9pbnRlcm1vdmUtZXZlbnQtYWx3YXlzLXplcm9cclxuICAgICAgICAgICAgLy8gSUU5IGhhcyAuYnV0dG9ucyBhbmQgLndoaWNoIHplcm8gb24gbW91c2Vtb3ZlLlxyXG4gICAgICAgICAgICAvLyBGaXJlZm94IGJyZWFrcyB0aGUgc3BlYyBNRE4gZGVmaW5lcy5cclxuICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoXCJNU0lFIDlcIikgPT09IC0xICYmIGV2ZW50LmJ1dHRvbnMgPT09IDAgJiYgZGF0YS5idXR0b25zUHJvcGVydHkgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBldmVudEVuZChldmVudCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGFyZSBtb3ZpbmcgdXAgb3IgZG93blxyXG4gICAgICAgICAgICB2YXIgbW92ZW1lbnQgPSAob3B0aW9ucy5kaXIgPyAtMSA6IDEpICogKGV2ZW50LmNhbGNQb2ludCAtIGRhdGEuc3RhcnRDYWxjUG9pbnQpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgbW92ZW1lbnQgaW50byBhIHBlcmNlbnRhZ2Ugb2YgdGhlIHNsaWRlciB3aWR0aC9oZWlnaHRcclxuICAgICAgICAgICAgdmFyIHByb3Bvc2FsID0gKG1vdmVtZW50ICogMTAwKSAvIGRhdGEuYmFzZVNpemU7XHJcblxyXG4gICAgICAgICAgICBtb3ZlSGFuZGxlcyhtb3ZlbWVudCA+IDAsIHByb3Bvc2FsLCBkYXRhLmxvY2F0aW9ucywgZGF0YS5oYW5kbGVOdW1iZXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVuYmluZCBtb3ZlIGV2ZW50cyBvbiBkb2N1bWVudCwgY2FsbCBjYWxsYmFja3MuXHJcbiAgICAgICAgZnVuY3Rpb24gZXZlbnRFbmQoZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gVGhlIGhhbmRsZSBpcyBubyBsb25nZXIgYWN0aXZlLCBzbyByZW1vdmUgdGhlIGNsYXNzLlxyXG4gICAgICAgICAgICBpZiAoZGF0YS5oYW5kbGUpIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGRhdGEuaGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuYWN0aXZlKTtcclxuICAgICAgICAgICAgICAgIHNjb3BlX0FjdGl2ZUhhbmRsZXNDb3VudCAtPSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVbmJpbmQgdGhlIG1vdmUgYW5kIGVuZCBldmVudHMsIHdoaWNoIGFyZSBhZGRlZCBvbiAnc3RhcnQnLlxyXG4gICAgICAgICAgICBkYXRhLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGMpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlX0RvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGNbMF0sIGNbMV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzY29wZV9BY3RpdmVIYW5kbGVzQ291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBkcmFnZ2luZyBjbGFzcy5cclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmRyYWcpO1xyXG4gICAgICAgICAgICAgICAgc2V0WmluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGN1cnNvciBzdHlsZXMgYW5kIHRleHQtc2VsZWN0aW9uIGV2ZW50cyBib3VuZCB0byB0aGUgYm9keS5cclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5jdXJzb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZV9Cb2R5LnN0eWxlLmN1cnNvciA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGVfQm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwic2VsZWN0c3RhcnRcIiwgcHJldmVudERlZmF1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkYXRhLmhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIGZpcmVFdmVudChcImNoYW5nZVwiLCBoYW5kbGVOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgZmlyZUV2ZW50KFwic2V0XCIsIGhhbmRsZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICBmaXJlRXZlbnQoXCJlbmRcIiwgaGFuZGxlTnVtYmVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBCaW5kIG1vdmUgZXZlbnRzIG9uIGRvY3VtZW50LlxyXG4gICAgICAgIGZ1bmN0aW9uIGV2ZW50U3RhcnQoZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gSWdub3JlIGV2ZW50IGlmIGFueSBoYW5kbGUgaXMgZGlzYWJsZWRcclxuICAgICAgICAgICAgaWYgKGRhdGEuaGFuZGxlTnVtYmVycy5zb21lKGlzSGFuZGxlRGlzYWJsZWQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBoYW5kbGU7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YS5oYW5kbGVOdW1iZXJzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZU9yaWdpbiA9IHNjb3BlX0hhbmRsZXNbZGF0YS5oYW5kbGVOdW1iZXJzWzBdXTtcclxuXHJcbiAgICAgICAgICAgICAgICBoYW5kbGUgPSBoYW5kbGVPcmlnaW4uY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgICAgICBzY29wZV9BY3RpdmVIYW5kbGVzQ291bnQgKz0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSBoYW5kbGUgYXMgJ2FjdGl2ZScgc28gaXQgY2FuIGJlIHN0eWxlZC5cclxuICAgICAgICAgICAgICAgIGFkZENsYXNzKGhhbmRsZSwgb3B0aW9ucy5jc3NDbGFzc2VzLmFjdGl2ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEEgZHJhZyBzaG91bGQgbmV2ZXIgcHJvcGFnYXRlIHVwIHRvIHRoZSAndGFwJyBldmVudC5cclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZWNvcmQgdGhlIGV2ZW50IGxpc3RlbmVycy5cclxuICAgICAgICAgICAgdmFyIGxpc3RlbmVycyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gQXR0YWNoIHRoZSBtb3ZlIGFuZCBlbmQgZXZlbnRzLlxyXG4gICAgICAgICAgICB2YXIgbW92ZUV2ZW50ID0gYXR0YWNoRXZlbnQoYWN0aW9ucy5tb3ZlLCBzY29wZV9Eb2N1bWVudEVsZW1lbnQsIGV2ZW50TW92ZSwge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGV2ZW50IHRhcmdldCBoYXMgY2hhbmdlZCBzbyB3ZSBuZWVkIHRvIHByb3BhZ2F0ZSB0aGUgb3JpZ2luYWwgb25lIHNvIHRoYXQgd2Uga2VlcFxyXG4gICAgICAgICAgICAgICAgLy8gcmVseWluZyBvbiBpdCB0byBleHRyYWN0IHRhcmdldCB0b3VjaGVzLlxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBldmVudC50YXJnZXQsXHJcbiAgICAgICAgICAgICAgICBoYW5kbGU6IGhhbmRsZSxcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyczogbGlzdGVuZXJzLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRDYWxjUG9pbnQ6IGV2ZW50LmNhbGNQb2ludCxcclxuICAgICAgICAgICAgICAgIGJhc2VTaXplOiBiYXNlU2l6ZSgpLFxyXG4gICAgICAgICAgICAgICAgcGFnZU9mZnNldDogZXZlbnQucGFnZU9mZnNldCxcclxuICAgICAgICAgICAgICAgIGhhbmRsZU51bWJlcnM6IGRhdGEuaGFuZGxlTnVtYmVycyxcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnNQcm9wZXJ0eTogZXZlbnQuYnV0dG9ucyxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uczogc2NvcGVfTG9jYXRpb25zLnNsaWNlKClcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kRXZlbnQgPSBhdHRhY2hFdmVudChhY3Rpb25zLmVuZCwgc2NvcGVfRG9jdW1lbnRFbGVtZW50LCBldmVudEVuZCwge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBldmVudC50YXJnZXQsXHJcbiAgICAgICAgICAgICAgICBoYW5kbGU6IGhhbmRsZSxcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyczogbGlzdGVuZXJzLFxyXG4gICAgICAgICAgICAgICAgZG9Ob3RSZWplY3Q6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVOdW1iZXJzOiBkYXRhLmhhbmRsZU51bWJlcnNcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3V0RXZlbnQgPSBhdHRhY2hFdmVudChcIm1vdXNlb3V0XCIsIHNjb3BlX0RvY3VtZW50RWxlbWVudCwgZG9jdW1lbnRMZWF2ZSwge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBldmVudC50YXJnZXQsXHJcbiAgICAgICAgICAgICAgICBoYW5kbGU6IGhhbmRsZSxcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyczogbGlzdGVuZXJzLFxyXG4gICAgICAgICAgICAgICAgZG9Ob3RSZWplY3Q6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVOdW1iZXJzOiBkYXRhLmhhbmRsZU51bWJlcnNcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBwdXNoZWQgdGhlIGxpc3RlbmVycyBpbiB0aGUgbGlzdGVuZXIgbGlzdCByYXRoZXIgdGhhbiBjcmVhdGluZ1xyXG4gICAgICAgICAgICAvLyBhIG5ldyBvbmUgYXMgaXQgaGFzIGFscmVhZHkgYmVlbiBwYXNzZWQgdG8gdGhlIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAgICAgICAgICBsaXN0ZW5lcnMucHVzaC5hcHBseShsaXN0ZW5lcnMsIG1vdmVFdmVudC5jb25jYXQoZW5kRXZlbnQsIG91dEV2ZW50KSk7XHJcblxyXG4gICAgICAgICAgICAvLyBUZXh0IHNlbGVjdGlvbiBpc24ndCBhbiBpc3N1ZSBvbiB0b3VjaCBkZXZpY2VzLFxyXG4gICAgICAgICAgICAvLyBzbyBhZGRpbmcgY3Vyc29yIHN0eWxlcyBjYW4gYmUgc2tpcHBlZC5cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmN1cnNvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCB0aGUgJ0knIGN1cnNvciBhbmQgZXh0ZW5kIHRoZSByYW5nZS1kcmFnIGN1cnNvci5cclxuICAgICAgICAgICAgICAgIHNjb3BlX0JvZHkuc3R5bGUuY3Vyc29yID0gZ2V0Q29tcHV0ZWRTdHlsZShldmVudC50YXJnZXQpLmN1cnNvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSB0YXJnZXQgd2l0aCBhIGRyYWdnaW5nIHN0YXRlLlxyXG4gICAgICAgICAgICAgICAgaWYgKHNjb3BlX0hhbmRsZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmRyYWcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgdGV4dCBzZWxlY3Rpb24gd2hlbiBkcmFnZ2luZyB0aGUgaGFuZGxlcy5cclxuICAgICAgICAgICAgICAgIC8vIEluIG5vVWlTbGlkZXIgPD0gOS4yLjAsIHRoaXMgd2FzIGhhbmRsZWQgYnkgY2FsbGluZyBwcmV2ZW50RGVmYXVsdCBvbiBtb3VzZS90b3VjaCBzdGFydC9tb3ZlLFxyXG4gICAgICAgICAgICAgICAgLy8gd2hpY2ggaXMgc2Nyb2xsIGJsb2NraW5nLiBUaGUgc2VsZWN0c3RhcnQgZXZlbnQgaXMgc3VwcG9ydGVkIGJ5IEZpcmVGb3ggc3RhcnRpbmcgZnJvbSB2ZXJzaW9uIDUyLFxyXG4gICAgICAgICAgICAgICAgLy8gbWVhbmluZyB0aGUgb25seSBob2xkb3V0IGlzIGlPUyBTYWZhcmkuIFRoaXMgZG9lc24ndCBtYXR0ZXI6IHRleHQgc2VsZWN0aW9uIGlzbid0IHRyaWdnZXJlZCB0aGVyZS5cclxuICAgICAgICAgICAgICAgIC8vIFRoZSAnY3Vyc29yJyBmbGFnIGlzIGZhbHNlLlxyXG4gICAgICAgICAgICAgICAgLy8gU2VlOiBodHRwOi8vY2FuaXVzZS5jb20vI3NlYXJjaD1zZWxlY3RzdGFydFxyXG4gICAgICAgICAgICAgICAgc2NvcGVfQm9keS5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0c3RhcnRcIiwgcHJldmVudERlZmF1bHQsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGF0YS5oYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBmaXJlRXZlbnQoXCJzdGFydFwiLCBoYW5kbGVOdW1iZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE1vdmUgY2xvc2VzdCBoYW5kbGUgdG8gdGFwcGVkIGxvY2F0aW9uLlxyXG4gICAgICAgIGZ1bmN0aW9uIGV2ZW50VGFwKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSB0YXAgZXZlbnQgc2hvdWxkbid0IHByb3BhZ2F0ZSB1cFxyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9wb3NhbCA9IGNhbGNQb2ludFRvUGVyY2VudGFnZShldmVudC5jYWxjUG9pbnQpO1xyXG4gICAgICAgICAgICB2YXIgaGFuZGxlTnVtYmVyID0gZ2V0Q2xvc2VzdEhhbmRsZShwcm9wb3NhbCk7XHJcblxyXG4gICAgICAgICAgICAvLyBUYWNrbGUgdGhlIGNhc2UgdGhhdCBhbGwgaGFuZGxlcyBhcmUgJ2Rpc2FibGVkJy5cclxuICAgICAgICAgICAgaWYgKGhhbmRsZU51bWJlciA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRmxhZyB0aGUgc2xpZGVyIGFzIGl0IGlzIG5vdyBpbiBhIHRyYW5zaXRpb25hbCBzdGF0ZS5cclxuICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiB0YWtlcyBhIGNvbmZpZ3VyYWJsZSBhbW91bnQgb2YgbXMgKGRlZmF1bHQgMzAwKS4gUmUtZW5hYmxlIHRoZSBzbGlkZXIgYWZ0ZXIgdGhhdC5cclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmV2ZW50cy5zbmFwKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzc0ZvcihzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50YXAsIG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZXRIYW5kbGUoaGFuZGxlTnVtYmVyLCBwcm9wb3NhbCwgdHJ1ZSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICBzZXRaaW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgIGZpcmVFdmVudChcInNsaWRlXCIsIGhhbmRsZU51bWJlciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGZpcmVFdmVudChcInVwZGF0ZVwiLCBoYW5kbGVOdW1iZXIsIHRydWUpO1xyXG4gICAgICAgICAgICBmaXJlRXZlbnQoXCJjaGFuZ2VcIiwgaGFuZGxlTnVtYmVyLCB0cnVlKTtcclxuICAgICAgICAgICAgZmlyZUV2ZW50KFwic2V0XCIsIGhhbmRsZU51bWJlciwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ldmVudHMuc25hcCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnRTdGFydChldmVudCwgeyBoYW5kbGVOdW1iZXJzOiBbaGFuZGxlTnVtYmVyXSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmlyZXMgYSAnaG92ZXInIGV2ZW50IGZvciBhIGhvdmVyZWQgbW91c2UvcGVuIHBvc2l0aW9uLlxyXG4gICAgICAgIGZ1bmN0aW9uIGV2ZW50SG92ZXIoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHByb3Bvc2FsID0gY2FsY1BvaW50VG9QZXJjZW50YWdlKGV2ZW50LmNhbGNQb2ludCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdG8gPSBzY29wZV9TcGVjdHJ1bS5nZXRTdGVwKHByb3Bvc2FsKTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gc2NvcGVfU3BlY3RydW0uZnJvbVN0ZXBwaW5nKHRvKTtcclxuXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNjb3BlX0V2ZW50cykuZm9yRWFjaChmdW5jdGlvbih0YXJnZXRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFwiaG92ZXJcIiA9PT0gdGFyZ2V0RXZlbnQuc3BsaXQoXCIuXCIpWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGVfRXZlbnRzW3RhcmdldEV2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoc2NvcGVfU2VsZiwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZXMga2V5ZG93biBvbiBmb2N1c2VkIGhhbmRsZXNcclxuICAgICAgICAvLyBEb24ndCBtb3ZlIHRoZSBkb2N1bWVudCB3aGVuIHByZXNzaW5nIGFycm93IGtleXMgb24gZm9jdXNlZCBoYW5kbGVzXHJcbiAgICAgICAgZnVuY3Rpb24gZXZlbnRLZXlkb3duKGV2ZW50LCBoYW5kbGVOdW1iZXIpIHtcclxuICAgICAgICAgICAgaWYgKGlzU2xpZGVyRGlzYWJsZWQoKSB8fCBpc0hhbmRsZURpc2FibGVkKGhhbmRsZU51bWJlcikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGhvcml6b250YWxLZXlzID0gW1wiTGVmdFwiLCBcIlJpZ2h0XCJdO1xyXG4gICAgICAgICAgICB2YXIgdmVydGljYWxLZXlzID0gW1wiRG93blwiLCBcIlVwXCJdO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlyICYmICFvcHRpb25zLm9ydCkge1xyXG4gICAgICAgICAgICAgICAgLy8gT24gYW4gcmlnaHQtdG8tbGVmdCBzbGlkZXIsIHRoZSBsZWZ0IGFuZCByaWdodCBrZXlzIGFjdCBpbnZlcnRlZFxyXG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbEtleXMucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMub3J0ICYmICFvcHRpb25zLmRpcikge1xyXG4gICAgICAgICAgICAgICAgLy8gT24gYSB0b3AtdG8tYm90dG9tIHNsaWRlciwgdGhlIHVwIGFuZCBkb3duIGtleXMgYWN0IGludmVydGVkXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbEtleXMucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTdHJpcCBcIkFycm93XCIgZm9yIElFIGNvbXBhdGliaWxpdHkuIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9LZXlib2FyZEV2ZW50L2tleVxyXG4gICAgICAgICAgICB2YXIga2V5ID0gZXZlbnQua2V5LnJlcGxhY2UoXCJBcnJvd1wiLCBcIlwiKTtcclxuICAgICAgICAgICAgdmFyIGlzRG93biA9IGtleSA9PT0gdmVydGljYWxLZXlzWzBdIHx8IGtleSA9PT0gaG9yaXpvbnRhbEtleXNbMF07XHJcbiAgICAgICAgICAgIHZhciBpc1VwID0ga2V5ID09PSB2ZXJ0aWNhbEtleXNbMV0gfHwga2V5ID09PSBob3Jpem9udGFsS2V5c1sxXTtcclxuXHJcbiAgICAgICAgICAgIGlmICghaXNEb3duICYmICFpc1VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBpc0Rvd24gPyAwIDogMTtcclxuICAgICAgICAgICAgdmFyIHN0ZXBzID0gZ2V0TmV4dFN0ZXBzRm9ySGFuZGxlKGhhbmRsZU51bWJlcik7XHJcbiAgICAgICAgICAgIHZhciBzdGVwID0gc3RlcHNbZGlyZWN0aW9uXTtcclxuXHJcbiAgICAgICAgICAgIC8vIEF0IHRoZSBlZGdlIG9mIGEgc2xpZGVyLCBkbyBub3RoaW5nXHJcbiAgICAgICAgICAgIGlmIChzdGVwID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE5vIHN0ZXAgc2V0LCB1c2UgdGhlIGRlZmF1bHQgb2YgMTAlIG9mIHRoZSBzdWItcmFuZ2VcclxuICAgICAgICAgICAgaWYgKHN0ZXAgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBzdGVwID0gc2NvcGVfU3BlY3RydW0uZ2V0RGVmYXVsdFN0ZXAoc2NvcGVfTG9jYXRpb25zW2hhbmRsZU51bWJlcl0sIGlzRG93biwgMTApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTdGVwIG92ZXIgemVyby1sZW5ndGggcmFuZ2VzICgjOTQ4KTtcclxuICAgICAgICAgICAgc3RlcCA9IE1hdGgubWF4KHN0ZXAsIDAuMDAwMDAwMSk7XHJcblxyXG4gICAgICAgICAgICAvLyBEZWNyZW1lbnQgZm9yIGRvd24gc3RlcHNcclxuICAgICAgICAgICAgc3RlcCA9IChpc0Rvd24gPyAtMSA6IDEpICogc3RlcDtcclxuXHJcbiAgICAgICAgICAgIHZhbHVlU2V0SGFuZGxlKGhhbmRsZU51bWJlciwgc2NvcGVfVmFsdWVzW2hhbmRsZU51bWJlcl0gKyBzdGVwLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEF0dGFjaCBldmVudHMgdG8gc2V2ZXJhbCBzbGlkZXIgcGFydHMuXHJcbiAgICAgICAgZnVuY3Rpb24gYmluZFNsaWRlckV2ZW50cyhiZWhhdmlvdXIpIHtcclxuICAgICAgICAgICAgLy8gQXR0YWNoIHRoZSBzdGFuZGFyZCBkcmFnIGV2ZW50IHRvIHRoZSBoYW5kbGVzLlxyXG4gICAgICAgICAgICBpZiAoIWJlaGF2aW91ci5maXhlZCkge1xyXG4gICAgICAgICAgICAgICAgc2NvcGVfSGFuZGxlcy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGVzZSBldmVudHMgYXJlIG9ubHkgYm91bmQgdG8gdGhlIHZpc3VhbCBoYW5kbGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbGVtZW50LCBub3QgdGhlICdyZWFsJyBvcmlnaW4gZWxlbWVudC5cclxuICAgICAgICAgICAgICAgICAgICBhdHRhY2hFdmVudChhY3Rpb25zLnN0YXJ0LCBoYW5kbGUuY2hpbGRyZW5bMF0sIGV2ZW50U3RhcnQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTnVtYmVyczogW2luZGV4XVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEF0dGFjaCB0aGUgdGFwIGV2ZW50IHRvIHRoZSBzbGlkZXIgYmFzZS5cclxuICAgICAgICAgICAgaWYgKGJlaGF2aW91ci50YXApIHtcclxuICAgICAgICAgICAgICAgIGF0dGFjaEV2ZW50KGFjdGlvbnMuc3RhcnQsIHNjb3BlX0Jhc2UsIGV2ZW50VGFwLCB7fSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEZpcmUgaG92ZXIgZXZlbnRzXHJcbiAgICAgICAgICAgIGlmIChiZWhhdmlvdXIuaG92ZXIpIHtcclxuICAgICAgICAgICAgICAgIGF0dGFjaEV2ZW50KGFjdGlvbnMubW92ZSwgc2NvcGVfQmFzZSwgZXZlbnRIb3Zlciwge1xyXG4gICAgICAgICAgICAgICAgICAgIGhvdmVyOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTWFrZSB0aGUgcmFuZ2UgZHJhZ2dhYmxlLlxyXG4gICAgICAgICAgICBpZiAoYmVoYXZpb3VyLmRyYWcpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlX0Nvbm5lY3RzLmZvckVhY2goZnVuY3Rpb24oY29ubmVjdCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdCA9PT0gZmFsc2UgfHwgaW5kZXggPT09IDAgfHwgaW5kZXggPT09IHNjb3BlX0Nvbm5lY3RzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZUJlZm9yZSA9IHNjb3BlX0hhbmRsZXNbaW5kZXggLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlQWZ0ZXIgPSBzY29wZV9IYW5kbGVzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRIb2xkZXJzID0gW2Nvbm5lY3RdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhjb25uZWN0LCBvcHRpb25zLmNzc0NsYXNzZXMuZHJhZ2dhYmxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgcmFuZ2UgaXMgZml4ZWQsIHRoZSBlbnRpcmUgcmFuZ2UgY2FuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYmUgZHJhZ2dlZCBieSB0aGUgaGFuZGxlcy4gVGhlIGhhbmRsZSBpbiB0aGUgZmlyc3RcclxuICAgICAgICAgICAgICAgICAgICAvLyBvcmlnaW4gd2lsbCBwcm9wYWdhdGUgdGhlIHN0YXJ0IGV2ZW50IHVwd2FyZCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBidXQgaXQgbmVlZHMgdG8gYmUgYm91bmQgbWFudWFsbHkgb24gdGhlIG90aGVyLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiZWhhdmlvdXIuZml4ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRIb2xkZXJzLnB1c2goaGFuZGxlQmVmb3JlLmNoaWxkcmVuWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRIb2xkZXJzLnB1c2goaGFuZGxlQWZ0ZXIuY2hpbGRyZW5bMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRIb2xkZXJzLmZvckVhY2goZnVuY3Rpb24oZXZlbnRIb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNoRXZlbnQoYWN0aW9ucy5zdGFydCwgZXZlbnRIb2xkZXIsIGV2ZW50U3RhcnQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFtoYW5kbGVCZWZvcmUsIGhhbmRsZUFmdGVyXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU51bWJlcnM6IFtpbmRleCAtIDEsIGluZGV4XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBdHRhY2ggYW4gZXZlbnQgdG8gdGhpcyBzbGlkZXIsIHBvc3NpYmx5IGluY2x1ZGluZyBhIG5hbWVzcGFjZVxyXG4gICAgICAgIGZ1bmN0aW9uIGJpbmRFdmVudChuYW1lc3BhY2VkRXZlbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHNjb3BlX0V2ZW50c1tuYW1lc3BhY2VkRXZlbnRdID0gc2NvcGVfRXZlbnRzW25hbWVzcGFjZWRFdmVudF0gfHwgW107XHJcbiAgICAgICAgICAgIHNjb3BlX0V2ZW50c1tuYW1lc3BhY2VkRXZlbnRdLnB1c2goY2FsbGJhY2spO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIGV2ZW50IGJvdW5kIGlzICd1cGRhdGUsJyBmaXJlIGl0IGltbWVkaWF0ZWx5IGZvciBhbGwgaGFuZGxlcy5cclxuICAgICAgICAgICAgaWYgKG5hbWVzcGFjZWRFdmVudC5zcGxpdChcIi5cIilbMF0gPT09IFwidXBkYXRlXCIpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlX0hhbmRsZXMuZm9yRWFjaChmdW5jdGlvbihhLCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcmVFdmVudChcInVwZGF0ZVwiLCBpbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVW5kbyBhdHRhY2htZW50IG9mIGV2ZW50XHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlRXZlbnQobmFtZXNwYWNlZEV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBldmVudCA9IG5hbWVzcGFjZWRFdmVudCAmJiBuYW1lc3BhY2VkRXZlbnQuc3BsaXQoXCIuXCIpWzBdO1xyXG4gICAgICAgICAgICB2YXIgbmFtZXNwYWNlID0gZXZlbnQgJiYgbmFtZXNwYWNlZEV2ZW50LnN1YnN0cmluZyhldmVudC5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoc2NvcGVfRXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGJpbmQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0RXZlbnQgPSBiaW5kLnNwbGl0KFwiLlwiKVswXTtcclxuICAgICAgICAgICAgICAgIHZhciB0TmFtZXNwYWNlID0gYmluZC5zdWJzdHJpbmcodEV2ZW50Lmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCghZXZlbnQgfHwgZXZlbnQgPT09IHRFdmVudCkgJiYgKCFuYW1lc3BhY2UgfHwgbmFtZXNwYWNlID09PSB0TmFtZXNwYWNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY29wZV9FdmVudHNbYmluZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXh0ZXJuYWwgZXZlbnQgaGFuZGxpbmdcclxuICAgICAgICBmdW5jdGlvbiBmaXJlRXZlbnQoZXZlbnROYW1lLCBoYW5kbGVOdW1iZXIsIHRhcCkge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzY29wZV9FdmVudHMpLmZvckVhY2goZnVuY3Rpb24odGFyZ2V0RXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBldmVudFR5cGUgPSB0YXJnZXRFdmVudC5zcGxpdChcIi5cIilbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gZXZlbnRUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGVfRXZlbnRzW3RhcmdldEV2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIHNsaWRlciBwdWJsaWMgQVBJIGFzIHRoZSBzY29wZSAoJ3RoaXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGVfU2VsZixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJldHVybiB2YWx1ZXMgYXMgYXJyYXksIHNvIGFyZ18xW2FyZ18yXSBpcyBhbHdheXMgdmFsaWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZV9WYWx1ZXMubWFwKG9wdGlvbnMuZm9ybWF0LnRvKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBpbmRleCwgMCBvciAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbi1mb3JtYXR0ZWQgc2xpZGVyIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGVfVmFsdWVzLnNsaWNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFdmVudCBpcyBmaXJlZCBieSB0YXAsIHRydWUgb3IgZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcCB8fCBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlZnQgb2Zmc2V0IG9mIHRoZSBoYW5kbGUsIGluIHJlbGF0aW9uIHRvIHRoZSBzbGlkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlX0xvY2F0aW9ucy5zbGljZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3BsaXQgb3V0IHRoZSBoYW5kbGUgcG9zaXRpb25pbmcgbG9naWMgc28gdGhlIE1vdmUgZXZlbnQgY2FuIHVzZSBpdCwgdG9vXHJcbiAgICAgICAgZnVuY3Rpb24gY2hlY2tIYW5kbGVQb3NpdGlvbihyZWZlcmVuY2UsIGhhbmRsZU51bWJlciwgdG8sIGxvb2tCYWNrd2FyZCwgbG9va0ZvcndhcmQsIGdldFZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIEZvciBzbGlkZXJzIHdpdGggbXVsdGlwbGUgaGFuZGxlcywgbGltaXQgbW92ZW1lbnQgdG8gdGhlIG90aGVyIGhhbmRsZS5cclxuICAgICAgICAgICAgLy8gQXBwbHkgdGhlIG1hcmdpbiBvcHRpb24gYnkgYWRkaW5nIGl0IHRvIHRoZSBoYW5kbGUgcG9zaXRpb25zLlxyXG4gICAgICAgICAgICBpZiAoc2NvcGVfSGFuZGxlcy5sZW5ndGggPiAxICYmICFvcHRpb25zLmV2ZW50cy51bmNvbnN0cmFpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9va0JhY2t3YXJkICYmIGhhbmRsZU51bWJlciA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0byA9IE1hdGgubWF4KHRvLCByZWZlcmVuY2VbaGFuZGxlTnVtYmVyIC0gMV0gKyBvcHRpb25zLm1hcmdpbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxvb2tGb3J3YXJkICYmIGhhbmRsZU51bWJlciA8IHNjb3BlX0hhbmRsZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvID0gTWF0aC5taW4odG8sIHJlZmVyZW5jZVtoYW5kbGVOdW1iZXIgKyAxXSAtIG9wdGlvbnMubWFyZ2luKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVGhlIGxpbWl0IG9wdGlvbiBoYXMgdGhlIG9wcG9zaXRlIGVmZmVjdCwgbGltaXRpbmcgaGFuZGxlcyB0byBhXHJcbiAgICAgICAgICAgIC8vIG1heGltdW0gZGlzdGFuY2UgZnJvbSBhbm90aGVyLiBMaW1pdCBtdXN0IGJlID4gMCwgYXMgb3RoZXJ3aXNlXHJcbiAgICAgICAgICAgIC8vIGhhbmRsZXMgd291bGQgYmUgdW5tb3ZhYmxlLlxyXG4gICAgICAgICAgICBpZiAoc2NvcGVfSGFuZGxlcy5sZW5ndGggPiAxICYmIG9wdGlvbnMubGltaXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsb29rQmFja3dhcmQgJiYgaGFuZGxlTnVtYmVyID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvID0gTWF0aC5taW4odG8sIHJlZmVyZW5jZVtoYW5kbGVOdW1iZXIgLSAxXSArIG9wdGlvbnMubGltaXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsb29rRm9yd2FyZCAmJiBoYW5kbGVOdW1iZXIgPCBzY29wZV9IYW5kbGVzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0byA9IE1hdGgubWF4KHRvLCByZWZlcmVuY2VbaGFuZGxlTnVtYmVyICsgMV0gLSBvcHRpb25zLmxpbWl0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVGhlIHBhZGRpbmcgb3B0aW9uIGtlZXBzIHRoZSBoYW5kbGVzIGEgY2VydGFpbiBkaXN0YW5jZSBmcm9tIHRoZVxyXG4gICAgICAgICAgICAvLyBlZGdlcyBvZiB0aGUgc2xpZGVyLiBQYWRkaW5nIG11c3QgYmUgPiAwLlxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wYWRkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlTnVtYmVyID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBNYXRoLm1heCh0bywgb3B0aW9ucy5wYWRkaW5nWzBdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlTnVtYmVyID09PSBzY29wZV9IYW5kbGVzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0byA9IE1hdGgubWluKHRvLCAxMDAgLSBvcHRpb25zLnBhZGRpbmdbMV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0byA9IHNjb3BlX1NwZWN0cnVtLmdldFN0ZXAodG8pO1xyXG5cclxuICAgICAgICAgICAgLy8gTGltaXQgcGVyY2VudGFnZSB0byB0aGUgMCAtIDEwMCByYW5nZVxyXG4gICAgICAgICAgICB0byA9IGxpbWl0KHRvKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBmYWxzZSBpZiBoYW5kbGUgY2FuJ3QgbW92ZVxyXG4gICAgICAgICAgICBpZiAodG8gPT09IHJlZmVyZW5jZVtoYW5kbGVOdW1iZXJdICYmICFnZXRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG87XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVc2VzIHNsaWRlciBvcmllbnRhdGlvbiB0byBjcmVhdGUgQ1NTIHJ1bGVzLiBhID0gYmFzZSB2YWx1ZTtcclxuICAgICAgICBmdW5jdGlvbiBpblJ1bGVPcmRlcih2LCBhKSB7XHJcbiAgICAgICAgICAgIHZhciBvID0gb3B0aW9ucy5vcnQ7XHJcbiAgICAgICAgICAgIHJldHVybiAobyA/IGEgOiB2KSArIFwiLCBcIiArIChvID8gdiA6IGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTW92ZXMgaGFuZGxlKHMpIGJ5IGEgcGVyY2VudGFnZVxyXG4gICAgICAgIC8vIChib29sLCAlIHRvIG1vdmUsIFslIHdoZXJlIGhhbmRsZSBzdGFydGVkLCAuLi5dLCBbaW5kZXggaW4gc2NvcGVfSGFuZGxlcywgLi4uXSlcclxuICAgICAgICBmdW5jdGlvbiBtb3ZlSGFuZGxlcyh1cHdhcmQsIHByb3Bvc2FsLCBsb2NhdGlvbnMsIGhhbmRsZU51bWJlcnMpIHtcclxuICAgICAgICAgICAgdmFyIHByb3Bvc2FscyA9IGxvY2F0aW9ucy5zbGljZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGIgPSBbIXVwd2FyZCwgdXB3YXJkXTtcclxuICAgICAgICAgICAgdmFyIGYgPSBbdXB3YXJkLCAhdXB3YXJkXTtcclxuXHJcbiAgICAgICAgICAgIC8vIENvcHkgaGFuZGxlTnVtYmVycyBzbyB3ZSBkb24ndCBjaGFuZ2UgdGhlIGRhdGFzZXRcclxuICAgICAgICAgICAgaGFuZGxlTnVtYmVycyA9IGhhbmRsZU51bWJlcnMuc2xpY2UoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSB3aGljaCBoYW5kbGUgaXMgJ2xlYWRpbmcnLlxyXG4gICAgICAgICAgICAvLyBJZiB0aGF0IG9uZSBjYW4ndCBtb3ZlIHRoZSBzZWNvbmQgY2FuJ3QgZWl0aGVyLlxyXG4gICAgICAgICAgICBpZiAodXB3YXJkKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVOdW1iZXJzLnJldmVyc2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU3RlcCAxOiBnZXQgdGhlIG1heGltdW0gcGVyY2VudGFnZSB0aGF0IGFueSBvZiB0aGUgaGFuZGxlcyBjYW4gbW92ZVxyXG4gICAgICAgICAgICBpZiAoaGFuZGxlTnVtYmVycy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyLCBvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvID0gY2hlY2tIYW5kbGVQb3NpdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2Fsc1toYW5kbGVOdW1iZXJdICsgcHJvcG9zYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJbb10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZbb10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcCBpZiBvbmUgb2YgdGhlIGhhbmRsZXMgY2FuJ3QgbW92ZS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodG8gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbCA9IHRvIC0gcHJvcG9zYWxzW2hhbmRsZU51bWJlcl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2Fsc1toYW5kbGVOdW1iZXJdID0gdG87XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIHVzaW5nIG9uZSBoYW5kbGUsIGNoZWNrIGJhY2t3YXJkIEFORCBmb3J3YXJkXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYiA9IGYgPSBbdHJ1ZV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gU3RlcCAyOiBUcnkgdG8gc2V0IHRoZSBoYW5kbGVzIHdpdGggdGhlIGZvdW5kIHBlcmNlbnRhZ2VcclxuICAgICAgICAgICAgaGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlciwgbykge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSBzZXRIYW5kbGUoaGFuZGxlTnVtYmVyLCBsb2NhdGlvbnNbaGFuZGxlTnVtYmVyXSArIHByb3Bvc2FsLCBiW29dLCBmW29dKSB8fCBzdGF0ZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTdGVwIDM6IElmIGEgaGFuZGxlIG1vdmVkLCBmaXJlIGV2ZW50c1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJlRXZlbnQoXCJ1cGRhdGVcIiwgaGFuZGxlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICBmaXJlRXZlbnQoXCJzbGlkZVwiLCBoYW5kbGVOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRha2VzIGEgYmFzZSB2YWx1ZSBhbmQgYW4gb2Zmc2V0LiBUaGlzIG9mZnNldCBpcyB1c2VkIGZvciB0aGUgY29ubmVjdCBiYXIgc2l6ZS5cclxuICAgICAgICAvLyBJbiB0aGUgaW5pdGlhbCBkZXNpZ24gZm9yIHRoaXMgZmVhdHVyZSwgdGhlIG9yaWdpbiBlbGVtZW50IHdhcyAxJSB3aWRlLlxyXG4gICAgICAgIC8vIFVuZm9ydHVuYXRlbHksIGEgcm91bmRpbmcgYnVnIGluIENocm9tZSBtYWtlcyBpdCBpbXBvc3NpYmxlIHRvIGltcGxlbWVudCB0aGlzIGZlYXR1cmVcclxuICAgICAgICAvLyBpbiB0aGlzIG1hbm5lcjogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9Nzk4MjIzXHJcbiAgICAgICAgZnVuY3Rpb24gdHJhbnNmb3JtRGlyZWN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuZGlyID8gMTAwIC0gYSAtIGIgOiBhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlcyBzY29wZV9Mb2NhdGlvbnMgYW5kIHNjb3BlX1ZhbHVlcywgdXBkYXRlcyB2aXN1YWwgc3RhdGVcclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVIYW5kbGVQb3NpdGlvbihoYW5kbGVOdW1iZXIsIHRvKSB7XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBsb2NhdGlvbnMuXHJcbiAgICAgICAgICAgIHNjb3BlX0xvY2F0aW9uc1toYW5kbGVOdW1iZXJdID0gdG87XHJcblxyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSB2YWx1ZSB0byB0aGUgc2xpZGVyIHN0ZXBwaW5nL3JhbmdlLlxyXG4gICAgICAgICAgICBzY29wZV9WYWx1ZXNbaGFuZGxlTnVtYmVyXSA9IHNjb3BlX1NwZWN0cnVtLmZyb21TdGVwcGluZyh0byk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcnVsZSA9IFwidHJhbnNsYXRlKFwiICsgaW5SdWxlT3JkZXIodHJhbnNmb3JtRGlyZWN0aW9uKHRvLCAwKSAtIHNjb3BlX0Rpck9mZnNldCArIFwiJVwiLCBcIjBcIikgKyBcIilcIjtcclxuICAgICAgICAgICAgc2NvcGVfSGFuZGxlc1toYW5kbGVOdW1iZXJdLnN0eWxlW29wdGlvbnMudHJhbnNmb3JtUnVsZV0gPSBydWxlO1xyXG5cclxuICAgICAgICAgICAgdXBkYXRlQ29ubmVjdChoYW5kbGVOdW1iZXIpO1xyXG4gICAgICAgICAgICB1cGRhdGVDb25uZWN0KGhhbmRsZU51bWJlciArIDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSGFuZGxlcyBiZWZvcmUgdGhlIHNsaWRlciBtaWRkbGUgYXJlIHN0YWNrZWQgbGF0ZXIgPSBoaWdoZXIsXHJcbiAgICAgICAgLy8gSGFuZGxlcyBhZnRlciB0aGUgbWlkZGxlIGxhdGVyIGlzIGxvd2VyXHJcbiAgICAgICAgLy8gW1s3XSBbOF0gLi4uLi4uLi4uLiB8IC4uLi4uLi4uLi4gWzVdIFs0XVxyXG4gICAgICAgIGZ1bmN0aW9uIHNldFppbmRleCgpIHtcclxuICAgICAgICAgICAgc2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpciA9IHNjb3BlX0xvY2F0aW9uc1toYW5kbGVOdW1iZXJdID4gNTAgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgekluZGV4ID0gMyArIChzY29wZV9IYW5kbGVzLmxlbmd0aCArIGRpciAqIGhhbmRsZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICBzY29wZV9IYW5kbGVzW2hhbmRsZU51bWJlcl0uc3R5bGUuekluZGV4ID0gekluZGV4O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRlc3Qgc3VnZ2VzdGVkIHZhbHVlcyBhbmQgYXBwbHkgbWFyZ2luLCBzdGVwLlxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEhhbmRsZShoYW5kbGVOdW1iZXIsIHRvLCBsb29rQmFja3dhcmQsIGxvb2tGb3J3YXJkKSB7XHJcbiAgICAgICAgICAgIHRvID0gY2hlY2tIYW5kbGVQb3NpdGlvbihzY29wZV9Mb2NhdGlvbnMsIGhhbmRsZU51bWJlciwgdG8sIGxvb2tCYWNrd2FyZCwgbG9va0ZvcndhcmQsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0byA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdXBkYXRlSGFuZGxlUG9zaXRpb24oaGFuZGxlTnVtYmVyLCB0byk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZXMgc3R5bGUgYXR0cmlidXRlIGZvciBjb25uZWN0IG5vZGVzXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ29ubmVjdChpbmRleCkge1xyXG4gICAgICAgICAgICAvLyBTa2lwIGNvbm5lY3RzIHNldCB0byBmYWxzZVxyXG4gICAgICAgICAgICBpZiAoIXNjb3BlX0Nvbm5lY3RzW2luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBoID0gMTAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBsID0gc2NvcGVfTG9jYXRpb25zW2luZGV4IC0gMV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gc2NvcGVfQ29ubmVjdHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgaCA9IHNjb3BlX0xvY2F0aW9uc1tpbmRleF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFdlIHVzZSB0d28gcnVsZXM6XHJcbiAgICAgICAgICAgIC8vICd0cmFuc2xhdGUnIHRvIGNoYW5nZSB0aGUgbGVmdC90b3Agb2Zmc2V0O1xyXG4gICAgICAgICAgICAvLyAnc2NhbGUnIHRvIGNoYW5nZSB0aGUgd2lkdGggb2YgdGhlIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIC8vIEFzIHRoZSBlbGVtZW50IGhhcyBhIHdpZHRoIG9mIDEwMCUsIGEgdHJhbnNsYXRpb24gb2YgMTAwJSBpcyBlcXVhbCB0byAxMDAlIG9mIHRoZSBwYXJlbnQgKC5ub1VpLWJhc2UpXHJcbiAgICAgICAgICAgIHZhciBjb25uZWN0V2lkdGggPSBoIC0gbDtcclxuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZVJ1bGUgPSBcInRyYW5zbGF0ZShcIiArIGluUnVsZU9yZGVyKHRyYW5zZm9ybURpcmVjdGlvbihsLCBjb25uZWN0V2lkdGgpICsgXCIlXCIsIFwiMFwiKSArIFwiKVwiO1xyXG4gICAgICAgICAgICB2YXIgc2NhbGVSdWxlID0gXCJzY2FsZShcIiArIGluUnVsZU9yZGVyKGNvbm5lY3RXaWR0aCAvIDEwMCwgXCIxXCIpICsgXCIpXCI7XHJcblxyXG4gICAgICAgICAgICBzY29wZV9Db25uZWN0c1tpbmRleF0uc3R5bGVbb3B0aW9ucy50cmFuc2Zvcm1SdWxlXSA9IHRyYW5zbGF0ZVJ1bGUgKyBcIiBcIiArIHNjYWxlUnVsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBhcnNlcyB2YWx1ZSBwYXNzZWQgdG8gLnNldCBtZXRob2QuIFJldHVybnMgY3VycmVudCB2YWx1ZSBpZiBub3QgcGFyc2UtYWJsZS5cclxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlVG9WYWx1ZSh0bywgaGFuZGxlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIFNldHRpbmcgd2l0aCBudWxsIGluZGljYXRlcyBhbiAnaWdub3JlJy5cclxuICAgICAgICAgICAgLy8gSW5wdXR0aW5nICdmYWxzZScgaXMgaW52YWxpZC5cclxuICAgICAgICAgICAgaWYgKHRvID09PSBudWxsIHx8IHRvID09PSBmYWxzZSB8fCB0byA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGVfTG9jYXRpb25zW2hhbmRsZU51bWJlcl07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIGEgZm9ybWF0dGVkIG51bWJlciB3YXMgcGFzc2VkLCBhdHRlbXB0IHRvIGRlY29kZSBpdC5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0byA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgdG8gPSBTdHJpbmcodG8pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0byA9IG9wdGlvbnMuZm9ybWF0LmZyb20odG8pO1xyXG4gICAgICAgICAgICB0byA9IHNjb3BlX1NwZWN0cnVtLnRvU3RlcHBpbmcodG8pO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgcGFyc2luZyB0aGUgbnVtYmVyIGZhaWxlZCwgdXNlIHRoZSBjdXJyZW50IHZhbHVlLlxyXG4gICAgICAgICAgICBpZiAodG8gPT09IGZhbHNlIHx8IGlzTmFOKHRvKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlX0xvY2F0aW9uc1toYW5kbGVOdW1iZXJdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG87XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIHNsaWRlciB2YWx1ZS5cclxuICAgICAgICBmdW5jdGlvbiB2YWx1ZVNldChpbnB1dCwgZmlyZVNldEV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBhc0FycmF5KGlucHV0KTtcclxuICAgICAgICAgICAgdmFyIGlzSW5pdCA9IHNjb3BlX0xvY2F0aW9uc1swXSA9PT0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgLy8gRXZlbnQgZmlyZXMgYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICBmaXJlU2V0RXZlbnQgPSBmaXJlU2V0RXZlbnQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiAhIWZpcmVTZXRFdmVudDtcclxuXHJcbiAgICAgICAgICAgIC8vIEFuaW1hdGlvbiBpcyBvcHRpb25hbC5cclxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBpbml0aWFsIHZhbHVlcyB3ZXJlIHNldCBiZWZvcmUgdXNpbmcgYW5pbWF0ZWQgcGxhY2VtZW50LlxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbmltYXRlICYmICFpc0luaXQpIHtcclxuICAgICAgICAgICAgICAgIGFkZENsYXNzRm9yKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnRhcCwgb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEZpcnN0IHBhc3MsIHdpdGhvdXQgbG9va0FoZWFkIGJ1dCB3aXRoIGxvb2tCYWNrd2FyZC4gVmFsdWVzIGFyZSBzZXQgZnJvbSBsZWZ0IHRvIHJpZ2h0LlxyXG4gICAgICAgICAgICBzY29wZV9IYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRIYW5kbGUoaGFuZGxlTnVtYmVyLCByZXNvbHZlVG9WYWx1ZSh2YWx1ZXNbaGFuZGxlTnVtYmVyXSwgaGFuZGxlTnVtYmVyKSwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlY29uZCBwYXNzLiBOb3cgdGhhdCBhbGwgYmFzZSB2YWx1ZXMgYXJlIHNldCwgYXBwbHkgY29uc3RyYWludHNcclxuICAgICAgICAgICAgc2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgc2V0SGFuZGxlKGhhbmRsZU51bWJlciwgc2NvcGVfTG9jYXRpb25zW2hhbmRsZU51bWJlcl0sIHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNldFppbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgc2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgZmlyZUV2ZW50KFwidXBkYXRlXCIsIGhhbmRsZU51bWJlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRmlyZSB0aGUgZXZlbnQgb25seSBmb3IgaGFuZGxlcyB0aGF0IHJlY2VpdmVkIGEgbmV3IHZhbHVlLCBhcyBwZXIgIzU3OVxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlc1toYW5kbGVOdW1iZXJdICE9PSBudWxsICYmIGZpcmVTZXRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcmVFdmVudChcInNldFwiLCBoYW5kbGVOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlc2V0IHNsaWRlciB0byBpbml0aWFsIHZhbHVlc1xyXG4gICAgICAgIGZ1bmN0aW9uIHZhbHVlUmVzZXQoZmlyZVNldEV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhbHVlU2V0KG9wdGlvbnMuc3RhcnQsIGZpcmVTZXRFdmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXQgdmFsdWUgZm9yIGEgc2luZ2xlIGhhbmRsZVxyXG4gICAgICAgIGZ1bmN0aW9uIHZhbHVlU2V0SGFuZGxlKGhhbmRsZU51bWJlciwgdmFsdWUsIGZpcmVTZXRFdmVudCkge1xyXG4gICAgICAgICAgICAvLyBFbnN1cmUgbnVtZXJpYyBpbnB1dFxyXG4gICAgICAgICAgICBoYW5kbGVOdW1iZXIgPSBOdW1iZXIoaGFuZGxlTnVtYmVyKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghKGhhbmRsZU51bWJlciA+PSAwICYmIGhhbmRsZU51bWJlciA8IHNjb3BlX0hhbmRsZU51bWJlcnMubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiBpbnZhbGlkIGhhbmRsZSBudW1iZXIsIGdvdDogXCIgKyBoYW5kbGVOdW1iZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBMb29rIGJvdGggYmFja3dhcmQgYW5kIGZvcndhcmQsIHNpbmNlIHdlIGRvbid0IHdhbnQgdGhpcyBoYW5kbGUgdG8gXCJwdXNoXCIgb3RoZXIgaGFuZGxlcyAoIzk2MCk7XHJcbiAgICAgICAgICAgIHNldEhhbmRsZShoYW5kbGVOdW1iZXIsIHJlc29sdmVUb1ZhbHVlKHZhbHVlLCBoYW5kbGVOdW1iZXIpLCB0cnVlLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIGZpcmVFdmVudChcInVwZGF0ZVwiLCBoYW5kbGVOdW1iZXIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZpcmVTZXRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgZmlyZUV2ZW50KFwic2V0XCIsIGhhbmRsZU51bWJlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCB0aGUgc2xpZGVyIHZhbHVlLlxyXG4gICAgICAgIGZ1bmN0aW9uIHZhbHVlR2V0KCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gc2NvcGVfVmFsdWVzLm1hcChvcHRpb25zLmZvcm1hdC50byk7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiBvbmx5IG9uZSBoYW5kbGUgaXMgdXNlZCwgcmV0dXJuIGEgc2luZ2xlIHZhbHVlLlxyXG4gICAgICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlc1swXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZXMgY2xhc3NlcyBmcm9tIHRoZSByb290IGFuZCBlbXB0aWVzIGl0LlxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zLmNzc0NsYXNzZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5jc3NDbGFzc2VzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzW2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoc2NvcGVfVGFyZ2V0LmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlX1RhcmdldC5yZW1vdmVDaGlsZChzY29wZV9UYXJnZXQuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRlbGV0ZSBzY29wZV9UYXJnZXQubm9VaVNsaWRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldE5leHRTdGVwc0ZvckhhbmRsZShoYW5kbGVOdW1iZXIpIHtcclxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gc2NvcGVfTG9jYXRpb25zW2hhbmRsZU51bWJlcl07XHJcbiAgICAgICAgICAgIHZhciBuZWFyYnlTdGVwcyA9IHNjb3BlX1NwZWN0cnVtLmdldE5lYXJieVN0ZXBzKGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gc2NvcGVfVmFsdWVzW2hhbmRsZU51bWJlcl07XHJcbiAgICAgICAgICAgIHZhciBpbmNyZW1lbnQgPSBuZWFyYnlTdGVwcy50aGlzU3RlcC5zdGVwO1xyXG4gICAgICAgICAgICB2YXIgZGVjcmVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHNuYXBwZWQsIGRpcmVjdGx5IHVzZSBkZWZpbmVkIHN0ZXAgdmFsdWVcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc25hcCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSAtIG5lYXJieVN0ZXBzLnN0ZXBCZWZvcmUuc3RhcnRWYWx1ZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5lYXJieVN0ZXBzLnN0ZXBBZnRlci5zdGFydFZhbHVlIC0gdmFsdWUgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIG5leHQgdmFsdWUgaW4gdGhpcyBzdGVwIG1vdmVzIGludG8gdGhlIG5leHQgc3RlcCxcclxuICAgICAgICAgICAgLy8gdGhlIGluY3JlbWVudCBpcyB0aGUgc3RhcnQgb2YgdGhlIG5leHQgc3RlcCAtIHRoZSBjdXJyZW50IHZhbHVlXHJcbiAgICAgICAgICAgIGlmIChpbmNyZW1lbnQgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgKyBpbmNyZW1lbnQgPiBuZWFyYnlTdGVwcy5zdGVwQWZ0ZXIuc3RhcnRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudCA9IG5lYXJieVN0ZXBzLnN0ZXBBZnRlci5zdGFydFZhbHVlIC0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBiZXlvbmQgdGhlIHN0YXJ0aW5nIHBvaW50XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA+IG5lYXJieVN0ZXBzLnRoaXNTdGVwLnN0YXJ0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGRlY3JlbWVudCA9IG5lYXJieVN0ZXBzLnRoaXNTdGVwLnN0ZXA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmVhcmJ5U3RlcHMuc3RlcEJlZm9yZS5zdGVwID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgZGVjcmVtZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIGEgaGFuZGxlIGlzIGF0IHRoZSBzdGFydCBvZiBhIHN0ZXAsIGl0IGFsd2F5cyBzdGVwcyBiYWNrIGludG8gdGhlIHByZXZpb3VzIHN0ZXAgZmlyc3RcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnQgPSB2YWx1ZSAtIG5lYXJieVN0ZXBzLnN0ZXBCZWZvcmUuaGlnaGVzdFN0ZXA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE5vdywgaWYgYXQgdGhlIHNsaWRlciBlZGdlcywgdGhlcmUgaXMgbm8gaW4vZGVjcmVtZW50XHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbiA9PT0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICBpbmNyZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBcyBwZXIgIzM5MSwgdGhlIGNvbXBhcmlzb24gZm9yIHRoZSBkZWNyZW1lbnQgc3RlcCBjYW4gaGF2ZSBzb21lIHJvdW5kaW5nIGlzc3Vlcy5cclxuICAgICAgICAgICAgdmFyIHN0ZXBEZWNpbWFscyA9IHNjb3BlX1NwZWN0cnVtLmNvdW50U3RlcERlY2ltYWxzKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBSb3VuZCBwZXIgIzM5MVxyXG4gICAgICAgICAgICBpZiAoaW5jcmVtZW50ICE9PSBudWxsICYmIGluY3JlbWVudCAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGluY3JlbWVudCA9IE51bWJlcihpbmNyZW1lbnQudG9GaXhlZChzdGVwRGVjaW1hbHMpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGRlY3JlbWVudCAhPT0gbnVsbCAmJiBkZWNyZW1lbnQgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnQgPSBOdW1iZXIoZGVjcmVtZW50LnRvRml4ZWQoc3RlcERlY2ltYWxzKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBbZGVjcmVtZW50LCBpbmNyZW1lbnRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IHN0ZXAgc2l6ZSBmb3IgdGhlIHNsaWRlci5cclxuICAgICAgICBmdW5jdGlvbiBnZXROZXh0U3RlcHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzY29wZV9IYW5kbGVOdW1iZXJzLm1hcChnZXROZXh0U3RlcHNGb3JIYW5kbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlYWJsZTogbWFyZ2luLCBsaW1pdCwgcGFkZGluZywgc3RlcCwgcmFuZ2UsIGFuaW1hdGUsIHNuYXBcclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKG9wdGlvbnNUb1VwZGF0ZSwgZmlyZVNldEV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIFNwZWN0cnVtIGlzIGNyZWF0ZWQgdXNpbmcgdGhlIHJhbmdlLCBzbmFwLCBkaXJlY3Rpb24gYW5kIHN0ZXAgb3B0aW9ucy5cclxuICAgICAgICAgICAgLy8gJ3NuYXAnIGFuZCAnc3RlcCcgY2FuIGJlIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgIC8vIElmICdzbmFwJyBhbmQgJ3N0ZXAnIGFyZSBub3QgcGFzc2VkLCB0aGV5IHNob3VsZCByZW1haW4gdW5jaGFuZ2VkLlxyXG4gICAgICAgICAgICB2YXIgdiA9IHZhbHVlR2V0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdXBkYXRlQWJsZSA9IFtcclxuICAgICAgICAgICAgICAgIFwibWFyZ2luXCIsXHJcbiAgICAgICAgICAgICAgICBcImxpbWl0XCIsXHJcbiAgICAgICAgICAgICAgICBcInBhZGRpbmdcIixcclxuICAgICAgICAgICAgICAgIFwicmFuZ2VcIixcclxuICAgICAgICAgICAgICAgIFwiYW5pbWF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJzbmFwXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0ZXBcIixcclxuICAgICAgICAgICAgICAgIFwiZm9ybWF0XCIsXHJcbiAgICAgICAgICAgICAgICBcInBpcHNcIixcclxuICAgICAgICAgICAgICAgIFwidG9vbHRpcHNcIlxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgLy8gT25seSBjaGFuZ2Ugb3B0aW9ucyB0aGF0IHdlJ3JlIGFjdHVhbGx5IHBhc3NlZCB0byB1cGRhdGUuXHJcbiAgICAgICAgICAgIHVwZGF0ZUFibGUuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgdW5kZWZpbmVkLiBudWxsIHJlbW92ZXMgdGhlIHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNUb1VwZGF0ZVtuYW1lXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxPcHRpb25zW25hbWVdID0gb3B0aW9uc1RvVXBkYXRlW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZXdPcHRpb25zID0gdGVzdE9wdGlvbnMob3JpZ2luYWxPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIExvYWQgbmV3IG9wdGlvbnMgaW50byB0aGUgc2xpZGVyIHN0YXRlXHJcbiAgICAgICAgICAgIHVwZGF0ZUFibGUuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uc1RvVXBkYXRlW25hbWVdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zW25hbWVdID0gbmV3T3B0aW9uc1tuYW1lXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzY29wZV9TcGVjdHJ1bSA9IG5ld09wdGlvbnMuc3BlY3RydW07XHJcblxyXG4gICAgICAgICAgICAvLyBMaW1pdCwgbWFyZ2luIGFuZCBwYWRkaW5nIGRlcGVuZCBvbiB0aGUgc3BlY3RydW0gYnV0IGFyZSBzdG9yZWQgb3V0c2lkZSBvZiBpdC4gKCM2NzcpXHJcbiAgICAgICAgICAgIG9wdGlvbnMubWFyZ2luID0gbmV3T3B0aW9ucy5tYXJnaW47XHJcbiAgICAgICAgICAgIG9wdGlvbnMubGltaXQgPSBuZXdPcHRpb25zLmxpbWl0O1xyXG4gICAgICAgICAgICBvcHRpb25zLnBhZGRpbmcgPSBuZXdPcHRpb25zLnBhZGRpbmc7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgcGlwcywgcmVtb3ZlcyBleGlzdGluZy5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGlwcykge1xyXG4gICAgICAgICAgICAgICAgcGlwcyhvcHRpb25zLnBpcHMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlUGlwcygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgdG9vbHRpcHMsIHJlbW92ZXMgZXhpc3RpbmcuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnRvb2x0aXBzKSB7XHJcbiAgICAgICAgICAgICAgICB0b29sdGlwcygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlVG9vbHRpcHMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSW52YWxpZGF0ZSB0aGUgY3VycmVudCBwb3NpdGlvbmluZyBzbyB2YWx1ZVNldCBmb3JjZXMgYW4gdXBkYXRlLlxyXG4gICAgICAgICAgICBzY29wZV9Mb2NhdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgdmFsdWVTZXQob3B0aW9uc1RvVXBkYXRlLnN0YXJ0IHx8IHYsIGZpcmVTZXRFdmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXphdGlvbiBzdGVwc1xyXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwU2xpZGVyKCkge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGJhc2UgZWxlbWVudCwgaW5pdGlhbGl6ZSBIVE1MIGFuZCBzZXQgY2xhc3Nlcy5cclxuICAgICAgICAgICAgLy8gQWRkIGhhbmRsZXMgYW5kIGNvbm5lY3QgZWxlbWVudHMuXHJcbiAgICAgICAgICAgIHNjb3BlX0Jhc2UgPSBhZGRTbGlkZXIoc2NvcGVfVGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgIGFkZEVsZW1lbnRzKG9wdGlvbnMuY29ubmVjdCwgc2NvcGVfQmFzZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBBdHRhY2ggdXNlciBldmVudHMuXHJcbiAgICAgICAgICAgIGJpbmRTbGlkZXJFdmVudHMob3B0aW9ucy5ldmVudHMpO1xyXG5cclxuICAgICAgICAgICAgLy8gVXNlIHRoZSBwdWJsaWMgdmFsdWUgbWV0aG9kIHRvIHNldCB0aGUgc3RhcnQgdmFsdWVzLlxyXG4gICAgICAgICAgICB2YWx1ZVNldChvcHRpb25zLnN0YXJ0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBpcHMpIHtcclxuICAgICAgICAgICAgICAgIHBpcHMob3B0aW9ucy5waXBzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudG9vbHRpcHMpIHtcclxuICAgICAgICAgICAgICAgIHRvb2x0aXBzKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFyaWEoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldHVwU2xpZGVyKCk7XHJcblxyXG4gICAgICAgIC8vIG5vaW5zcGVjdGlvbiBKU1VudXNlZEdsb2JhbFN5bWJvbHNcclxuICAgICAgICBzY29wZV9TZWxmID0ge1xyXG4gICAgICAgICAgICBkZXN0cm95OiBkZXN0cm95LFxyXG4gICAgICAgICAgICBzdGVwczogZ2V0TmV4dFN0ZXBzLFxyXG4gICAgICAgICAgICBvbjogYmluZEV2ZW50LFxyXG4gICAgICAgICAgICBvZmY6IHJlbW92ZUV2ZW50LFxyXG4gICAgICAgICAgICBnZXQ6IHZhbHVlR2V0LFxyXG4gICAgICAgICAgICBzZXQ6IHZhbHVlU2V0LFxyXG4gICAgICAgICAgICBzZXRIYW5kbGU6IHZhbHVlU2V0SGFuZGxlLFxyXG4gICAgICAgICAgICByZXNldDogdmFsdWVSZXNldCxcclxuICAgICAgICAgICAgLy8gRXhwb3NlZCBmb3IgdW5pdCB0ZXN0aW5nLCBkb24ndCB1c2UgdGhpcyBpbiB5b3VyIGFwcGxpY2F0aW9uLlxyXG4gICAgICAgICAgICBfX21vdmVIYW5kbGVzOiBmdW5jdGlvbihhLCBiLCBjKSB7XHJcbiAgICAgICAgICAgICAgICBtb3ZlSGFuZGxlcyhhLCBiLCBzY29wZV9Mb2NhdGlvbnMsIGMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvcHRpb25zOiBvcmlnaW5hbE9wdGlvbnMsIC8vIElzc3VlICM2MDAsICM2NzhcclxuICAgICAgICAgICAgdXBkYXRlT3B0aW9uczogdXBkYXRlT3B0aW9ucyxcclxuICAgICAgICAgICAgdGFyZ2V0OiBzY29wZV9UYXJnZXQsIC8vIElzc3VlICM1OTdcclxuICAgICAgICAgICAgcmVtb3ZlUGlwczogcmVtb3ZlUGlwcyxcclxuICAgICAgICAgICAgcmVtb3ZlVG9vbHRpcHM6IHJlbW92ZVRvb2x0aXBzLFxyXG4gICAgICAgICAgICBwaXBzOiBwaXBzIC8vIElzc3VlICM1OTRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gc2NvcGVfU2VsZjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSdW4gdGhlIHN0YW5kYXJkIGluaXRpYWxpemVyXHJcbiAgICBmdW5jdGlvbiBpbml0aWFsaXplKHRhcmdldCwgb3JpZ2luYWxPcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCF0YXJnZXQgfHwgIXRhcmdldC5ub2RlTmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6IGNyZWF0ZSByZXF1aXJlcyBhIHNpbmdsZSBlbGVtZW50LCBnb3Q6IFwiICsgdGFyZ2V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRocm93IGFuIGVycm9yIGlmIHRoZSBzbGlkZXIgd2FzIGFscmVhZHkgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgaWYgKHRhcmdldC5ub1VpU2xpZGVyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogU2xpZGVyIHdhcyBhbHJlYWR5IGluaXRpYWxpemVkLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRlc3QgdGhlIG9wdGlvbnMgYW5kIGNyZWF0ZSB0aGUgc2xpZGVyIGVudmlyb25tZW50O1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gdGVzdE9wdGlvbnMob3JpZ2luYWxPcHRpb25zLCB0YXJnZXQpO1xyXG4gICAgICAgIHZhciBhcGkgPSBzY29wZSh0YXJnZXQsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHRhcmdldC5ub1VpU2xpZGVyID0gYXBpO1xyXG5cclxuICAgICAgICByZXR1cm4gYXBpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVzZSBhbiBvYmplY3QgaW5zdGVhZCBvZiBhIGZ1bmN0aW9uIGZvciBmdXR1cmUgZXhwYW5kYWJpbGl0eTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgLy8gRXhwb3NlZCBmb3IgdW5pdCB0ZXN0aW5nLCBkb24ndCB1c2UgdGhpcyBpbiB5b3VyIGFwcGxpY2F0aW9uLlxyXG4gICAgICAgIF9fc3BlY3RydW06IFNwZWN0cnVtLFxyXG4gICAgICAgIHZlcnNpb246IFZFUlNJT04sXHJcbiAgICAgICAgY3JlYXRlOiBpbml0aWFsaXplXHJcbiAgICB9O1xyXG59KTtcclxuXHJcbnZhciB0b29sdGlwU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGlkZXItdG9vbHRpcHNcIik7XHJcblxyXG5ub1VpU2xpZGVyLmNyZWF0ZSh0b29sdGlwU2xpZGVyLCB7XHJcbiAgc3RhcnQ6IFswLCA1MDAwXSxcclxuICBzdGVwOiAxMDAsXHJcbiAgY29ubmVjdDogdHJ1ZSxcclxuICB0b29sdGlwczogW3RydWUsIHRydWVdLFxyXG4gIHJhbmdlOiB7XHJcbiAgICBtaW46IDAsXHJcbiAgICBtYXg6IDEwMDAwXHJcbiAgfSxcclxuICBmb3JtYXQ6IHtcclxuICAgIHRvOiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9LFxyXG4gICAgZnJvbTogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoXCIsLVwiLCBcIiBcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qIGxldCBzbGlkZXIgPSBmdW5jdGlvbigpIHtcclxuICAvLyBTZXQgdGltZSBkZWxheSBvZiBzbGlkZXJcclxuICBsZXQgZGVsYXkgPSAzMDAwO1xyXG4gIC8vIFNldCB2YXJpYWJsZXNcclxuICBsZXQgbnVtSW1hZ2VzID0gJChcIi5zbGlkZXItd3JhcHBlclwiKS5sZW5ndGg7XHJcbiAgbGV0IHByZXZpb3VzSW1hZ2UgPSBudW1JbWFnZXM7XHJcbiAgbGV0IGN1cnJlbnRJbWFnZSA9IDE7XHJcbiAgbGV0IG5leHRJbWFnZSA9IDI7XHJcblxyXG4gIC8vIEZpbmQgd2lkdGggb2YgY29udGFpbmVyIGRpdlxyXG4gIGxldCBzbGlkZXJXaWR0aCA9ICQoXCIuY29udGFpbmVyLS1zbGlkZXJcIikud2lkdGgoKTtcclxuXHJcbiAgLy8gR2l2ZSBpbWFnZXMgc2FtZSB3aWR0aCBhcyBzbGlkZXJcclxuICBsZXQgc2l6ZUltYWdlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJChcIi5zbGlkZXItd3JhcHBlclwiKS53aWR0aChzbGlkZXJXaWR0aCk7XHJcbiAgfTtcclxuICBzaXplSW1hZ2VzKCk7XHJcblxyXG4gIC8vIENyZWF0ZSBhcyBtYW55IG5hdmlnYXRpb24gZG90cyBhcyB0aGVyZSBhcmUgcGljdHVyZXNcclxuICBmb3IgKGxldCBpID0gMTsgaSA8PSBudW1JbWFnZXM7IGkrKykge1xyXG4gICAgJChcIiNkb3RzXCIpXHJcbiAgICAgIC5maW5kKFwidWxcIilcclxuICAgICAgLmFwcGVuZCgkKCc8bGkgY2xhc3M9XCJkb3QgJyArIGkgKyAnXCJcIj48L2xpPicpKTtcclxuICB9XHJcblxyXG4gIC8vIFNldCBpbml0aWFsIHBvc2l0aW9uIG9mIGltYWdlc1xyXG4gIGxldCByZXNldEltYWdlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJChcIi5zbGlkZXItd3JhcHBlclwiKS5jc3MoeyBsZWZ0OiBzbGlkZXJXaWR0aCArIFwicHhcIiB9KTtcclxuICAgICQoXCIuc2xpZGVyLXdyYXBwZXJcIilcclxuICAgICAgLmZpcnN0KClcclxuICAgICAgLmNzcyh7IGxlZnQ6IFwiMHB4XCIgfSk7XHJcbiAgICAkKFwiLjFcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgfTtcclxuICByZXNldEltYWdlcygpO1xyXG5cclxuICAvLyBTbGlkZSB0byBuZXh0IGltYWdlXHJcbiAgbGV0IHNsaWRlTmV4dEltYWdlTGVmdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJChcIi5zbGlkZXItd3JhcHBlci1cIiArIG5leHRJbWFnZSkuY3NzKHsgbGVmdDogc2xpZGVyV2lkdGggKyBcInB4XCIgfSk7XHJcbiAgICAkKFwiLnNsaWRlci13cmFwcGVyLVwiICsgY3VycmVudEltYWdlKS5hbmltYXRlKFxyXG4gICAgICB7IGxlZnQ6IHNsaWRlcldpZHRoICogLTEgfSxcclxuICAgICAgMTAwMFxyXG4gICAgKTtcclxuICAgICQoXCIuc2xpZGVyLXdyYXBwZXItXCIgKyBuZXh0SW1hZ2UpLmFuaW1hdGUoeyBsZWZ0OiBcIjBweFwiIH0sIDEwMDApO1xyXG4gICAgY3VycmVudEltYWdlID0gbmV4dEltYWdlO1xyXG4gICAgaW5jcmVhc2VJbWFnZXMoKTtcclxuICB9O1xyXG5cclxuICAvLyBTbGlkZSB0byB0aGUgcHJldmlvdXMgaW1hZ2VcclxuICBsZXQgc2xpZGVQcmV2aW91c0ltYWdlUmlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgICQoXCIuc2xpZGVyLXdyYXBwZXItXCIgKyBwcmV2aW91c0ltYWdlKS5jc3Moe1xyXG4gICAgICBsZWZ0OiBzbGlkZXJXaWR0aCAqIC0xICsgXCJweFwiXHJcbiAgICB9KTtcclxuICAgICQoXCIuc2xpZGVyLXdyYXBwZXItXCIgKyBjdXJyZW50SW1hZ2UpLmFuaW1hdGUoXHJcbiAgICAgIHsgbGVmdDogc2xpZGVyV2lkdGggfSxcclxuICAgICAgMTAwMFxyXG4gICAgKTtcclxuICAgICQoXCIuc2xpZGVyLXdyYXBwZXItXCIgKyBwcmV2aW91c0ltYWdlKS5hbmltYXRlKHsgbGVmdDogXCIwcHhcIiB9LCAxMDAwKTtcclxuICAgIGN1cnJlbnRJbWFnZSA9IHByZXZpb3VzSW1hZ2U7XHJcbiAgICBpbmNyZWFzZUltYWdlcygpO1xyXG4gIH07XHJcblxyXG4gIC8vIFNoaWZ0IHdoaWNoIGltYWdlcyBhcmUgbmV4dCBhbmQgcHJldmlvdXNcclxuICBsZXQgaW5jcmVhc2VJbWFnZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmIChjdXJyZW50SW1hZ2UgPT09IG51bUltYWdlcykge1xyXG4gICAgICBuZXh0SW1hZ2UgPSAxO1xyXG4gICAgICBwcmV2aW91c0ltYWdlID0gY3VycmVudEltYWdlIC0gMTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5leHRJbWFnZSA9IGN1cnJlbnRJbWFnZSArIDE7XHJcbiAgICAgIGlmIChjdXJyZW50SW1hZ2UgPT09IDEpIHtcclxuICAgICAgICBwcmV2aW91c0ltYWdlID0gbnVtSW1hZ2VzO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHByZXZpb3VzSW1hZ2UgPSBjdXJyZW50SW1hZ2UgLSAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBDaGFuZ2UgZG90cyBzdGF0dXNcclxuICAgICQoXCIjZG90c1wiKVxyXG4gICAgICAuZmluZChcImxpXCIpXHJcbiAgICAgIC5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoXCIjZG90c1wiKVxyXG4gICAgICAuZmluZChcIi5cIiArIGN1cnJlbnRJbWFnZSlcclxuICAgICAgLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gIH07XHJcbiAgLy8gU2V0IGluaXRpYWwgc2xpZGVyIGludGVydmFsXHJcbiAgbW92ZUltYWdlcyA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgc2xpZGVOZXh0SW1hZ2VMZWZ0KCk7XHJcbiAgfSwgZGVsYXkpO1xyXG5cclxuICAvLyBXaGVuIG5leHQgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAkKFwiLm5leHRcIikuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBjbGVhckludGVydmFsKG1vdmVJbWFnZXMpO1xyXG4gICAgbW92ZUltYWdlcyA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICBzbGlkZU5leHRJbWFnZUxlZnQoKTtcclxuICAgIH0sIGRlbGF5KTtcclxuICAgIHNsaWRlTmV4dEltYWdlTGVmdCgpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBXaGVuIHByZXZpb3VzIGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgJChcIi5wcmV2aW91c1wiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwobW92ZUltYWdlcyk7XHJcbiAgICBtb3ZlSW1hZ2VzID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgIHNsaWRlTmV4dEltYWdlTGVmdCgpO1xyXG4gICAgfSwgZGVsYXkpO1xyXG4gICAgc2xpZGVQcmV2aW91c0ltYWdlUmlnaHQoKTtcclxuICB9KTtcclxuXHJcbiAgLy8gV2hlbiBhIG5hdmlnYXRpb24gZG90IGlzIGNsaWNrZWRcclxuICAkKFwiLmRvdFwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGJ1dHRvblByZXNzZWQgPSAkKFwibGlcIikuaW5kZXgodGhpcykgKyAxO1xyXG4gICAgaWYgKGJ1dHRvblByZXNzZWQgIT09IGN1cnJlbnRJbWFnZSkge1xyXG4gICAgICBjbGVhckludGVydmFsKG1vdmVJbWFnZXMpO1xyXG4gICAgICBtb3ZlSW1hZ2VzID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2xpZGVOZXh0SW1hZ2VMZWZ0KCk7XHJcbiAgICAgIH0sIGRlbGF5KTtcclxuICAgICAgaWYgKGN1cnJlbnRJbWFnZSA8IGJ1dHRvblByZXNzZWQpIHtcclxuICAgICAgICBuZXh0SW1hZ2UgPSBidXR0b25QcmVzc2VkO1xyXG4gICAgICAgIHNsaWRlTmV4dEltYWdlTGVmdCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHByZXZpb3VzSW1hZ2UgPSBidXR0b25QcmVzc2VkO1xyXG4gICAgICAgIHNsaWRlUHJldmlvdXNJbWFnZVJpZ2h0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gIHNsaWRlcigpO1xyXG59KTsgKi8iXX0=
